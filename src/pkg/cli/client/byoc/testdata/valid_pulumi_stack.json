{
    "version": 3,
    "checkpoint": {
        "stack": "organization/html-css-js/beta",
        "latest": {
            "manifest": {
                "time": "2025-11-22T11:54:29.569806022Z",
                "magic": "ebe3b71ffbd5a95eec1b5cb82516892f944b47f36c5b1ed4f716a76cb5fce31a",
                "version": "v3.187.0"
            },
            "secrets_providers": {
                "type": "passphrase",
                "state": {
                    "salt": "v1:xxFPDo1/xx4=:v1:xx3B/xxZ3KrzOx0D:honuAm4hoTBObl88vAwLJjkfa3KlXQ=="
                }
            },
            "resources": [
                {
                    "urn": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "custom": false,
                    "type": "pulumi:pulumi:Stack",
                    "created": "2025-11-22T11:53:08.147362984Z",
                    "modified": "2025-11-22T11:53:08.147362984Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang::defang",
                    "custom": false,
                    "type": "defang-mvp:shared/ecs/defang:Defang",
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "created": "2025-11-22T11:53:10.593759398Z",
                    "modified": "2025-11-22T11:53:10.593759398Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0",
                    "custom": true,
                    "id": "f3def38c-662d-4447-9759-16c0334ac0bf",
                    "type": "pulumi:providers:aws",
                    "inputs": {
                        "__internal": {},
                        "defaultTags": "{\"tags\":{\"defang:org\":\"testuser\",\"defang:project\":\"html-css-js\",\"defang:stack\":\"beta\",\"defang:version\":\"0.6.0-1189-gb86d4117\"}}",
                        "region": "us-west-2",
                        "skipCredentialsValidation": "false",
                        "skipRegionValidation": "true",
                        "version": "6.57.0"
                    },
                    "outputs": {
                        "defaultTags": "{\"tags\":{\"defang:org\":\"testuser\",\"defang:project\":\"html-css-js\",\"defang:stack\":\"beta\",\"defang:version\":\"0.6.0-1189-gb86d4117\"}}",
                        "region": "us-west-2",
                        "skipCredentialsValidation": "false",
                        "skipRegionValidation": "true",
                        "version": "6.57.0"
                    },
                    "created": "2025-11-22T11:53:10.700779991Z",
                    "modified": "2025-11-22T11:53:10.700779991Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:cloudwatch/logGroup:LogGroup::ecs",
                    "custom": true,
                    "id": "/Defang/html-css-js/beta/ecs",
                    "type": "aws:cloudwatch/logGroup:LogGroup",
                    "inputs": {
                        "__defaults": [
                            "skipDestroy"
                        ],
                        "name": "/Defang/html-css-js/beta/ecs",
                        "retentionInDays": 1,
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/ecs",
                        "id": "/Defang/html-css-js/beta/ecs",
                        "kmsKeyId": "",
                        "logGroupClass": "STANDARD",
                        "name": "/Defang/html-css-js/beta/ecs",
                        "namePrefix": "",
                        "retentionInDays": 1,
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "retentionInDays": []
                    },
                    "created": "2025-11-22T11:53:11.300076138Z",
                    "modified": "2025-11-22T11:53:11.300076138Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:ecr/pullThroughCacheRule:PullThroughCacheRule::ecr-public",
                    "custom": true,
                    "id": "ecr-public-htm59b851",
                    "type": "aws:ecr/pullThroughCacheRule:PullThroughCacheRule",
                    "inputs": {
                        "__defaults": [],
                        "ecrRepositoryPrefix": "ecr-public-htm59b851",
                        "upstreamRegistryUrl": "public.ecr.aws"
                    },
                    "outputs": {
                        "credentialArn": "",
                        "ecrRepositoryPrefix": "ecr-public-htm59b851",
                        "id": "ecr-public-htm59b851",
                        "registryId": "123456789012",
                        "upstreamRegistryUrl": "public.ecr.aws"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "ecrRepositoryPrefix": [],
                        "upstreamRegistryUrl": []
                    },
                    "created": "2025-11-22T11:53:11.560652921Z",
                    "modified": "2025-11-22T11:53:11.560652921Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:cloudwatch/logGroup:LogGroup::logs",
                    "custom": true,
                    "id": "/Defang/html-css-js/beta/logs",
                    "type": "aws:cloudwatch/logGroup:LogGroup",
                    "inputs": {
                        "__defaults": [
                            "skipDestroy"
                        ],
                        "name": "/Defang/html-css-js/beta/logs",
                        "retentionInDays": 1,
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/logs",
                        "id": "/Defang/html-css-js/beta/logs",
                        "kmsKeyId": "",
                        "logGroupClass": "STANDARD",
                        "name": "/Defang/html-css-js/beta/logs",
                        "namePrefix": "",
                        "retentionInDays": 1,
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "retentionInDays": []
                    },
                    "created": "2025-11-22T11:53:11.565600572Z",
                    "modified": "2025-11-22T11:53:11.565600572Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:ec2/vpcDhcpOptions:VpcDhcpOptions::dhcp-options",
                    "custom": true,
                    "id": "dopt-0eba26f92a7bc54b3",
                    "type": "aws:ec2/vpcDhcpOptions:VpcDhcpOptions",
                    "inputs": {
                        "__defaults": [],
                        "domainName": "html-css-js.internal",
                        "domainNameServers": [
                            "AmazonProvidedDNS"
                        ],
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:ec2:us-west-2:123456789012:dhcp-options/dopt-0eba26f92a7bc54b3",
                        "domainName": "html-css-js.internal",
                        "domainNameServers": [
                            "AmazonProvidedDNS"
                        ],
                        "id": "dopt-0eba26f92a7bc54b3",
                        "ipv6AddressPreferredLeaseTime": "",
                        "netbiosNameServers": null,
                        "netbiosNodeType": "",
                        "ntpServers": null,
                        "ownerId": "123456789012",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "domainName": [],
                        "domainNameServers": []
                    },
                    "created": "2025-11-22T11:53:11.938471559Z",
                    "modified": "2025-11-22T11:53:11.938471559Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/policy:Policy::AllowRoute53Sidecar",
                    "custom": true,
                    "id": "arn:aws:iam::123456789012:policy/Defang-html-css-js-beta-AllowRoute53Sidecarus-west-2",
                    "type": "aws:iam/policy:Policy",
                    "inputs": {
                        "__defaults": [
                            "path"
                        ],
                        "name": "Defang-html-css-js-beta-AllowRoute53Sidecarus-west-2",
                        "path": "/",
                        "policy": "{\"Statement\":[{\"Action\":[\"route53:ChangeResourceRecordSets\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowRoute53SidecarWrite\"},{\"Action\":[\"route53:GetChange\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowRoute53Read\"}],\"Version\":\"2012-10-17\"}",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:iam::123456789012:policy/Defang-html-css-js-beta-AllowRoute53Sidecarus-west-2",
                        "attachmentCount": 0,
                        "description": "",
                        "id": "arn:aws:iam::123456789012:policy/Defang-html-css-js-beta-AllowRoute53Sidecarus-west-2",
                        "name": "Defang-html-css-js-beta-AllowRoute53Sidecarus-west-2",
                        "namePrefix": "",
                        "path": "/",
                        "policy": "{\"Statement\":[{\"Action\":[\"route53:ChangeResourceRecordSets\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowRoute53SidecarWrite\"},{\"Action\":[\"route53:GetChange\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowRoute53Read\"}],\"Version\":\"2012-10-17\"}",
                        "policyId": "ANPAVRUVVFRJE3NGG4GJQ",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "policy": []
                    },
                    "created": "2025-11-22T11:53:12.156779152Z",
                    "modified": "2025-11-22T11:53:12.156779152Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::pulumi:providers:awsx::default_2_17_0",
                    "custom": true,
                    "id": "507d902d-82fb-48da-9286-614423511854",
                    "type": "pulumi:providers:awsx",
                    "inputs": {
                        "__internal": {},
                        "version": "2.17.0"
                    },
                    "outputs": {
                        "version": "2.17.0"
                    },
                    "created": "2025-11-22T11:53:12.434129059Z",
                    "modified": "2025-11-22T11:53:12.434129059Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs",
                    "custom": true,
                    "id": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                    "type": "aws:s3/bucket:Bucket",
                    "inputs": {
                        "__defaults": [
                            "acl"
                        ],
                        "acl": "private",
                        "bucketPrefix": "defang-html-css-js-beta-alb-logs",
                        "forceDestroy": true,
                        "lifecycleRules": [
                            {
                                "__defaults": [],
                                "enabled": true,
                                "expiration": {
                                    "__defaults": [],
                                    "days": 1
                                }
                            }
                        ],
                        "serverSideEncryptionConfiguration": {
                            "__defaults": [],
                            "rule": {
                                "__defaults": [],
                                "applyServerSideEncryptionByDefault": {
                                    "__defaults": [],
                                    "sseAlgorithm": "AES256"
                                },
                                "bucketKeyEnabled": true
                            }
                        },
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "accelerationStatus": "",
                        "acl": "private",
                        "arn": "arn:aws:s3:::defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "bucket": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "bucketDomainName": "defang-html-css-js-beta-alb-logs20251122115311301900000001.s3.amazonaws.com",
                        "bucketPrefix": "defang-html-css-js-beta-alb-logs",
                        "bucketRegionalDomainName": "defang-html-css-js-beta-alb-logs20251122115311301900000001.s3.us-west-2.amazonaws.com",
                        "corsRules": [],
                        "forceDestroy": true,
                        "grants": [],
                        "hostedZoneId": "Z3BJ6K6RIION7M",
                        "id": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "lifecycleRules": [
                            {
                                "abortIncompleteMultipartUploadDays": 0,
                                "enabled": true,
                                "expiration": {
                                    "date": "",
                                    "days": 1,
                                    "expiredObjectDeleteMarker": false
                                },
                                "id": "pu-s3-lifecycle-20251122115312057100000003",
                                "noncurrentVersionExpiration": null,
                                "noncurrentVersionTransitions": [],
                                "prefix": "",
                                "tags": null,
                                "transitions": []
                            }
                        ],
                        "loggings": [],
                        "objectLockConfiguration": null,
                        "policy": null,
                        "region": "us-west-2",
                        "replicationConfiguration": null,
                        "requestPayer": "BucketOwner",
                        "serverSideEncryptionConfiguration": {
                            "rule": {
                                "applyServerSideEncryptionByDefault": {
                                    "kmsMasterKeyId": "",
                                    "sseAlgorithm": "AES256"
                                },
                                "bucketKeyEnabled": true
                            }
                        },
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "versioning": {
                            "enabled": false,
                            "mfaDelete": false
                        },
                        "website": null,
                        "websiteDomain": null,
                        "websiteEndpoint": null
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "bucketPrefix": [],
                        "forceDestroy": [],
                        "lifecycleRules": [],
                        "serverSideEncryptionConfiguration": []
                    },
                    "created": "2025-11-22T11:53:12.673539601Z",
                    "modified": "2025-11-22T11:53:12.673539601Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-code-build-roleus-west-2",
                    "type": "aws:iam/role:Role",
                    "inputs": {
                        "__defaults": [
                            "forceDetachPolicies",
                            "maxSessionDuration",
                            "path"
                        ],
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codebuild.amazonaws.com\"},\"Sid\":\"AllowAssumeRole\"}],\"Version\":\"2012-10-17\"}",
                        "forceDetachPolicies": false,
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-code-build-roleus-west-2",
                        "path": "/",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-code-build-roleus-west-2",
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"codebuild.amazonaws.com\"},\"Sid\":\"AllowAssumeRole\"}],\"Version\":\"2012-10-17\"}",
                        "createDate": "2025-11-22T11:53:12Z",
                        "description": "",
                        "forceDetachPolicies": false,
                        "id": "Defang-html-css-js-beta-code-build-roleus-west-2",
                        "inlinePolicies": [],
                        "managedPolicyArns": [],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-code-build-roleus-west-2",
                        "namePrefix": "",
                        "path": "/",
                        "permissionsBoundary": "",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "uniqueId": "AROAVRUVVFRJMMNZBRLY2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "assumeRolePolicy": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:13.501347388Z",
                    "modified": "2025-11-22T11:53:13.501347388Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:cloudwatch/logResourcePolicy:LogResourcePolicy::html-css-js-ecs-log-policy",
                    "custom": true,
                    "id": "html-css-js-ecs-log-policy",
                    "type": "aws:cloudwatch/logResourcePolicy:LogResourcePolicy",
                    "inputs": {
                        "__defaults": [],
                        "policyDocument": "{\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"events.amazonaws.com\",\"delivery.logs.amazonaws.com\"]},\"Resource\":\"arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/ecs:*\",\"Sid\":\"TrustEventsToStoreLogEvent\"}],\"Version\":\"2012-10-17\"}",
                        "policyName": "html-css-js-ecs-log-policy"
                    },
                    "outputs": {
                        "id": "html-css-js-ecs-log-policy",
                        "policyDocument": "{\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"events.amazonaws.com\",\"delivery.logs.amazonaws.com\"]},\"Resource\":\"arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/ecs:*\",\"Sid\":\"TrustEventsToStoreLogEvent\"}],\"Version\":\"2012-10-17\"}",
                        "policyName": "html-css-js-ecs-log-policy"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:cloudwatch/logGroup:LogGroup::ecs"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "policyDocument": [
                            "urn:pulumi:beta::html-css-js::aws:cloudwatch/logGroup:LogGroup::ecs"
                        ],
                        "policyName": []
                    },
                    "created": "2025-11-22T11:53:13.586814949Z",
                    "modified": "2025-11-22T11:53:13.586814949Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                    "type": "aws:iam/role:Role",
                    "inputs": {
                        "__defaults": [
                            "forceDetachPolicies",
                            "maxSessionDuration",
                            "path"
                        ],
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"},\"Sid\":\"AllowAssumeRole\"}],\"Version\":\"2012-10-17\"}",
                        "forceDetachPolicies": false,
                        "managedPolicyArns": [
                            "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
                        ],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "path": "/",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"},\"Sid\":\"AllowAssumeRole\"}],\"Version\":\"2012-10-17\"}",
                        "createDate": "2025-11-22T11:53:13Z",
                        "description": "",
                        "forceDetachPolicies": false,
                        "id": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "inlinePolicies": [],
                        "managedPolicyArns": [
                            "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
                        ],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "namePrefix": "",
                        "path": "/",
                        "permissionsBoundary": "",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "uniqueId": "AROAVRUVVFRJKS6G32QJM"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "assumeRolePolicy": [],
                        "managedPolicyArns": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:13.653188974Z",
                    "modified": "2025-11-22T11:53:13.653188974Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-agent-profile",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                    "type": "aws:iam/role:Role",
                    "inputs": {
                        "__defaults": [
                            "forceDetachPolicies",
                            "maxSessionDuration",
                            "path"
                        ],
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"AllowAssumeRole\"}],\"Version\":\"2012-10-17\"}",
                        "forceDetachPolicies": false,
                        "managedPolicyArns": [
                            "arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role"
                        ],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "path": "/",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Sid\":\"AllowAssumeRole\"}],\"Version\":\"2012-10-17\"}",
                        "createDate": "2025-11-22T11:53:13Z",
                        "description": "",
                        "forceDetachPolicies": false,
                        "id": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "inlinePolicies": [],
                        "managedPolicyArns": [
                            "arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role"
                        ],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "namePrefix": "",
                        "path": "/",
                        "permissionsBoundary": "",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "uniqueId": "AROAVRUVVFRJL7Z5G6NUW"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "assumeRolePolicy": [],
                        "managedPolicyArns": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:13.832428402Z",
                    "modified": "2025-11-22T11:53:13.832428402Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/role:Role::app",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-appus-west-2",
                    "type": "aws:iam/role:Role",
                    "inputs": {
                        "__defaults": [
                            "forceDetachPolicies",
                            "maxSessionDuration",
                            "path"
                        ],
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Condition\":{\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:ecs:us-west-2:123456789012:*\"},\"StringEquals\":{\"aws:SourceAccount\":\"123456789012\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
                        "forceDetachPolicies": false,
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-appus-west-2",
                        "path": "/",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-appus-west-2",
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Condition\":{\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:ecs:us-west-2:123456789012:*\"},\"StringEquals\":{\"aws:SourceAccount\":\"123456789012\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
                        "createDate": "2025-11-22T11:53:13Z",
                        "description": "",
                        "forceDetachPolicies": false,
                        "id": "Defang-html-css-js-beta-appus-west-2",
                        "inlinePolicies": [],
                        "managedPolicyArns": [],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-appus-west-2",
                        "namePrefix": "",
                        "path": "/",
                        "permissionsBoundary": "",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "uniqueId": "AROAVRUVVFRJA7WS6ML54"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "assumeRolePolicy": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:13.869608834Z",
                    "modified": "2025-11-22T11:53:13.869608834Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build",
                    "custom": false,
                    "type": "awsx:ecr:Repository",
                    "outputs": {
                        "lifecyclePolicy": {
                            "4dabf18193072939515e22adb298388d": "5cf8f73096256a8f31e491e813e4eb8e",
                            "id": "html-css-js/kaniko-build",
                            "packageVersion": "",
                            "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/lifecyclePolicy:LifecyclePolicy::html-css-js/kaniko-build"
                        },
                        "repository": {
                            "4dabf18193072939515e22adb298388d": "5cf8f73096256a8f31e491e813e4eb8e",
                            "id": "html-css-js/kaniko-build",
                            "packageVersion": "",
                            "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "created": "2025-11-22T11:53:14.00611904Z",
                    "modified": "2025-11-22T11:53:14.00611904Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ecr/repository.js#33,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                    "custom": false,
                    "type": "awsx:ec2:Vpc",
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "created": "2025-11-22T11:53:14.104818819Z",
                    "modified": "2025-11-22T11:53:14.104818819Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ec2/vpc.js#27,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build/cache",
                    "custom": false,
                    "type": "awsx:ecr:Repository",
                    "outputs": {
                        "lifecyclePolicy": {
                            "4dabf18193072939515e22adb298388d": "5cf8f73096256a8f31e491e813e4eb8e",
                            "id": "html-css-js/kaniko-build/cache",
                            "packageVersion": "",
                            "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/lifecyclePolicy:LifecyclePolicy::html-css-js/kaniko-build/cache"
                        },
                        "repository": {
                            "4dabf18193072939515e22adb298388d": "5cf8f73096256a8f31e491e813e4eb8e",
                            "id": "html-css-js/kaniko-build/cache",
                            "packageVersion": "",
                            "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build/cache"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "created": "2025-11-22T11:53:14.447036285Z",
                    "modified": "2025-11-22T11:53:14.447036285Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ecr/repository.js#33,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:s3/bucketPublicAccessBlock:BucketPublicAccessBlock::alb-logs-block",
                    "custom": true,
                    "id": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                    "type": "aws:s3/bucketPublicAccessBlock:BucketPublicAccessBlock",
                    "inputs": {
                        "__defaults": [],
                        "blockPublicAcls": true,
                        "blockPublicPolicy": true,
                        "bucket": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "ignorePublicAcls": true,
                        "restrictPublicBuckets": true
                    },
                    "outputs": {
                        "blockPublicAcls": true,
                        "blockPublicPolicy": true,
                        "bucket": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "id": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "ignorePublicAcls": true,
                        "restrictPublicBuckets": true
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "blockPublicAcls": [],
                        "blockPublicPolicy": [],
                        "bucket": [
                            "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs"
                        ],
                        "ignorePublicAcls": [],
                        "restrictPublicBuckets": []
                    },
                    "created": "2025-11-22T11:53:14.982588241Z",
                    "modified": "2025-11-22T11:53:14.982588241Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:s3/bucketPolicy:BucketPolicy::alb-logs-policy",
                    "custom": true,
                    "id": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                    "type": "aws:s3/bucketPolicy:BucketPolicy",
                    "inputs": {
                        "__defaults": [],
                        "bucket": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "policy": "{\"Statement\":[{\"Action\":\"s3:PutObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::797873946194:root\"},\"Resource\":\"arn:aws:s3:::defang-html-css-js-beta-alb-logs20251122115311301900000001/AWSLogs/123456789012/*\",\"Sid\":\"AWSLogDeliveryWrite\"},{\"Action\":\"s3:GetBucketAcl\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::797873946194:root\"},\"Resource\":\"arn:aws:s3:::defang-html-css-js-beta-alb-logs20251122115311301900000001\",\"Sid\":\"AWSLogDeliveryAclCheck\"}],\"Version\":\"2012-10-17\"}"
                    },
                    "outputs": {
                        "bucket": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "id": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                        "policy": "{\"Statement\":[{\"Action\":\"s3:PutObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::797873946194:root\"},\"Resource\":\"arn:aws:s3:::defang-html-css-js-beta-alb-logs20251122115311301900000001/AWSLogs/123456789012/*\",\"Sid\":\"AWSLogDeliveryWrite\"},{\"Action\":\"s3:GetBucketAcl\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::797873946194:root\"},\"Resource\":\"arn:aws:s3:::defang-html-css-js-beta-alb-logs20251122115311301900000001\",\"Sid\":\"AWSLogDeliveryAclCheck\"}],\"Version\":\"2012-10-17\"}"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "bucket": [
                            "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs"
                        ],
                        "policy": [
                            "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs"
                        ]
                    },
                    "created": "2025-11-22T11:53:15.174607371Z",
                    "modified": "2025-11-22T11:53:15.174607371Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::ecs-task-execution-role-AllowECRPassThrough",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2:AllowECRPassThrough",
                    "type": "aws:iam/rolePolicy:RolePolicy",
                    "inputs": {
                        "__defaults": [],
                        "name": "AllowECRPassThrough",
                        "policy": "{\"Statement\":[{\"Action\":[\"ecr:BatchImportUpstreamImage\",\"ecr:CreateRepository\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ecr:us-west-2:123456789012:repository/ecr-public-htm59b851/*\"]}],\"Version\":\"2012-10-17\"}",
                        "role": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2"
                    },
                    "outputs": {
                        "id": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2:AllowECRPassThrough",
                        "name": "AllowECRPassThrough",
                        "namePrefix": "",
                        "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ecr:BatchImportUpstreamImage\",\"ecr:CreateRepository\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ecr:us-west-2:123456789012:repository/ecr-public-htm59b851/*\"]}]}",
                        "role": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:ecr/pullThroughCacheRule:PullThroughCacheRule::ecr-public",
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "policy": [
                            "urn:pulumi:beta::html-css-js::aws:ecr/pullThroughCacheRule:PullThroughCacheRule::ecr-public"
                        ],
                        "role": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:15.449096626Z",
                    "modified": "2025-11-22T11:53:15.449096626Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::ecs-task-execution-role-AllowGetSecrets",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2:AllowGetSecrets",
                    "type": "aws:iam/rolePolicy:RolePolicy",
                    "inputs": {
                        "__defaults": [],
                        "name": "AllowGetSecrets",
                        "policy": "{\"Statement\":[{\"Action\":[\"ssm:GetParameters\",\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
                        "role": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2"
                    },
                    "outputs": {
                        "id": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2:AllowGetSecrets",
                        "name": "AllowGetSecrets",
                        "namePrefix": "",
                        "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"ssm:GetParameters\",\"secretsmanager:GetSecretValue\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
                        "role": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "policy": [],
                        "role": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:15.557562881Z",
                    "modified": "2025-11-22T11:53:15.557562881Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                    "custom": true,
                    "id": "html-css-js/kaniko-build",
                    "type": "aws:ecr/repository:Repository",
                    "inputs": {
                        "__defaults": [
                            "imageTagMutability"
                        ],
                        "encryptionConfigurations": [
                            {
                                "__defaults": [],
                                "encryptionType": "AES256"
                            }
                        ],
                        "forceDelete": true,
                        "imageScanningConfiguration": {
                            "__defaults": [],
                            "scanOnPush": true
                        },
                        "imageTagMutability": "MUTABLE",
                        "name": "html-css-js/kaniko-build",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}",
                        "arn": "arn:aws:ecr:us-west-2:123456789012:repository/html-css-js/kaniko-build",
                        "encryptionConfigurations": [
                            {
                                "encryptionType": "AES256",
                                "kmsKey": ""
                            }
                        ],
                        "forceDelete": true,
                        "id": "html-css-js/kaniko-build",
                        "imageScanningConfiguration": {
                            "scanOnPush": true
                        },
                        "imageTagMutability": "MUTABLE",
                        "name": "html-css-js/kaniko-build",
                        "registryId": "123456789012",
                        "repositoryUrl": "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "encryptionConfigurations": [],
                        "forceDelete": [],
                        "imageScanningConfiguration": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:15.86982315Z",
                    "modified": "2025-11-22T11:53:15.86982315Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ecr/repository.js#39,27"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/instanceProfile:InstanceProfile::ecs-agent-profile",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                    "type": "aws:iam/instanceProfile:InstanceProfile",
                    "inputs": {
                        "__defaults": [
                            "path"
                        ],
                        "name": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "path": "/",
                        "role": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:iam::123456789012:instance-profile/Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "createDate": "2025-11-22T11:53:15Z",
                        "id": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "name": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "namePrefix": "",
                        "path": "/",
                        "role": "Defang-html-css-js-beta-ecs-agent-profileus-west-2",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "uniqueId": "AIPAVRUVVFRJD3K52HWOK"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-agent-profile"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "role": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-agent-profile"
                        ]
                    },
                    "created": "2025-11-22T11:53:16.145071346Z",
                    "modified": "2025-11-22T11:53:16.145071346Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build/cache",
                    "custom": true,
                    "id": "html-css-js/kaniko-build/cache",
                    "type": "aws:ecr/repository:Repository",
                    "inputs": {
                        "__defaults": [
                            "imageTagMutability"
                        ],
                        "encryptionConfigurations": [
                            {
                                "__defaults": [],
                                "encryptionType": "AES256"
                            }
                        ],
                        "forceDelete": true,
                        "imageScanningConfiguration": {
                            "__defaults": [],
                            "scanOnPush": true
                        },
                        "imageTagMutability": "MUTABLE",
                        "name": "html-css-js/kaniko-build/cache",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"delete\":1200000000000}}",
                        "arn": "arn:aws:ecr:us-west-2:123456789012:repository/html-css-js/kaniko-build/cache",
                        "encryptionConfigurations": [
                            {
                                "encryptionType": "AES256",
                                "kmsKey": ""
                            }
                        ],
                        "forceDelete": true,
                        "id": "html-css-js/kaniko-build/cache",
                        "imageScanningConfiguration": {
                            "scanOnPush": true
                        },
                        "imageTagMutability": "MUTABLE",
                        "name": "html-css-js/kaniko-build/cache",
                        "registryId": "123456789012",
                        "repositoryUrl": "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build/cache",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build/cache",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "encryptionConfigurations": [],
                        "forceDelete": [],
                        "imageScanningConfiguration": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:16.594048778Z",
                    "modified": "2025-11-22T11:53:16.594048778Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ecr/repository.js#39,27"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/rolePoliciesExclusive:RolePoliciesExclusive::ecs-task-execution-role",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                    "type": "aws:iam/rolePoliciesExclusive:RolePoliciesExclusive",
                    "inputs": {
                        "policyNames": [
                            "AllowGetSecrets",
                            "AllowECRPassThrough"
                        ],
                        "roleName": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2"
                    },
                    "outputs": {
                        "policyNames": [
                            "AllowECRPassThrough",
                            "AllowGetSecrets"
                        ],
                        "roleName": "Defang-html-css-js-beta-ecs-task-execution-roleus-west-2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::ecs-task-execution-role-AllowGetSecrets",
                        "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::ecs-task-execution-role-AllowECRPassThrough",
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "policyNames": [
                            "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::ecs-task-execution-role-AllowGetSecrets",
                            "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::ecs-task-execution-role-AllowECRPassThrough"
                        ],
                        "roleName": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:16.694881215Z",
                    "modified": "2025-11-22T11:53:16.694881215Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/lifecyclePolicy:LifecyclePolicy::html-css-js/kaniko-build",
                    "custom": true,
                    "id": "html-css-js/kaniko-build",
                    "type": "aws:ecr/lifecyclePolicy:LifecyclePolicy",
                    "inputs": {
                        "__defaults": [],
                        "policy": "{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"remove untagged images\",\"rulePriority\":1,\"selection\":{\"countNumber\":1,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"untagged\"}}]}",
                        "repository": "html-css-js/kaniko-build"
                    },
                    "outputs": {
                        "id": "html-css-js/kaniko-build",
                        "policy": "{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"remove untagged images\",\"rulePriority\":1,\"selection\":{\"countNumber\":1,\"countType\":\"imageCountMoreThan\",\"tagStatus\":\"untagged\"}}]}",
                        "registryId": "123456789012",
                        "repository": "html-css-js/kaniko-build"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "policy": [],
                        "repository": [
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build"
                        ]
                    },
                    "created": "2025-11-22T11:53:17.016623672Z",
                    "modified": "2025-11-22T11:53:17.016623672Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ecr/repository.js#44,36"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/lifecyclePolicy:LifecyclePolicy::html-css-js/kaniko-build/cache",
                    "custom": true,
                    "id": "html-css-js/kaniko-build/cache",
                    "type": "aws:ecr/lifecyclePolicy:LifecyclePolicy",
                    "inputs": {
                        "__defaults": [],
                        "policy": "{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"delete images after 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"any\"}}]}",
                        "repository": "html-css-js/kaniko-build/cache"
                    },
                    "outputs": {
                        "id": "html-css-js/kaniko-build/cache",
                        "policy": "{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"delete images after 7 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":7,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"any\"}}]}",
                        "registryId": "123456789012",
                        "repository": "html-css-js/kaniko-build/cache"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build/cache",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build/cache"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "policy": [],
                        "repository": [
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build/cache"
                        ]
                    },
                    "created": "2025-11-22T11:53:17.594413493Z",
                    "modified": "2025-11-22T11:53:17.594413493Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ecr/repository.js#44,36"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::pulumi:providers:pulumi::default",
                    "custom": true,
                    "id": "044f86e1-0f66-4ef6-804e-bbbacfae5f69",
                    "type": "pulumi:providers:pulumi",
                    "created": "2025-11-22T11:53:17.855453471Z",
                    "modified": "2025-11-22T11:53:17.855453471Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:acm/certificate:Certificate::*.html-css-js.testuser.defang.app",
                    "custom": true,
                    "id": "arn:aws:acm:us-west-2:123456789012:certificate/e894c1a2-c7e1-4560-9b24-6a8928a622d5",
                    "type": "aws:acm/certificate:Certificate",
                    "inputs": {
                        "__defaults": [],
                        "domainName": "*.html-css-js.testuser.defang.app",
                        "subjectAlternativeNames": [
                            "html-css-js.testuser.defang.app"
                        ],
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "validationMethod": "DNS"
                    },
                    "outputs": {
                        "arn": "arn:aws:acm:us-west-2:123456789012:certificate/e894c1a2-c7e1-4560-9b24-6a8928a622d5",
                        "certificateAuthorityArn": "",
                        "certificateBody": null,
                        "certificateChain": null,
                        "domainName": "*.html-css-js.testuser.defang.app",
                        "domainValidationOptions": [
                            {
                                "domainName": "*.html-css-js.testuser.defang.app",
                                "resourceRecordName": "_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app.",
                                "resourceRecordType": "CNAME",
                                "resourceRecordValue": "_f51defb22cb6f7f94a3186bd70cc9304.jkddzztszm.acm-validations.aws."
                            },
                            {
                                "domainName": "html-css-js.testuser.defang.app",
                                "resourceRecordName": "_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app.",
                                "resourceRecordType": "CNAME",
                                "resourceRecordValue": "_f51defb22cb6f7f94a3186bd70cc9304.jkddzztszm.acm-validations.aws."
                            }
                        ],
                        "earlyRenewalDuration": "",
                        "id": "arn:aws:acm:us-west-2:123456789012:certificate/e894c1a2-c7e1-4560-9b24-6a8928a622d5",
                        "keyAlgorithm": "RSA_2048",
                        "notAfter": "",
                        "notBefore": "",
                        "options": {
                            "certificateTransparencyLoggingPreference": "ENABLED"
                        },
                        "pendingRenewal": false,
                        "privateKey": {
                            "4dabf18193072939515e22adb298388d": "1b47061264138c4ac30d75fd1eb44270",
                            "ciphertext": "v1:7jrjWYk3ptevr9il:vOjpNSYDySoF2Ef9h9FJg8qAxXs="
                        },
                        "renewalEligibility": "INELIGIBLE",
                        "renewalSummaries": [],
                        "status": "PENDING_VALIDATION",
                        "subjectAlternativeNames": [
                            "*.html-css-js.testuser.defang.app",
                            "html-css-js.testuser.defang.app"
                        ],
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "type": "AMAZON_ISSUED",
                        "validationEmails": [],
                        "validationMethod": "DNS",
                        "validationOptions": []
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "domainName": [],
                        "subjectAlternativeNames": [],
                        "validationMethod": []
                    },
                    "additionalSecretOutputs": [
                        "privateKey"
                    ],
                    "retainOnDelete": true,
                    "created": "2025-11-22T11:53:17.861652451Z",
                    "modified": "2025-11-22T11:53:17.861652451Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/cluster:Cluster::cluster",
                    "custom": true,
                    "id": "arn:aws:ecs:us-west-2:123456789012:cluster/Defang-html-css-js-beta-cluster",
                    "type": "aws:ecs/cluster:Cluster",
                    "inputs": {
                        "__defaults": [],
                        "name": "Defang-html-css-js-beta-cluster",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:ecs:us-west-2:123456789012:cluster/Defang-html-css-js-beta-cluster",
                        "configuration": null,
                        "id": "arn:aws:ecs:us-west-2:123456789012:cluster/Defang-html-css-js-beta-cluster",
                        "name": "Defang-html-css-js-beta-cluster",
                        "serviceConnectDefaults": null,
                        "settings": [
                            {
                                "name": "containerInsights",
                                "value": "disabled"
                            }
                        ],
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang::defang",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": []
                    },
                    "created": "2025-11-22T11:53:23.642593698Z",
                    "modified": "2025-11-22T11:53:23.642593698Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:cloudwatch/eventRule:EventRule::html-css-js-ecs-lifecycle-rule",
                    "custom": true,
                    "id": "html-css-js-ecs-lifecycle-rule-be7169a",
                    "type": "aws:cloudwatch/eventRule:EventRule",
                    "inputs": {
                        "__defaults": [
                            "eventBusName",
                            "forceDestroy",
                            "name"
                        ],
                        "description": "Capture ECS task lifecycle events of cluster arn:aws:ecs:us-west-2:123456789012:cluster/Defang-html-css-js-beta-cluster",
                        "eventBusName": "default",
                        "eventPattern": "{\"source\":[\"aws.ecs\"],\"detail-type\":[\"ECS Task State Change\",\"ECS Service Action\",\"ECS Deployment State Change\"],\"$or\":[{\"resources\":[{\"prefix\":\"arn:aws:ecs:us-west-2:123456789012:service/Defang-html-css-js-beta-\"}]},{\"detail\":{\"clusterArn\":[\"arn:aws:ecs:us-west-2:123456789012:cluster/Defang-html-css-js-beta-cluster\"]}}]}",
                        "forceDestroy": false,
                        "name": "html-css-js-ecs-lifecycle-rule-be7169a",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"1\"}",
                        "arn": "arn:aws:events:us-west-2:123456789012:rule/html-css-js-ecs-lifecycle-rule-be7169a",
                        "description": "Capture ECS task lifecycle events of cluster arn:aws:ecs:us-west-2:123456789012:cluster/Defang-html-css-js-beta-cluster",
                        "eventBusName": "default",
                        "eventPattern": "{\"$or\":[{\"resources\":[{\"prefix\":\"arn:aws:ecs:us-west-2:123456789012:service/Defang-html-css-js-beta-\"}]},{\"detail\":{\"clusterArn\":[\"arn:aws:ecs:us-west-2:123456789012:cluster/Defang-html-css-js-beta-cluster\"]}}],\"detail-type\":[\"ECS Task State Change\",\"ECS Service Action\",\"ECS Deployment State Change\"],\"source\":[\"aws.ecs\"]}",
                        "forceDestroy": false,
                        "id": "html-css-js-ecs-lifecycle-rule-be7169a",
                        "isEnabled": true,
                        "name": "html-css-js-ecs-lifecycle-rule-be7169a",
                        "namePrefix": "",
                        "roleArn": "",
                        "scheduleExpression": "",
                        "state": "ENABLED",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/cluster:Cluster::cluster"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "description": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/cluster:Cluster::cluster"
                        ],
                        "eventPattern": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/cluster:Cluster::cluster"
                        ]
                    },
                    "created": "2025-11-22T11:53:24.264906055Z",
                    "modified": "2025-11-22T11:53:24.264906055Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:cloudwatch/eventTarget:EventTarget::html-css-js-ecs-event-cw-target",
                    "custom": true,
                    "id": "html-css-js-ecs-lifecycle-rule-be7169a-html-css-js-ecs-event-cw-target-77c9e47",
                    "type": "aws:cloudwatch/eventTarget:EventTarget",
                    "inputs": {
                        "__defaults": [
                            "eventBusName",
                            "forceDestroy",
                            "targetId"
                        ],
                        "arn": "arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/ecs",
                        "eventBusName": "default",
                        "forceDestroy": false,
                        "rule": "html-css-js-ecs-lifecycle-rule-be7169a",
                        "targetId": "html-css-js-ecs-event-cw-target-77c9e47"
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"1\"}",
                        "appsyncTarget": null,
                        "arn": "arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/ecs",
                        "batchTarget": null,
                        "deadLetterConfig": null,
                        "ecsTarget": null,
                        "eventBusName": "default",
                        "forceDestroy": false,
                        "httpTarget": null,
                        "id": "html-css-js-ecs-lifecycle-rule-be7169a-html-css-js-ecs-event-cw-target-77c9e47",
                        "input": "",
                        "inputPath": "",
                        "inputTransformer": null,
                        "kinesisTarget": null,
                        "redshiftTarget": null,
                        "retryPolicy": null,
                        "roleArn": "",
                        "rule": "html-css-js-ecs-lifecycle-rule-be7169a",
                        "runCommandTargets": [],
                        "sagemakerPipelineTarget": null,
                        "sqsTarget": null,
                        "targetId": "html-css-js-ecs-event-cw-target-77c9e47"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:cloudwatch/logGroup:LogGroup::ecs",
                        "urn:pulumi:beta::html-css-js::aws:cloudwatch/eventRule:EventRule::html-css-js-ecs-lifecycle-rule"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "arn": [
                            "urn:pulumi:beta::html-css-js::aws:cloudwatch/logGroup:LogGroup::ecs"
                        ],
                        "rule": [
                            "urn:pulumi:beta::html-css-js::aws:cloudwatch/eventRule:EventRule::html-css-js-ecs-lifecycle-rule"
                        ]
                    },
                    "created": "2025-11-22T11:53:24.585800866Z",
                    "modified": "2025-11-22T11:53:24.585800866Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "custom": true,
                    "id": "vpc-0a5e98797c6a42b87",
                    "type": "aws:ec2/vpc:Vpc",
                    "inputs": {
                        "__defaults": [
                            "enableDnsSupport"
                        ],
                        "cidrBlock": "10.0.0.0/16",
                        "enableDnsHostnames": true,
                        "enableDnsSupport": true,
                        "tags": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:vpc/vpc-0a5e98797c6a42b87",
                        "assignGeneratedIpv6CidrBlock": false,
                        "cidrBlock": "10.0.0.0/16",
                        "defaultNetworkAclId": "acl-03d42685e271a5d6a",
                        "defaultRouteTableId": "rtb-0711fb4df906b339a",
                        "defaultSecurityGroupId": "sg-09bffb7cee4b29b82",
                        "dhcpOptionsId": "dopt-04da239fb98474ddd",
                        "enableDnsHostnames": true,
                        "enableDnsSupport": true,
                        "enableNetworkAddressUsageMetrics": false,
                        "id": "vpc-0a5e98797c6a42b87",
                        "instanceTenancy": "default",
                        "ipv4IpamPoolId": null,
                        "ipv4NetmaskLength": null,
                        "ipv6AssociationId": "",
                        "ipv6CidrBlock": "",
                        "ipv6CidrBlockNetworkBorderGroup": "",
                        "ipv6IpamPoolId": "",
                        "ipv6NetmaskLength": 0,
                        "mainRouteTableId": "rtb-0711fb4df906b339a",
                        "ownerId": "123456789012",
                        "tags": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "cidrBlock": [],
                        "enableDnsHostnames": [],
                        "tags": []
                    },
                    "created": "2025-11-22T11:53:27.609015324Z",
                    "modified": "2025-11-22T11:53:27.609015324Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ec2/vpc.js#218,25"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                    "custom": true,
                    "id": "subnet-03120037a27c1c055",
                    "type": "aws:ec2/subnet:Subnet",
                    "inputs": {
                        "__defaults": [
                            "assignIpv6AddressOnCreation",
                            "enableDns64",
                            "enableResourceNameDnsARecordOnLaunch",
                            "enableResourceNameDnsAaaaRecordOnLaunch",
                            "ipv6Native"
                        ],
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2c",
                        "cidrBlock": "10.0.128.0/19",
                        "enableDns64": false,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "ipv6Native": false,
                        "mapPublicIpOnLaunch": false,
                        "tags": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":1200000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:subnet/subnet-03120037a27c1c055",
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2c",
                        "availabilityZoneId": "usw2-az3",
                        "cidrBlock": "10.0.128.0/19",
                        "customerOwnedIpv4Pool": "",
                        "enableDns64": false,
                        "enableLniAtDeviceIndex": 0,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "id": "subnet-03120037a27c1c055",
                        "ipv6CidrBlock": "",
                        "ipv6CidrBlockAssociationId": "",
                        "ipv6Native": false,
                        "mapCustomerOwnedIpOnLaunch": false,
                        "mapPublicIpOnLaunch": false,
                        "outpostArn": "",
                        "ownerId": "123456789012",
                        "privateDnsHostnameTypeOnLaunch": "ip-name",
                        "tags": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "availabilityZone": [],
                        "cidrBlock": [],
                        "mapPublicIpOnLaunch": [],
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:28.362407515Z",
                    "modified": "2025-11-22T11:53:28.362407515Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/subnet.js#135,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/internetGateway:InternetGateway::shared-vpc",
                    "custom": true,
                    "id": "igw-0a4f83d988bc4d0d5",
                    "type": "aws:ec2/internetGateway:InternetGateway",
                    "inputs": {
                        "__defaults": [],
                        "tags": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":1200000000000,\"delete\":1200000000000,\"update\":1200000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:internet-gateway/igw-0a4f83d988bc4d0d5",
                        "id": "igw-0a4f83d988bc4d0d5",
                        "ownerId": "123456789012",
                        "tags": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "Defang-html-css-js-beta-shared-vpc",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:28.477430395Z",
                    "modified": "2025-11-22T11:53:28.477430395Z",
                    "sourcePosition": "project:///../../snapshot/awsx/bin/ec2/vpc.js#64,21"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                    "custom": true,
                    "id": "subnet-0aaa150a8c1437f58",
                    "type": "aws:ec2/subnet:Subnet",
                    "inputs": {
                        "__defaults": [
                            "assignIpv6AddressOnCreation",
                            "enableDns64",
                            "enableResourceNameDnsARecordOnLaunch",
                            "enableResourceNameDnsAaaaRecordOnLaunch",
                            "ipv6Native"
                        ],
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2a",
                        "cidrBlock": "10.0.0.0/19",
                        "enableDns64": false,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "ipv6Native": false,
                        "mapPublicIpOnLaunch": false,
                        "tags": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":1200000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:subnet/subnet-0aaa150a8c1437f58",
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2a",
                        "availabilityZoneId": "usw2-az2",
                        "cidrBlock": "10.0.0.0/19",
                        "customerOwnedIpv4Pool": "",
                        "enableDns64": false,
                        "enableLniAtDeviceIndex": 0,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "id": "subnet-0aaa150a8c1437f58",
                        "ipv6CidrBlock": "",
                        "ipv6CidrBlockAssociationId": "",
                        "ipv6Native": false,
                        "mapCustomerOwnedIpOnLaunch": false,
                        "mapPublicIpOnLaunch": false,
                        "outpostArn": "",
                        "ownerId": "123456789012",
                        "privateDnsHostnameTypeOnLaunch": "ip-name",
                        "tags": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "availabilityZone": [],
                        "cidrBlock": [],
                        "mapPublicIpOnLaunch": [],
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:29.329633068Z",
                    "modified": "2025-11-22T11:53:29.329633068Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/subnet.js#135,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                    "custom": true,
                    "id": "subnet-078764810fa02501c",
                    "type": "aws:ec2/subnet:Subnet",
                    "inputs": {
                        "__defaults": [
                            "assignIpv6AddressOnCreation",
                            "enableDns64",
                            "enableResourceNameDnsARecordOnLaunch",
                            "enableResourceNameDnsAaaaRecordOnLaunch",
                            "ipv6Native"
                        ],
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2b",
                        "cidrBlock": "10.0.64.0/19",
                        "enableDns64": false,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "ipv6Native": false,
                        "mapPublicIpOnLaunch": false,
                        "tags": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":1200000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:subnet/subnet-078764810fa02501c",
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2b",
                        "availabilityZoneId": "usw2-az1",
                        "cidrBlock": "10.0.64.0/19",
                        "customerOwnedIpv4Pool": "",
                        "enableDns64": false,
                        "enableLniAtDeviceIndex": 0,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "id": "subnet-078764810fa02501c",
                        "ipv6CidrBlock": "",
                        "ipv6CidrBlockAssociationId": "",
                        "ipv6Native": false,
                        "mapCustomerOwnedIpOnLaunch": false,
                        "mapPublicIpOnLaunch": false,
                        "outpostArn": "",
                        "ownerId": "123456789012",
                        "privateDnsHostnameTypeOnLaunch": "ip-name",
                        "tags": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "availabilityZone": [],
                        "cidrBlock": [],
                        "mapPublicIpOnLaunch": [],
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:29.775159188Z",
                    "modified": "2025-11-22T11:53:29.775159188Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/subnet.js#135,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-3",
                    "custom": true,
                    "id": "rtb-0e4156e5d3036ce94",
                    "type": "aws:ec2/routeTable:RouteTable",
                    "inputs": {
                        "__defaults": [],
                        "tags": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:route-table/rtb-0e4156e5d3036ce94",
                        "id": "rtb-0e4156e5d3036ce94",
                        "ownerId": "123456789012",
                        "propagatingVgws": [],
                        "routes": [],
                        "tags": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-3",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:30.128385425Z",
                    "modified": "2025-11-22T11:53:30.128385425Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTable.js#172,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-1",
                    "custom": true,
                    "id": "rtb-0dbffcd6d8ea296e3",
                    "type": "aws:ec2/routeTable:RouteTable",
                    "inputs": {
                        "__defaults": [],
                        "tags": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:route-table/rtb-0dbffcd6d8ea296e3",
                        "id": "rtb-0dbffcd6d8ea296e3",
                        "ownerId": "123456789012",
                        "propagatingVgws": [],
                        "routes": [],
                        "tags": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-1",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:30.507199057Z",
                    "modified": "2025-11-22T11:53:30.507199057Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTable.js#172,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-2",
                    "custom": true,
                    "id": "rtb-0da71dd47b97a3f9b",
                    "type": "aws:ec2/routeTable:RouteTable",
                    "inputs": {
                        "__defaults": [],
                        "tags": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:route-table/rtb-0da71dd47b97a3f9b",
                        "id": "rtb-0da71dd47b97a3f9b",
                        "ownerId": "123456789012",
                        "propagatingVgws": [],
                        "routes": [],
                        "tags": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-private-2",
                            "SubnetType": "Private",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:30.943285837Z",
                    "modified": "2025-11-22T11:53:30.943285837Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTable.js#172,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/routeTableAssociation:RouteTableAssociation::shared-vpc-private-3",
                    "custom": true,
                    "id": "rtbassoc-072a5987750aa61a0",
                    "type": "aws:ec2/routeTableAssociation:RouteTableAssociation",
                    "inputs": {
                        "__defaults": [],
                        "routeTableId": "rtb-0e4156e5d3036ce94",
                        "subnetId": "subnet-03120037a27c1c055"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "gatewayId": "",
                        "id": "rtbassoc-072a5987750aa61a0",
                        "routeTableId": "rtb-0e4156e5d3036ce94",
                        "subnetId": "subnet-03120037a27c1c055"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-3",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-3"
                        ],
                        "subnetId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3"
                        ]
                    },
                    "created": "2025-11-22T11:53:31.194361608Z",
                    "modified": "2025-11-22T11:53:31.194361608Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTableAssociation.js#93,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/routeTableAssociation:RouteTableAssociation::shared-vpc-private-1",
                    "custom": true,
                    "id": "rtbassoc-010570f4555d00b74",
                    "type": "aws:ec2/routeTableAssociation:RouteTableAssociation",
                    "inputs": {
                        "__defaults": [],
                        "routeTableId": "rtb-0dbffcd6d8ea296e3",
                        "subnetId": "subnet-0aaa150a8c1437f58"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "gatewayId": "",
                        "id": "rtbassoc-010570f4555d00b74",
                        "routeTableId": "rtb-0dbffcd6d8ea296e3",
                        "subnetId": "subnet-0aaa150a8c1437f58"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-1",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-1"
                        ],
                        "subnetId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1"
                        ]
                    },
                    "created": "2025-11-22T11:53:31.611286077Z",
                    "modified": "2025-11-22T11:53:31.611286077Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTableAssociation.js#93,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/routeTableAssociation:RouteTableAssociation::shared-vpc-private-2",
                    "custom": true,
                    "id": "rtbassoc-068f905f663849d4e",
                    "type": "aws:ec2/routeTableAssociation:RouteTableAssociation",
                    "inputs": {
                        "__defaults": [],
                        "routeTableId": "rtb-0da71dd47b97a3f9b",
                        "subnetId": "subnet-078764810fa02501c"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "gatewayId": "",
                        "id": "rtbassoc-068f905f663849d4e",
                        "routeTableId": "rtb-0da71dd47b97a3f9b",
                        "subnetId": "subnet-078764810fa02501c"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-2",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-private-2"
                        ],
                        "subnetId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2"
                        ]
                    },
                    "created": "2025-11-22T11:53:31.990002984Z",
                    "modified": "2025-11-22T11:53:31.990002984Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTableAssociation.js#93,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/clusterCapacityProviders:ClusterCapacityProviders::cluster-capacity-providers",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-cluster",
                    "type": "aws:ecs/clusterCapacityProviders:ClusterCapacityProviders",
                    "inputs": {
                        "__defaults": [],
                        "capacityProviders": [
                            "FARGATE_SPOT",
                            "FARGATE"
                        ],
                        "clusterName": "Defang-html-css-js-beta-cluster",
                        "defaultCapacityProviderStrategies": [
                            {
                                "__defaults": [
                                    "base"
                                ],
                                "base": 0,
                                "capacityProvider": "FARGATE_SPOT",
                                "weight": 100
                            }
                        ]
                    },
                    "outputs": {
                        "capacityProviders": [
                            "FARGATE",
                            "FARGATE_SPOT"
                        ],
                        "clusterName": "Defang-html-css-js-beta-cluster",
                        "defaultCapacityProviderStrategies": [
                            {
                                "base": 0,
                                "capacityProvider": "FARGATE_SPOT",
                                "weight": 100
                            }
                        ],
                        "id": "Defang-html-css-js-beta-cluster"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang::defang",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/cluster:Cluster::cluster"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "capacityProviders": [],
                        "clusterName": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/cluster:Cluster::cluster"
                        ],
                        "defaultCapacityProviderStrategies": []
                    },
                    "created": "2025-11-22T11:53:34.153635478Z",
                    "modified": "2025-11-22T11:53:34.153635478Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/vpcEndpoint:VpcEndpoint::com.amazonaws.us-west-2.s3",
                    "custom": true,
                    "id": "vpce-0639f9af94ef09eaa",
                    "type": "aws:ec2/vpcEndpoint:VpcEndpoint",
                    "inputs": {
                        "__defaults": [],
                        "serviceName": "com.amazonaws.us-west-2.s3",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcEndpointType": "Gateway",
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":600000000000,\"update\":600000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:vpc-endpoint/vpce-0639f9af94ef09eaa",
                        "autoAccept": null,
                        "cidrBlocks": [
                            "3.5.76.0/22",
                            "16.12.96.0/20",
                            "16.12.112.0/21",
                            "3.5.80.0/21",
                            "18.34.48.0/20",
                            "18.34.244.0/22",
                            "16.12.88.0/21",
                            "52.92.128.0/17",
                            "52.218.128.0/17"
                        ],
                        "dnsEntries": [],
                        "dnsOptions": {
                            "dnsRecordIpType": "service-defined",
                            "privateDnsOnlyForInboundResolverEndpoint": false
                        },
                        "id": "vpce-0639f9af94ef09eaa",
                        "ipAddressType": "ipv4",
                        "networkInterfaceIds": [],
                        "ownerId": "123456789012",
                        "policy": "{\"Statement\":[{\"Action\":\"*\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2008-10-17\"}",
                        "prefixListId": "pl-68a54001",
                        "privateDnsEnabled": false,
                        "requesterManaged": false,
                        "routeTableIds": [],
                        "securityGroupIds": [],
                        "serviceName": "com.amazonaws.us-west-2.s3",
                        "state": "available",
                        "subnetConfigurations": [],
                        "subnetIds": [],
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcEndpointType": "Gateway",
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "serviceName": [],
                        "vpcEndpointType": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:34.400300198Z",
                    "modified": "2025-11-22T11:53:34.400300198Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/vpcEndpoint.js#201,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko::kaniko",
                    "custom": false,
                    "type": "defang-mvp:shared/ecs/kaniko:Kaniko",
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang::defang",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:ecs/clusterCapacityProviders:ClusterCapacityProviders::cluster-capacity-providers"
                    ],
                    "created": "2025-11-22T11:53:34.558980298Z",
                    "modified": "2025-11-22T11:53:34.558980298Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds",
                    "custom": true,
                    "id": "/Defang/html-css-js/beta/builds",
                    "type": "aws:cloudwatch/logGroup:LogGroup",
                    "inputs": {
                        "__defaults": [
                            "skipDestroy"
                        ],
                        "name": "/Defang/html-css-js/beta/builds",
                        "retentionInDays": 1,
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/builds",
                        "id": "/Defang/html-css-js/beta/builds",
                        "kmsKeyId": "",
                        "logGroupClass": "STANDARD",
                        "name": "/Defang/html-css-js/beta/builds",
                        "namePrefix": "",
                        "retentionInDays": 1,
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko::kaniko",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "retentionInDays": []
                    },
                    "created": "2025-11-22T11:53:35.721380139Z",
                    "modified": "2025-11-22T11:53:35.721380139Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                    "type": "aws:iam/role:Role",
                    "inputs": {
                        "__defaults": [
                            "forceDetachPolicies",
                            "maxSessionDuration",
                            "path"
                        ],
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Condition\":{\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:ecs:us-west-2:123456789012:*\"},\"StringEquals\":{\"aws:SourceAccount\":\"123456789012\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
                        "forceDetachPolicies": false,
                        "managedPolicyArns": [
                            "arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess",
                            "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryFullAccess"
                        ],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "path": "/",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "assumeRolePolicy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Condition\":{\"ArnLike\":{\"aws:SourceArn\":\"arn:aws:ecs:us-west-2:123456789012:*\"},\"StringEquals\":{\"aws:SourceAccount\":\"123456789012\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
                        "createDate": "2025-11-22T11:53:35Z",
                        "description": "",
                        "forceDetachPolicies": false,
                        "id": "Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "inlinePolicies": [],
                        "managedPolicyArns": [
                            "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryFullAccess",
                            "arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"
                        ],
                        "maxSessionDuration": 3600,
                        "name": "Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "namePrefix": "",
                        "path": "/",
                        "permissionsBoundary": "",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "uniqueId": "AROAVRUVVFRJFR632UAOI"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko::kaniko",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "assumeRolePolicy": [],
                        "managedPolicyArns": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:36.116626921Z",
                    "modified": "2025-11-22T11:53:36.116626921Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:codebuild/project:Project::app-image",
                    "custom": true,
                    "id": "arn:aws:codebuild:us-west-2:123456789012:project/app-image-10c2c96",
                    "type": "aws:codebuild/project:Project",
                    "inputs": {
                        "__defaults": [
                            "badgeEnabled",
                            "buildTimeout",
                            "name",
                            "projectVisibility",
                            "queuedTimeout"
                        ],
                        "artifacts": {
                            "__defaults": [
                                "encryptionDisabled",
                                "overrideArtifactName"
                            ],
                            "encryptionDisabled": false,
                            "overrideArtifactName": false,
                            "type": "NO_ARTIFACTS"
                        },
                        "badgeEnabled": false,
                        "buildTimeout": 60,
                        "cache": {
                            "__defaults": [],
                            "modes": [
                                "LOCAL_DOCKER_LAYER_CACHE",
                                "LOCAL_SOURCE_CACHE"
                            ],
                            "type": "LOCAL"
                        },
                        "description": "This AWS CodeBuild app-image builds the image and pushes to ECR.",
                        "environment": {
                            "__defaults": [],
                            "computeType": "BUILD_GENERAL1_LARGE",
                            "environmentVariables": [
                                {
                                    "__defaults": [
                                        "type"
                                    ],
                                    "name": "AWS_ACCOUNT_ID",
                                    "type": "PLAINTEXT",
                                    "value": "123456789012"
                                },
                                {
                                    "__defaults": [
                                        "type"
                                    ],
                                    "name": "AWS_DEFAULT_REGION",
                                    "type": "PLAINTEXT",
                                    "value": "us-west-2"
                                }
                            ],
                            "image": "aws/codebuild/amazonlinux-x86_64-standard:5.0",
                            "imagePullCredentialsType": "CODEBUILD",
                            "privilegedMode": true,
                            "type": "LINUX_CONTAINER"
                        },
                        "logsConfig": {
                            "__defaults": [],
                            "cloudwatchLogs": {
                                "__defaults": [
                                    "status"
                                ],
                                "groupName": "/Defang/html-css-js/beta/builds",
                                "status": "ENABLED",
                                "streamName": "app-image/app_y59beapk17nz"
                            }
                        },
                        "name": "app-image-10c2c96",
                        "projectVisibility": "PRIVATE",
                        "queuedTimeout": 480,
                        "serviceRole": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-code-build-roleus-west-2",
                        "source": {
                            "__defaults": [],
                            "buildspec": "version: 0.2\nphases:\n  pre_build:\n    commands:\n      - tar -xzf sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz -C $CODEBUILD_SRC_DIR\n      - rm sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz\n      - mkdir -p /root/.docker\n      - echo '{\"credHelpers\":{\"public.ecr.aws\":\"ecr-login\",\"123456789012.dkr.ecr.us-west-2.amazonaws.com\":\"ecr-login\"}}' > /root/.docker/config.json\n      - mkdir -p /etc/docker/ && echo '{\"registry-mirrors\":[\"http://localhost:5000\"]}' > /etc/docker/daemon.json\n      - |-\n        echo '\n        [registry.\"docker.io\"]\n          mirrors = [\n            \"http://localhost:5000\"\n          ]\n        ' > /tmp/buildkitd.toml\n      - kill -HUP $(pidof dockerd)\n      - |-\n        cat > /tmp/nginx.conf.tmpl << EOF\n        events {}\n        http {\n            server {\n\n                set \\$token \"\";\n        __TOKEN__\n\n                listen 80;\n                location = /v2/ {\n                    proxy_pass https://public.ecr.aws/v2/;\n                    proxy_intercept_errors on;\n                    proxy_set_header Authorization \"Bearer \\$token\";\n                    proxy_ssl_server_name on;\n\n                    error_page 404 = @fallback;\n                }\n\n                location ~ ^/v2/(.+) {\n                    # Capture the rest of the path\n                    set \\$rest \\$1;\n\n                    # Build upstream path: /v2/docker/<rest>\n                    proxy_pass https://public.ecr.aws/v2/docker/\\$rest;\n                    proxy_intercept_errors on;\n                    proxy_set_header Authorization \"Bearer \\$token\";\n                    proxy_ssl_server_name on;\n\n                    error_page 404 = @fallback;\n                }\n\n                location @fallback {\n                    proxy_pass https://registry-1.docker.io;\n                    proxy_ssl_server_name on;\n                }\n            }\n        }\n\n        EOF\n      - TOKEN_BLOCK=$(echo \"https://public.ecr.aws\" | docker-credential-ecr-login get | jq -j '\"\\(.Username):\\(.Secret)\"' | base64 -w 1024 | awk '{ print \"set $token \\\"${token}\" $0 \"\\\";\" }')\n      - awk -v token_block=\"$TOKEN_BLOCK\" '{ if ($0 ~ /__TOKEN__/) { print token_block } else { print } }' /tmp/nginx.conf.tmpl > /tmp/nginx.conf\n      - docker run -d -p 5000:80 --restart=always --name dockerhub-ecr-mirror -v /tmp/nginx.conf:/etc/nginx/nginx.conf:ro public.ecr.aws/nginx/nginx:stable-alpine\n      - sleep 3\n      - docker buildx create --use --driver=docker-container --buildkitd-config=/tmp/buildkitd.toml --driver-opt network=host --use --platform linux/amd64\n  build:\n    commands:\n      - echo Building the Docker image...\n      - docker buildx build -t 123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:app-image-ca933ed5-x86_64 -f Dockerfile --push --cache-from=type=registry,ref=123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:defang-cache --cache-to=type=registry,image-manifest=true,oci-mediatypes=true,mode=max,ref=123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:defang-cache --platform linux/amd64  ${CODEBUILD_SRC_DIR}\n",
                            "location": "defang-cd-bucket-cybpbzz8hzm7/uploads/sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                            "type": "S3"
                        },
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:codebuild:us-west-2:123456789012:project/app-image-10c2c96",
                        "artifacts": {
                            "artifactIdentifier": "",
                            "bucketOwnerAccess": "",
                            "encryptionDisabled": false,
                            "location": "",
                            "name": "",
                            "namespaceType": "",
                            "overrideArtifactName": false,
                            "packaging": "",
                            "path": "",
                            "type": "NO_ARTIFACTS"
                        },
                        "badgeEnabled": false,
                        "badgeUrl": "",
                        "buildBatchConfig": null,
                        "buildTimeout": 60,
                        "cache": {
                            "location": "",
                            "modes": [
                                "LOCAL_DOCKER_LAYER_CACHE",
                                "LOCAL_SOURCE_CACHE"
                            ],
                            "type": "LOCAL"
                        },
                        "concurrentBuildLimit": 0,
                        "description": "This AWS CodeBuild app-image builds the image and pushes to ECR.",
                        "encryptionKey": "arn:aws:kms:us-west-2:123456789012:alias/aws/s3",
                        "environment": {
                            "certificate": "",
                            "computeType": "BUILD_GENERAL1_LARGE",
                            "environmentVariables": [
                                {
                                    "name": "AWS_ACCOUNT_ID",
                                    "type": "PLAINTEXT",
                                    "value": "123456789012"
                                },
                                {
                                    "name": "AWS_DEFAULT_REGION",
                                    "type": "PLAINTEXT",
                                    "value": "us-west-2"
                                }
                            ],
                            "fleet": null,
                            "image": "aws/codebuild/amazonlinux-x86_64-standard:5.0",
                            "imagePullCredentialsType": "CODEBUILD",
                            "privilegedMode": true,
                            "registryCredential": null,
                            "type": "LINUX_CONTAINER"
                        },
                        "fileSystemLocations": [],
                        "id": "arn:aws:codebuild:us-west-2:123456789012:project/app-image-10c2c96",
                        "logsConfig": {
                            "cloudwatchLogs": {
                                "groupName": "/Defang/html-css-js/beta/builds",
                                "status": "ENABLED",
                                "streamName": "app-image/app_y59beapk17nz"
                            },
                            "s3Logs": {
                                "bucketOwnerAccess": "",
                                "encryptionDisabled": false,
                                "location": "",
                                "status": "DISABLED"
                            }
                        },
                        "name": "app-image-10c2c96",
                        "projectVisibility": "PRIVATE",
                        "publicProjectAlias": "",
                        "queuedTimeout": 480,
                        "resourceAccessRole": "",
                        "secondaryArtifacts": [],
                        "secondarySourceVersions": [],
                        "secondarySources": [],
                        "serviceRole": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-code-build-roleus-west-2",
                        "source": {
                            "buildStatusConfig": null,
                            "buildspec": "version: 0.2\nphases:\n  pre_build:\n    commands:\n      - tar -xzf sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz -C $CODEBUILD_SRC_DIR\n      - rm sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz\n      - mkdir -p /root/.docker\n      - echo '{\"credHelpers\":{\"public.ecr.aws\":\"ecr-login\",\"123456789012.dkr.ecr.us-west-2.amazonaws.com\":\"ecr-login\"}}' > /root/.docker/config.json\n      - mkdir -p /etc/docker/ && echo '{\"registry-mirrors\":[\"http://localhost:5000\"]}' > /etc/docker/daemon.json\n      - |-\n        echo '\n        [registry.\"docker.io\"]\n          mirrors = [\n            \"http://localhost:5000\"\n          ]\n        ' > /tmp/buildkitd.toml\n      - kill -HUP $(pidof dockerd)\n      - |-\n        cat > /tmp/nginx.conf.tmpl << EOF\n        events {}\n        http {\n            server {\n\n                set \\$token \"\";\n        __TOKEN__\n\n                listen 80;\n                location = /v2/ {\n                    proxy_pass https://public.ecr.aws/v2/;\n                    proxy_intercept_errors on;\n                    proxy_set_header Authorization \"Bearer \\$token\";\n                    proxy_ssl_server_name on;\n\n                    error_page 404 = @fallback;\n                }\n\n                location ~ ^/v2/(.+) {\n                    # Capture the rest of the path\n                    set \\$rest \\$1;\n\n                    # Build upstream path: /v2/docker/<rest>\n                    proxy_pass https://public.ecr.aws/v2/docker/\\$rest;\n                    proxy_intercept_errors on;\n                    proxy_set_header Authorization \"Bearer \\$token\";\n                    proxy_ssl_server_name on;\n\n                    error_page 404 = @fallback;\n                }\n\n                location @fallback {\n                    proxy_pass https://registry-1.docker.io;\n                    proxy_ssl_server_name on;\n                }\n            }\n        }\n\n        EOF\n      - TOKEN_BLOCK=$(echo \"https://public.ecr.aws\" | docker-credential-ecr-login get | jq -j '\"\\(.Username):\\(.Secret)\"' | base64 -w 1024 | awk '{ print \"set $token \\\"${token}\" $0 \"\\\";\" }')\n      - awk -v token_block=\"$TOKEN_BLOCK\" '{ if ($0 ~ /__TOKEN__/) { print token_block } else { print } }' /tmp/nginx.conf.tmpl > /tmp/nginx.conf\n      - docker run -d -p 5000:80 --restart=always --name dockerhub-ecr-mirror -v /tmp/nginx.conf:/etc/nginx/nginx.conf:ro public.ecr.aws/nginx/nginx:stable-alpine\n      - sleep 3\n      - docker buildx create --use --driver=docker-container --buildkitd-config=/tmp/buildkitd.toml --driver-opt network=host --use --platform linux/amd64\n  build:\n    commands:\n      - echo Building the Docker image...\n      - docker buildx build -t 123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:app-image-ca933ed5-x86_64 -f Dockerfile --push --cache-from=type=registry,ref=123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:defang-cache --cache-to=type=registry,image-manifest=true,oci-mediatypes=true,mode=max,ref=123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:defang-cache --platform linux/amd64  ${CODEBUILD_SRC_DIR}\n",
                            "gitCloneDepth": 0,
                            "gitSubmodulesConfig": null,
                            "insecureSsl": false,
                            "location": "defang-cd-bucket-cybpbzz8hzm7/uploads/sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                            "reportBuildStatus": false,
                            "type": "S3"
                        },
                        "sourceVersion": "",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcConfig": null
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds",
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role",
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "artifacts": [],
                        "cache": [],
                        "description": [],
                        "environment": [],
                        "logsConfig": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds"
                        ],
                        "serviceRole": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role"
                        ],
                        "source": [
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build"
                        ]
                    },
                    "created": "2025-11-22T11:53:36.456488276Z",
                    "modified": "2025-11-22T11:53:36.456488276Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::code-build-role-codebuildPolicy",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-code-build-roleus-west-2:codebuildPolicy",
                    "type": "aws:iam/rolePolicy:RolePolicy",
                    "inputs": {
                        "__defaults": [],
                        "name": "codebuildPolicy",
                        "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/builds:*\"],\"Sid\":\"AllowCloudWatchLogs\"},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"],\"Sid\":\"AllowS3\"},{\"Action\":[\"ecr:GetAuthorizationToken\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"],\"Sid\":\"AllowECRLogin\"},{\"Action\":[\"ecr:BatchCheckLayerAvailability\",\"ecr:BatchGetImage\",\"ecr:CompleteLayerUpload\",\"ecr:GetDownloadUrlForLayer\",\"ecr:InitiateLayerUpload\",\"ecr:PutImage\",\"ecr:UploadLayerPart\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ecr:us-west-2:123456789012:repository/html-css-js/kaniko-build\"],\"Sid\":\"AllowECR\"},{\"Action\":[\"ecr-public:GetAuthorizationToken\",\"sts:GetServiceBearerToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowECRPublicLogin\"}],\"Version\":\"2012-10-17\"}",
                        "role": "Defang-html-css-js-beta-code-build-roleus-west-2"
                    },
                    "outputs": {
                        "id": "Defang-html-css-js-beta-code-build-roleus-west-2:codebuildPolicy",
                        "name": "codebuildPolicy",
                        "namePrefix": "",
                        "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/builds:*\"],\"Sid\":\"AllowCloudWatchLogs\"},{\"Action\":[\"s3:PutObject\",\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"],\"Sid\":\"AllowS3\"},{\"Action\":[\"ecr:GetAuthorizationToken\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"],\"Sid\":\"AllowECRLogin\"},{\"Action\":[\"ecr:BatchCheckLayerAvailability\",\"ecr:BatchGetImage\",\"ecr:CompleteLayerUpload\",\"ecr:GetDownloadUrlForLayer\",\"ecr:InitiateLayerUpload\",\"ecr:PutImage\",\"ecr:UploadLayerPart\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:ecr:us-west-2:123456789012:repository/html-css-js/kaniko-build\"],\"Sid\":\"AllowECR\"},{\"Action\":[\"ecr-public:GetAuthorizationToken\",\"sts:GetServiceBearerToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowECRPublicLogin\"}]}",
                        "role": "Defang-html-css-js-beta-code-build-roleus-west-2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build",
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "policy": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build"
                        ],
                        "role": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:36.676796984Z",
                    "modified": "2025-11-22T11:53:36.676796984Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::pulumi:providers:pulumi-nodejs::default",
                    "custom": true,
                    "id": "eaa7161b-69c4-44e5-bac7-fee22b4ee96c",
                    "type": "pulumi:providers:pulumi-nodejs",
                    "inputs": {
                        "aws:defaultTags": "{\"tags\":{\"defang:org\":\"testuser\",\"defang:project\":\"html-css-js\",\"defang:stack\":\"beta\",\"defang:version\":\"0.6.0-1189-gb86d4117\"}}",
                        "aws:region": "us-west-2",
                        "html-css-js:allowManaged": "true",
                        "html-css-js:createApexDnsRecord": "true",
                        "html-css-js:delegationSetId": "N008797326QMCYM1BN6SW",
                        "html-css-js:deploymentMode": "development",
                        "html-css-js:domain": "html-css-js.testuser.defang.app",
                        "html-css-js:kanikoBuildRepo": "html-css-js/kaniko-build",
                        "html-css-js:org": "testuser",
                        "html-css-js:prefix": "Defang",
                        "html-css-js:privateDomain": "html-css-js.internal",
                        "html-css-js:serviceDomain": "html-css-js.testuser.defang.app",
                        "html-css-js:skipLoki": "true",
                        "html-css-js:skipNetworkAcl": "true"
                    },
                    "outputs": {
                        "aws:defaultTags": "{\"tags\":{\"defang:org\":\"testuser\",\"defang:project\":\"html-css-js\",\"defang:stack\":\"beta\",\"defang:version\":\"0.6.0-1189-gb86d4117\"}}",
                        "aws:region": "us-west-2",
                        "html-css-js:allowManaged": "true",
                        "html-css-js:createApexDnsRecord": "true",
                        "html-css-js:delegationSetId": "N008797326QMCYM1BN6SW",
                        "html-css-js:deploymentMode": "development",
                        "html-css-js:domain": "html-css-js.testuser.defang.app",
                        "html-css-js:kanikoBuildRepo": "html-css-js/kaniko-build",
                        "html-css-js:org": "testuser",
                        "html-css-js:prefix": "Defang",
                        "html-css-js:privateDomain": "html-css-js.internal",
                        "html-css-js:serviceDomain": "html-css-js.testuser.defang.app",
                        "html-css-js:skipLoki": "true",
                        "html-css-js:skipNetworkAcl": "true"
                    },
                    "created": "2025-11-22T11:53:37.501879347Z",
                    "modified": "2025-11-22T11:53:37.501879347Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/rolePolicy:RolePolicy::kaniko-task-role-AllowCloudWatchLogs",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-kaniko-task-roleus-west-2:AllowCloudWatchLogs",
                    "type": "aws:iam/rolePolicy:RolePolicy",
                    "inputs": {
                        "__defaults": [],
                        "name": "AllowCloudWatchLogs",
                        "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/builds:*\"]}],\"Version\":\"2012-10-17\"}",
                        "role": "Defang-html-css-js-beta-kaniko-task-roleus-west-2"
                    },
                    "outputs": {
                        "id": "Defang-html-css-js-beta-kaniko-task-roleus-west-2:AllowCloudWatchLogs",
                        "name": "AllowCloudWatchLogs",
                        "namePrefix": "",
                        "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:logs:us-west-2:123456789012:log-group:/Defang/html-css-js/beta/builds:*\"]}]}",
                        "role": "Defang-html-css-js-beta-kaniko-task-roleus-west-2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko::kaniko",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "name": [],
                        "policy": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds"
                        ],
                        "role": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:37.580159278Z",
                    "modified": "2025-11-22T11:53:37.580159278Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:route53/zone:Zone::html-css-js.testuser.defang.app",
                    "custom": true,
                    "id": "Z05786792JXLN6MCLB9JS",
                    "type": "aws:route53/zone:Zone",
                    "inputs": {
                        "__defaults": [],
                        "comment": "Managed by Defang",
                        "delegationSetId": "N008797326QMCYM1BN6SW",
                        "forceDestroy": true,
                        "name": "html-css-js.testuser.defang.app",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        }
                    },
                    "outputs": {
                        "arn": "arn:aws:route53:::hostedzone/Z05786792JXLN6MCLB9JS",
                        "comment": "Managed by Defang",
                        "delegationSetId": "N008797326QMCYM1BN6SW",
                        "forceDestroy": true,
                        "id": "Z05786792JXLN6MCLB9JS",
                        "name": "html-css-js.testuser.defang.app",
                        "nameServers": [
                            "ns-1224.awsdns-25.org",
                            "ns-1868.awsdns-41.co.uk",
                            "ns-40.awsdns-05.com",
                            "ns-649.awsdns-17.net"
                        ],
                        "primaryNameServer": "ns-649.awsdns-17.net",
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcs": [],
                        "zoneId": "Z05786792JXLN6MCLB9JS"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "comment": [],
                        "delegationSetId": [],
                        "forceDestroy": [],
                        "name": []
                    },
                    "created": "2025-11-22T11:53:37.996640651Z",
                    "modified": "2025-11-22T11:53:37.996640651Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:iam/rolePoliciesExclusive:RolePoliciesExclusive::code-build-role",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-code-build-roleus-west-2",
                    "type": "aws:iam/rolePoliciesExclusive:RolePoliciesExclusive",
                    "inputs": {
                        "policyNames": [
                            "codebuildPolicy"
                        ],
                        "roleName": "Defang-html-css-js-beta-code-build-roleus-west-2"
                    },
                    "outputs": {
                        "policyNames": [
                            "codebuildPolicy"
                        ],
                        "roleName": "Defang-html-css-js-beta-code-build-roleus-west-2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role",
                        "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::code-build-role-codebuildPolicy"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "policyNames": [
                            "urn:pulumi:beta::html-css-js::aws:iam/rolePolicy:RolePolicy::code-build-role-codebuildPolicy"
                        ],
                        "roleName": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:38.281327569Z",
                    "modified": "2025-11-22T11:53:38.281327569Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/rolePoliciesExclusive:RolePoliciesExclusive::kaniko-task-role",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                    "type": "aws:iam/rolePoliciesExclusive:RolePoliciesExclusive",
                    "inputs": {
                        "policyNames": [
                            "AllowCloudWatchLogs"
                        ],
                        "roleName": "Defang-html-css-js-beta-kaniko-task-roleus-west-2"
                    },
                    "outputs": {
                        "policyNames": [
                            "AllowCloudWatchLogs"
                        ],
                        "roleName": "Defang-html-css-js-beta-kaniko-task-roleus-west-2"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko::kaniko",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/rolePolicy:RolePolicy::kaniko-task-role-AllowCloudWatchLogs",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "policyNames": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/rolePolicy:RolePolicy::kaniko-task-role-AllowCloudWatchLogs"
                        ],
                        "roleName": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:39.098661749Z",
                    "modified": "2025-11-22T11:53:39.098661749Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                    "custom": true,
                    "id": "subnet-0bd5ece4349f2954e",
                    "type": "aws:ec2/subnet:Subnet",
                    "inputs": {
                        "__defaults": [
                            "assignIpv6AddressOnCreation",
                            "enableDns64",
                            "enableResourceNameDnsARecordOnLaunch",
                            "enableResourceNameDnsAaaaRecordOnLaunch",
                            "ipv6Native"
                        ],
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2a",
                        "cidrBlock": "10.0.32.0/20",
                        "enableDns64": false,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "ipv6Native": false,
                        "mapPublicIpOnLaunch": true,
                        "tags": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":1200000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:subnet/subnet-0bd5ece4349f2954e",
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2a",
                        "availabilityZoneId": "usw2-az2",
                        "cidrBlock": "10.0.32.0/20",
                        "customerOwnedIpv4Pool": "",
                        "enableDns64": false,
                        "enableLniAtDeviceIndex": 0,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "id": "subnet-0bd5ece4349f2954e",
                        "ipv6CidrBlock": "",
                        "ipv6CidrBlockAssociationId": "",
                        "ipv6Native": false,
                        "mapCustomerOwnedIpOnLaunch": false,
                        "mapPublicIpOnLaunch": true,
                        "outpostArn": "",
                        "ownerId": "123456789012",
                        "privateDnsHostnameTypeOnLaunch": "ip-name",
                        "tags": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "availabilityZone": [],
                        "cidrBlock": [],
                        "mapPublicIpOnLaunch": [],
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:39.399676868Z",
                    "modified": "2025-11-22T11:53:39.399676868Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/subnet.js#135,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                    "custom": true,
                    "id": "subnet-05837a20eb688bf3c",
                    "type": "aws:ec2/subnet:Subnet",
                    "inputs": {
                        "__defaults": [
                            "assignIpv6AddressOnCreation",
                            "enableDns64",
                            "enableResourceNameDnsARecordOnLaunch",
                            "enableResourceNameDnsAaaaRecordOnLaunch",
                            "ipv6Native"
                        ],
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2b",
                        "cidrBlock": "10.0.96.0/20",
                        "enableDns64": false,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "ipv6Native": false,
                        "mapPublicIpOnLaunch": true,
                        "tags": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":1200000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:subnet/subnet-05837a20eb688bf3c",
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2b",
                        "availabilityZoneId": "usw2-az1",
                        "cidrBlock": "10.0.96.0/20",
                        "customerOwnedIpv4Pool": "",
                        "enableDns64": false,
                        "enableLniAtDeviceIndex": 0,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "id": "subnet-05837a20eb688bf3c",
                        "ipv6CidrBlock": "",
                        "ipv6CidrBlockAssociationId": "",
                        "ipv6Native": false,
                        "mapCustomerOwnedIpOnLaunch": false,
                        "mapPublicIpOnLaunch": true,
                        "outpostArn": "",
                        "ownerId": "123456789012",
                        "privateDnsHostnameTypeOnLaunch": "ip-name",
                        "tags": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "availabilityZone": [],
                        "cidrBlock": [],
                        "mapPublicIpOnLaunch": [],
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:39.679340178Z",
                    "modified": "2025-11-22T11:53:39.679340178Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/subnet.js#135,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:ecs/taskDefinition:TaskDefinition::kanikoTaskDefArm64",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-kanikoArm64",
                    "type": "aws:ecs/taskDefinition:TaskDefinition",
                    "inputs": {
                        "__defaults": [
                            "skipDestroy",
                            "trackLatest"
                        ],
                        "containerDefinitions": "[\n  {\n    \"user\": \"0\",\n    \"name\": \"kaniko\",\n    \"image\": \"gcr.io/kaniko-project/executor:v1.23.2\",\n    \"essential\": true,\n    \"dependsOn\": [\n      {\n        \"containerName\": \"log_router\",\n        \"condition\": \"START\"\n      }\n    ],\n    \"logConfiguration\": {\n      \"logDriver\": \"awsfirelens\"\n    },\n    \"environment\": [],\n    \"mountPoints\": [],\n    \"portMappings\": [],\n    \"secrets\": [],\n    \"systemControls\": [],\n    \"volumesFrom\": []\n  },\n  {\n    \"user\": \"0\",\n    \"name\": \"log_router\",\n    \"image\": \"123456789012.dkr.ecr.us-west-2.amazonaws.com/ecr-public-htm59b851/aws-observability/aws-for-fluent-bit:2.31.12.20231011\",\n    \"essential\": true,\n    \"firelensConfiguration\": {\n      \"type\": \"fluentbit\",\n      \"options\": {\n        \"enable-ecs-log-metadata\": \"true\"\n      }\n    },\n    \"command\": [\n      \"/bin/sh\",\n      \"-c\",\n      \"exec /fluent-bit/bin/fluent-bit  -o cloudwatch_logs -m '*' -p region=us-west-2 -p log_group_name=\\\"$LOG_GROUP_NAME\\\" -p log_stream_prefix=\\\"$SERVICE_NAME/\\\" -F modify -p \\\"Add=host ${HOSTNAME%%.*}\\\" -p \\\"Add=service $SERVICE_NAME\\\" -p \\\"Add=etag $SERVICE_VERSION\\\" -m '*'  -c /fluent-bit/etc/fluent-bit.conf -v\"\n    ],\n    \"environment\": [\n      {\n        \"name\": \"JOB\",\n        \"value\": \"build\"\n      },\n      {\n        \"name\": \"LOG_GROUP_NAME\",\n        \"value\": \"/Defang/html-css-js/beta/builds\"\n      },\n      {\n        \"name\": \"SERVICE_NAME\",\n        \"value\": \"kaniko\"\n      },\n      {\n        \"name\": \"SERVICE_VERSION\",\n        \"value\": \"v1.23.2-OVERRIDE-ME\"\n      },\n      {\n        \"name\": \"TENANT_ID\",\n        \"value\": \"defang\"\n      },\n      {\n        \"name\": \"TENANT_UUID\",\n        \"value\": \"defang\"\n      }\n    ],\n    \"mountPoints\": [],\n    \"portMappings\": [],\n    \"secrets\": [],\n    \"systemControls\": [],\n    \"volumesFrom\": []\n  }\n]",
                        "cpu": "2048",
                        "executionRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "family": "Defang-html-css-js-beta-kanikoArm64",
                        "memory": "16384",
                        "networkMode": "awsvpc",
                        "requiresCompatibilities": [
                            "FARGATE"
                        ],
                        "runtimePlatform": {
                            "__defaults": [],
                            "cpuArchitecture": "ARM64",
                            "operatingSystemFamily": "LINUX"
                        },
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "taskRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "trackLatest": false
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ecs:us-west-2:123456789012:task-definition/Defang-html-css-js-beta-kanikoArm64:46",
                        "arnWithoutRevision": "arn:aws:ecs:us-west-2:123456789012:task-definition/Defang-html-css-js-beta-kanikoArm64",
                        "containerDefinitions": "[{\"dependsOn\":[{\"condition\":\"START\",\"containerName\":\"log_router\"}],\"environment\":[],\"essential\":true,\"image\":\"gcr.io/kaniko-project/executor:v1.23.2\",\"logConfiguration\":{\"logDriver\":\"awsfirelens\"},\"mountPoints\":[],\"name\":\"kaniko\",\"portMappings\":[],\"secrets\":[],\"systemControls\":[],\"user\":\"0\",\"volumesFrom\":[]},{\"command\":[\"/bin/sh\",\"-c\",\"exec /fluent-bit/bin/fluent-bit  -o cloudwatch_logs -m '*' -p region=us-west-2 -p log_group_name=\\\"$LOG_GROUP_NAME\\\" -p log_stream_prefix=\\\"$SERVICE_NAME/\\\" -F modify -p \\\"Add=host ${HOSTNAME%%.*}\\\" -p \\\"Add=service $SERVICE_NAME\\\" -p \\\"Add=etag $SERVICE_VERSION\\\" -m '*'  -c /fluent-bit/etc/fluent-bit.conf -v\"],\"environment\":[{\"name\":\"JOB\",\"value\":\"build\"},{\"name\":\"LOG_GROUP_NAME\",\"value\":\"/Defang/html-css-js/beta/builds\"},{\"name\":\"SERVICE_NAME\",\"value\":\"kaniko\"},{\"name\":\"SERVICE_VERSION\",\"value\":\"v1.23.2-OVERRIDE-ME\"},{\"name\":\"TENANT_ID\",\"value\":\"defang\"},{\"name\":\"TENANT_UUID\",\"value\":\"defang\"}],\"essential\":true,\"firelensConfiguration\":{\"options\":{\"enable-ecs-log-metadata\":\"true\"},\"type\":\"fluentbit\"},\"image\":\"123456789012.dkr.ecr.us-west-2.amazonaws.com/ecr-public-htm59b851/aws-observability/aws-for-fluent-bit:2.31.12.20231011\",\"mountPoints\":[],\"name\":\"log_router\",\"portMappings\":[],\"secrets\":[],\"systemControls\":[],\"user\":\"0\",\"volumesFrom\":[]}]",
                        "cpu": "2048",
                        "ephemeralStorage": null,
                        "executionRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "family": "Defang-html-css-js-beta-kanikoArm64",
                        "id": "Defang-html-css-js-beta-kanikoArm64",
                        "inferenceAccelerators": [],
                        "ipcMode": "",
                        "memory": "16384",
                        "networkMode": "awsvpc",
                        "pidMode": "",
                        "placementConstraints": [],
                        "proxyConfiguration": null,
                        "requiresCompatibilities": [
                            "FARGATE"
                        ],
                        "revision": 46,
                        "runtimePlatform": {
                            "cpuArchitecture": "ARM64",
                            "operatingSystemFamily": "LINUX"
                        },
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "taskRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "trackLatest": false,
                        "volumes": []
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko::kaniko",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/rolePoliciesExclusive:RolePoliciesExclusive::kaniko-task-role",
                        "urn:pulumi:beta::html-css-js::aws:ecr/pullThroughCacheRule:PullThroughCacheRule::ecr-public",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds",
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "containerDefinitions": [
                            "urn:pulumi:beta::html-css-js::aws:ecr/pullThroughCacheRule:PullThroughCacheRule::ecr-public",
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds"
                        ],
                        "cpu": [],
                        "executionRoleArn": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                        ],
                        "family": [],
                        "memory": [],
                        "networkMode": [],
                        "requiresCompatibilities": [],
                        "runtimePlatform": [],
                        "taskRoleArn": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:40.113774791Z",
                    "modified": "2025-11-22T11:53:40.113774791Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                    "custom": true,
                    "id": "subnet-007b405cfe3fdb5a3",
                    "type": "aws:ec2/subnet:Subnet",
                    "inputs": {
                        "__defaults": [
                            "assignIpv6AddressOnCreation",
                            "enableDns64",
                            "enableResourceNameDnsARecordOnLaunch",
                            "enableResourceNameDnsAaaaRecordOnLaunch",
                            "ipv6Native"
                        ],
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2c",
                        "cidrBlock": "10.0.160.0/20",
                        "enableDns64": false,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "ipv6Native": false,
                        "mapPublicIpOnLaunch": true,
                        "tags": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":1200000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:subnet/subnet-007b405cfe3fdb5a3",
                        "assignIpv6AddressOnCreation": false,
                        "availabilityZone": "us-west-2c",
                        "availabilityZoneId": "usw2-az3",
                        "cidrBlock": "10.0.160.0/20",
                        "customerOwnedIpv4Pool": "",
                        "enableDns64": false,
                        "enableLniAtDeviceIndex": 0,
                        "enableResourceNameDnsARecordOnLaunch": false,
                        "enableResourceNameDnsAaaaRecordOnLaunch": false,
                        "id": "subnet-007b405cfe3fdb5a3",
                        "ipv6CidrBlock": "",
                        "ipv6CidrBlockAssociationId": "",
                        "ipv6Native": false,
                        "mapCustomerOwnedIpOnLaunch": false,
                        "mapPublicIpOnLaunch": true,
                        "outpostArn": "",
                        "ownerId": "123456789012",
                        "privateDnsHostnameTypeOnLaunch": "ip-name",
                        "tags": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "availabilityZone": [],
                        "cidrBlock": [],
                        "mapPublicIpOnLaunch": [],
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:40.120518666Z",
                    "modified": "2025-11-22T11:53:40.120518666Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/subnet.js#135,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:ecs/taskDefinition:TaskDefinition::kanikoTaskDefAmd64",
                    "custom": true,
                    "id": "Defang-html-css-js-beta-kanikoAmd64",
                    "type": "aws:ecs/taskDefinition:TaskDefinition",
                    "inputs": {
                        "__defaults": [
                            "skipDestroy",
                            "trackLatest"
                        ],
                        "containerDefinitions": "[\n  {\n    \"user\": \"0\",\n    \"name\": \"kaniko\",\n    \"image\": \"gcr.io/kaniko-project/executor:v1.23.2\",\n    \"essential\": true,\n    \"dependsOn\": [\n      {\n        \"containerName\": \"log_router\",\n        \"condition\": \"START\"\n      }\n    ],\n    \"logConfiguration\": {\n      \"logDriver\": \"awsfirelens\"\n    },\n    \"environment\": [],\n    \"mountPoints\": [],\n    \"portMappings\": [],\n    \"secrets\": [],\n    \"systemControls\": [],\n    \"volumesFrom\": []\n  },\n  {\n    \"user\": \"0\",\n    \"name\": \"log_router\",\n    \"image\": \"123456789012.dkr.ecr.us-west-2.amazonaws.com/ecr-public-htm59b851/aws-observability/aws-for-fluent-bit:2.31.12.20231011\",\n    \"essential\": true,\n    \"firelensConfiguration\": {\n      \"type\": \"fluentbit\",\n      \"options\": {\n        \"enable-ecs-log-metadata\": \"true\"\n      }\n    },\n    \"command\": [\n      \"/bin/sh\",\n      \"-c\",\n      \"exec /fluent-bit/bin/fluent-bit  -o cloudwatch_logs -m '*' -p region=us-west-2 -p log_group_name=\\\"$LOG_GROUP_NAME\\\" -p log_stream_prefix=\\\"$SERVICE_NAME/\\\" -F modify -p \\\"Add=host ${HOSTNAME%%.*}\\\" -p \\\"Add=service $SERVICE_NAME\\\" -p \\\"Add=etag $SERVICE_VERSION\\\" -m '*'  -c /fluent-bit/etc/fluent-bit.conf -v\"\n    ],\n    \"environment\": [\n      {\n        \"name\": \"JOB\",\n        \"value\": \"build\"\n      },\n      {\n        \"name\": \"LOG_GROUP_NAME\",\n        \"value\": \"/Defang/html-css-js/beta/builds\"\n      },\n      {\n        \"name\": \"SERVICE_NAME\",\n        \"value\": \"kaniko\"\n      },\n      {\n        \"name\": \"SERVICE_VERSION\",\n        \"value\": \"v1.23.2-OVERRIDE-ME\"\n      },\n      {\n        \"name\": \"TENANT_ID\",\n        \"value\": \"defang\"\n      },\n      {\n        \"name\": \"TENANT_UUID\",\n        \"value\": \"defang\"\n      }\n    ],\n    \"mountPoints\": [],\n    \"portMappings\": [],\n    \"secrets\": [],\n    \"systemControls\": [],\n    \"volumesFrom\": []\n  }\n]",
                        "cpu": "2048",
                        "executionRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "family": "Defang-html-css-js-beta-kanikoAmd64",
                        "memory": "16384",
                        "networkMode": "awsvpc",
                        "requiresCompatibilities": [
                            "FARGATE"
                        ],
                        "runtimePlatform": {
                            "__defaults": [],
                            "cpuArchitecture": "X86_64",
                            "operatingSystemFamily": "LINUX"
                        },
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "taskRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "trackLatest": false
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ecs:us-west-2:123456789012:task-definition/Defang-html-css-js-beta-kanikoAmd64:46",
                        "arnWithoutRevision": "arn:aws:ecs:us-west-2:123456789012:task-definition/Defang-html-css-js-beta-kanikoAmd64",
                        "containerDefinitions": "[{\"dependsOn\":[{\"condition\":\"START\",\"containerName\":\"log_router\"}],\"environment\":[],\"essential\":true,\"image\":\"gcr.io/kaniko-project/executor:v1.23.2\",\"logConfiguration\":{\"logDriver\":\"awsfirelens\"},\"mountPoints\":[],\"name\":\"kaniko\",\"portMappings\":[],\"secrets\":[],\"systemControls\":[],\"user\":\"0\",\"volumesFrom\":[]},{\"command\":[\"/bin/sh\",\"-c\",\"exec /fluent-bit/bin/fluent-bit  -o cloudwatch_logs -m '*' -p region=us-west-2 -p log_group_name=\\\"$LOG_GROUP_NAME\\\" -p log_stream_prefix=\\\"$SERVICE_NAME/\\\" -F modify -p \\\"Add=host ${HOSTNAME%%.*}\\\" -p \\\"Add=service $SERVICE_NAME\\\" -p \\\"Add=etag $SERVICE_VERSION\\\" -m '*'  -c /fluent-bit/etc/fluent-bit.conf -v\"],\"environment\":[{\"name\":\"JOB\",\"value\":\"build\"},{\"name\":\"LOG_GROUP_NAME\",\"value\":\"/Defang/html-css-js/beta/builds\"},{\"name\":\"SERVICE_NAME\",\"value\":\"kaniko\"},{\"name\":\"SERVICE_VERSION\",\"value\":\"v1.23.2-OVERRIDE-ME\"},{\"name\":\"TENANT_ID\",\"value\":\"defang\"},{\"name\":\"TENANT_UUID\",\"value\":\"defang\"}],\"essential\":true,\"firelensConfiguration\":{\"options\":{\"enable-ecs-log-metadata\":\"true\"},\"type\":\"fluentbit\"},\"image\":\"123456789012.dkr.ecr.us-west-2.amazonaws.com/ecr-public-htm59b851/aws-observability/aws-for-fluent-bit:2.31.12.20231011\",\"mountPoints\":[],\"name\":\"log_router\",\"portMappings\":[],\"secrets\":[],\"systemControls\":[],\"user\":\"0\",\"volumesFrom\":[]}]",
                        "cpu": "2048",
                        "ephemeralStorage": null,
                        "executionRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-ecs-task-execution-roleus-west-2",
                        "family": "Defang-html-css-js-beta-kanikoAmd64",
                        "id": "Defang-html-css-js-beta-kanikoAmd64",
                        "inferenceAccelerators": [],
                        "ipcMode": "",
                        "memory": "16384",
                        "networkMode": "awsvpc",
                        "pidMode": "",
                        "placementConstraints": [],
                        "proxyConfiguration": null,
                        "requiresCompatibilities": [
                            "FARGATE"
                        ],
                        "revision": 46,
                        "runtimePlatform": {
                            "cpuArchitecture": "X86_64",
                            "operatingSystemFamily": "LINUX"
                        },
                        "skipDestroy": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "taskRoleArn": "arn:aws:iam::123456789012:role/Defang-html-css-js-beta-kaniko-task-roleus-west-2",
                        "trackLatest": false,
                        "volumes": []
                    },
                    "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko::kaniko",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:ecr/pullThroughCacheRule:PullThroughCacheRule::ecr-public",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds",
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/rolePoliciesExclusive:RolePoliciesExclusive::kaniko-task-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "containerDefinitions": [
                            "urn:pulumi:beta::html-css-js::aws:ecr/pullThroughCacheRule:PullThroughCacheRule::ecr-public",
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds"
                        ],
                        "cpu": [],
                        "executionRoleArn": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::ecs-task-execution-role"
                        ],
                        "family": [],
                        "memory": [],
                        "networkMode": [],
                        "requiresCompatibilities": [],
                        "runtimePlatform": [],
                        "taskRoleArn": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:iam/role:Role::kaniko-task-role"
                        ]
                    },
                    "created": "2025-11-22T11:53:40.281513694Z",
                    "modified": "2025-11-22T11:53:40.281513694Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-1",
                    "custom": true,
                    "id": "rtb-02ad614e4c9bcbea5",
                    "type": "aws:ec2/routeTable:RouteTable",
                    "inputs": {
                        "__defaults": [],
                        "tags": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:route-table/rtb-02ad614e4c9bcbea5",
                        "id": "rtb-02ad614e4c9bcbea5",
                        "ownerId": "123456789012",
                        "propagatingVgws": [],
                        "routes": [],
                        "tags": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-1",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:41.068307827Z",
                    "modified": "2025-11-22T11:53:41.068307827Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTable.js#172,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-2",
                    "custom": true,
                    "id": "rtb-0e7dc951f4fbe2470",
                    "type": "aws:ec2/routeTable:RouteTable",
                    "inputs": {
                        "__defaults": [],
                        "tags": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:route-table/rtb-0e7dc951f4fbe2470",
                        "id": "rtb-0e7dc951f4fbe2470",
                        "ownerId": "123456789012",
                        "propagatingVgws": [],
                        "routes": [],
                        "tags": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-2",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:41.873279128Z",
                    "modified": "2025-11-22T11:53:41.873279128Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTable.js#172,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-3",
                    "custom": true,
                    "id": "rtb-0581995d7b613e613",
                    "type": "aws:ec2/routeTable:RouteTable",
                    "inputs": {
                        "__defaults": [],
                        "tags": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:route-table/rtb-0581995d7b613e613",
                        "id": "rtb-0581995d7b613e613",
                        "ownerId": "123456789012",
                        "propagatingVgws": [],
                        "routes": [],
                        "tags": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "Name": "shared-vpc-public-3",
                            "SubnetType": "Public",
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:41.999768463Z",
                    "modified": "2025-11-22T11:53:41.999768463Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTable.js#172,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/routeTableAssociation:RouteTableAssociation::shared-vpc-public-1",
                    "custom": true,
                    "id": "rtbassoc-0dd9439967ea8a808",
                    "type": "aws:ec2/routeTableAssociation:RouteTableAssociation",
                    "inputs": {
                        "__defaults": [],
                        "routeTableId": "rtb-02ad614e4c9bcbea5",
                        "subnetId": "subnet-0bd5ece4349f2954e"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "gatewayId": "",
                        "id": "rtbassoc-0dd9439967ea8a808",
                        "routeTableId": "rtb-02ad614e4c9bcbea5",
                        "subnetId": "subnet-0bd5ece4349f2954e"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-1",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-1"
                        ],
                        "subnetId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1"
                        ]
                    },
                    "created": "2025-11-22T11:53:42.437092241Z",
                    "modified": "2025-11-22T11:53:42.437092241Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTableAssociation.js#93,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/route:Route::shared-vpc-public-1",
                    "custom": true,
                    "id": "r-rtb-02ad614e4c9bcbea51080289494",
                    "type": "aws:ec2/route:Route",
                    "inputs": {
                        "__defaults": [],
                        "destinationCidrBlock": "0.0.0.0/0",
                        "gatewayId": "igw-0a4f83d988bc4d0d5",
                        "routeTableId": "rtb-02ad614e4c9bcbea5"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "carrierGatewayId": "",
                        "coreNetworkArn": "",
                        "destinationCidrBlock": "0.0.0.0/0",
                        "destinationIpv6CidrBlock": "",
                        "destinationPrefixListId": "",
                        "egressOnlyGatewayId": "",
                        "gatewayId": "igw-0a4f83d988bc4d0d5",
                        "id": "r-rtb-02ad614e4c9bcbea51080289494",
                        "instanceId": "",
                        "instanceOwnerId": "",
                        "localGatewayId": "",
                        "natGatewayId": "",
                        "networkInterfaceId": "",
                        "origin": "CreateRoute",
                        "routeTableId": "rtb-02ad614e4c9bcbea5",
                        "state": "active",
                        "transitGatewayId": "",
                        "vpcEndpointId": "",
                        "vpcPeeringConnectionId": ""
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-1",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/internetGateway:InternetGateway::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "destinationCidrBlock": [],
                        "gatewayId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/internetGateway:InternetGateway::shared-vpc"
                        ],
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-1"
                        ]
                    },
                    "created": "2025-11-22T11:53:42.49185729Z",
                    "modified": "2025-11-22T11:53:42.49185729Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/route.js#144,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/routeTableAssociation:RouteTableAssociation::shared-vpc-public-2",
                    "custom": true,
                    "id": "rtbassoc-04b09af3616e2c3fa",
                    "type": "aws:ec2/routeTableAssociation:RouteTableAssociation",
                    "inputs": {
                        "__defaults": [],
                        "routeTableId": "rtb-0e7dc951f4fbe2470",
                        "subnetId": "subnet-05837a20eb688bf3c"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "gatewayId": "",
                        "id": "rtbassoc-04b09af3616e2c3fa",
                        "routeTableId": "rtb-0e7dc951f4fbe2470",
                        "subnetId": "subnet-05837a20eb688bf3c"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-2",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-2"
                        ],
                        "subnetId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2"
                        ]
                    },
                    "created": "2025-11-22T11:53:43.172205246Z",
                    "modified": "2025-11-22T11:53:43.172205246Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTableAssociation.js#93,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/route:Route::shared-vpc-public-2",
                    "custom": true,
                    "id": "r-rtb-0e7dc951f4fbe24701080289494",
                    "type": "aws:ec2/route:Route",
                    "inputs": {
                        "__defaults": [],
                        "destinationCidrBlock": "0.0.0.0/0",
                        "gatewayId": "igw-0a4f83d988bc4d0d5",
                        "routeTableId": "rtb-0e7dc951f4fbe2470"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "carrierGatewayId": "",
                        "coreNetworkArn": "",
                        "destinationCidrBlock": "0.0.0.0/0",
                        "destinationIpv6CidrBlock": "",
                        "destinationPrefixListId": "",
                        "egressOnlyGatewayId": "",
                        "gatewayId": "igw-0a4f83d988bc4d0d5",
                        "id": "r-rtb-0e7dc951f4fbe24701080289494",
                        "instanceId": "",
                        "instanceOwnerId": "",
                        "localGatewayId": "",
                        "natGatewayId": "",
                        "networkInterfaceId": "",
                        "origin": "CreateRoute",
                        "routeTableId": "rtb-0e7dc951f4fbe2470",
                        "state": "active",
                        "transitGatewayId": "",
                        "vpcEndpointId": "",
                        "vpcPeeringConnectionId": ""
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-2",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/internetGateway:InternetGateway::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "destinationCidrBlock": [],
                        "gatewayId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/internetGateway:InternetGateway::shared-vpc"
                        ],
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-2"
                        ]
                    },
                    "created": "2025-11-22T11:53:43.193712943Z",
                    "modified": "2025-11-22T11:53:43.193712943Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/route.js#144,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/routeTableAssociation:RouteTableAssociation::shared-vpc-public-3",
                    "custom": true,
                    "id": "rtbassoc-024d925b039d6b261",
                    "type": "aws:ec2/routeTableAssociation:RouteTableAssociation",
                    "inputs": {
                        "__defaults": [],
                        "routeTableId": "rtb-0581995d7b613e613",
                        "subnetId": "subnet-007b405cfe3fdb5a3"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "gatewayId": "",
                        "id": "rtbassoc-024d925b039d6b261",
                        "routeTableId": "rtb-0581995d7b613e613",
                        "subnetId": "subnet-007b405cfe3fdb5a3"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-3",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-3"
                        ],
                        "subnetId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3"
                        ]
                    },
                    "created": "2025-11-22T11:53:43.731085834Z",
                    "modified": "2025-11-22T11:53:43.731085834Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/routeTableAssociation.js#93,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable$aws:ec2/route:Route::shared-vpc-public-3",
                    "custom": true,
                    "id": "r-rtb-0581995d7b613e6131080289494",
                    "type": "aws:ec2/route:Route",
                    "inputs": {
                        "__defaults": [],
                        "destinationCidrBlock": "0.0.0.0/0",
                        "gatewayId": "igw-0a4f83d988bc4d0d5",
                        "routeTableId": "rtb-0581995d7b613e613"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":300000000000,\"delete\":300000000000,\"update\":120000000000}}",
                        "carrierGatewayId": "",
                        "coreNetworkArn": "",
                        "destinationCidrBlock": "0.0.0.0/0",
                        "destinationIpv6CidrBlock": "",
                        "destinationPrefixListId": "",
                        "egressOnlyGatewayId": "",
                        "gatewayId": "igw-0a4f83d988bc4d0d5",
                        "id": "r-rtb-0581995d7b613e6131080289494",
                        "instanceId": "",
                        "instanceOwnerId": "",
                        "localGatewayId": "",
                        "natGatewayId": "",
                        "networkInterfaceId": "",
                        "origin": "CreateRoute",
                        "routeTableId": "rtb-0581995d7b613e613",
                        "state": "active",
                        "transitGatewayId": "",
                        "vpcEndpointId": "",
                        "vpcPeeringConnectionId": ""
                    },
                    "parent": "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-3",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/internetGateway:InternetGateway::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-3"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "destinationCidrBlock": [],
                        "gatewayId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/internetGateway:InternetGateway::shared-vpc"
                        ],
                        "routeTableId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet$aws:ec2/routeTable:RouteTable::shared-vpc-public-3"
                        ]
                    },
                    "created": "2025-11-22T11:53:44.108138311Z",
                    "modified": "2025-11-22T11:53:44.108138311Z",
                    "sourcePosition": "project:///../../snapshot/awsx/node_modules/@pulumi/aws/ec2/route.js#144,9"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:ec2/vpcDhcpOptionsAssociation:VpcDhcpOptionsAssociation::dhcp-options-association",
                    "custom": true,
                    "id": "dopt-0eba26f92a7bc54b3-vpc-0a5e98797c6a42b87",
                    "type": "aws:ec2/vpcDhcpOptionsAssociation:VpcDhcpOptionsAssociation",
                    "inputs": {
                        "__defaults": [],
                        "dhcpOptionsId": "dopt-0eba26f92a7bc54b3",
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "dhcpOptionsId": "dopt-0eba26f92a7bc54b3",
                        "id": "dopt-0eba26f92a7bc54b3-vpc-0a5e98797c6a42b87",
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::aws:ec2/vpcDhcpOptions:VpcDhcpOptions::dhcp-options"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "dhcpOptionsId": [
                            "urn:pulumi:beta::html-css-js::aws:ec2/vpcDhcpOptions:VpcDhcpOptions::dhcp-options"
                        ],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc"
                        ]
                    },
                    "created": "2025-11-22T11:53:45.155621639Z",
                    "modified": "2025-11-22T11:53:45.155621639Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:ec2/defaultSecurityGroup:DefaultSecurityGroup::default",
                    "custom": true,
                    "id": "sg-09bffb7cee4b29b82",
                    "type": "aws:ec2/defaultSecurityGroup:DefaultSecurityGroup",
                    "inputs": {
                        "__defaults": [
                            "revokeRulesOnDelete"
                        ],
                        "egress": [],
                        "ingress": [],
                        "revokeRulesOnDelete": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:security-group/sg-09bffb7cee4b29b82",
                        "description": "default VPC security group",
                        "egress": [],
                        "id": "sg-09bffb7cee4b29b82",
                        "ingress": [],
                        "name": "default",
                        "namePrefix": "",
                        "ownerId": "123456789012",
                        "revokeRulesOnDelete": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "egress": [],
                        "ingress": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3"
                        ]
                    },
                    "created": "2025-11-22T11:53:45.720055745Z",
                    "modified": "2025-11-22T11:53:45.720055745Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:ec2/securityGroup:SecurityGroup::bootstrap",
                    "custom": true,
                    "id": "sg-0c2bf07c575b26d6c",
                    "type": "aws:ec2/securityGroup:SecurityGroup",
                    "inputs": {
                        "__defaults": [
                            "revokeRulesOnDelete"
                        ],
                        "description": "Managed by Defang",
                        "egress": [
                            {
                                "__defaults": [
                                    "self"
                                ],
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "Allow all outbound traffic",
                                "fromPort": 0,
                                "protocol": "-1",
                                "self": false,
                                "toPort": 0
                            }
                        ],
                        "ingress": [],
                        "name": "Defang-html-css-js-beta-bootstrap",
                        "revokeRulesOnDelete": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":900000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:security-group/sg-0c2bf07c575b26d6c",
                        "description": "Managed by Defang",
                        "egress": [
                            {
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "Allow all outbound traffic",
                                "fromPort": 0,
                                "ipv6CidrBlocks": [],
                                "prefixListIds": [],
                                "protocol": "-1",
                                "securityGroups": [],
                                "self": false,
                                "toPort": 0
                            }
                        ],
                        "id": "sg-0c2bf07c575b26d6c",
                        "ingress": [],
                        "name": "Defang-html-css-js-beta-bootstrap",
                        "namePrefix": "",
                        "ownerId": "123456789012",
                        "revokeRulesOnDelete": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "description": [],
                        "egress": [],
                        "ingress": [],
                        "name": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2"
                        ]
                    },
                    "created": "2025-11-22T11:53:46.475148679Z",
                    "modified": "2025-11-22T11:53:46.475148679Z",
                    "ignoreChanges": [
                        "description"
                    ]
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:ec2/securityGroup:SecurityGroup::sg443",
                    "custom": true,
                    "id": "sg-0bfc62d79b83b455e",
                    "type": "aws:ec2/securityGroup:SecurityGroup",
                    "inputs": {
                        "__defaults": [
                            "revokeRulesOnDelete"
                        ],
                        "description": "Managed by Defang",
                        "egress": [
                            {
                                "__defaults": [
                                    "self"
                                ],
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "Allow all outbound traffic",
                                "fromPort": 0,
                                "protocol": "-1",
                                "self": false,
                                "toPort": 0
                            }
                        ],
                        "ingress": [
                            {
                                "__defaults": [
                                    "self"
                                ],
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "targetPorts",
                                "fromPort": 443,
                                "protocol": "tcp",
                                "securityGroups": [],
                                "self": false,
                                "toPort": 443
                            },
                            {
                                "__defaults": [
                                    "self"
                                ],
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "targetPorts",
                                "fromPort": 80,
                                "protocol": "tcp",
                                "securityGroups": [],
                                "self": false,
                                "toPort": 80
                            },
                            {
                                "__defaults": [
                                    "self"
                                ],
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "Allow ICMP Path MTU Discovery",
                                "fromPort": -1,
                                "protocol": "icmp",
                                "securityGroups": [],
                                "self": false,
                                "toPort": -1
                            }
                        ],
                        "name": "Defang-html-css-js-beta-sg443",
                        "revokeRulesOnDelete": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117",
                            "scope": "pub"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117",
                            "scope": "pub"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000,\"delete\":900000000000},\"schema_version\":\"1\"}",
                        "arn": "arn:aws:ec2:us-west-2:123456789012:security-group/sg-0bfc62d79b83b455e",
                        "description": "Managed by Defang",
                        "egress": [
                            {
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "Allow all outbound traffic",
                                "fromPort": 0,
                                "ipv6CidrBlocks": [],
                                "prefixListIds": [],
                                "protocol": "-1",
                                "securityGroups": [],
                                "self": false,
                                "toPort": 0
                            }
                        ],
                        "id": "sg-0bfc62d79b83b455e",
                        "ingress": [
                            {
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "Allow ICMP Path MTU Discovery",
                                "fromPort": -1,
                                "ipv6CidrBlocks": [],
                                "prefixListIds": [],
                                "protocol": "icmp",
                                "securityGroups": [],
                                "self": false,
                                "toPort": -1
                            },
                            {
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "targetPorts",
                                "fromPort": 443,
                                "ipv6CidrBlocks": [],
                                "prefixListIds": [],
                                "protocol": "tcp",
                                "securityGroups": [],
                                "self": false,
                                "toPort": 443
                            },
                            {
                                "cidrBlocks": [
                                    "0.0.0.0/0"
                                ],
                                "description": "targetPorts",
                                "fromPort": 80,
                                "ipv6CidrBlocks": [],
                                "prefixListIds": [],
                                "protocol": "tcp",
                                "securityGroups": [],
                                "self": false,
                                "toPort": 80
                            }
                        ],
                        "name": "Defang-html-css-js-beta-sg443",
                        "namePrefix": "",
                        "ownerId": "123456789012",
                        "revokeRulesOnDelete": false,
                        "tags": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117",
                            "scope": "pub"
                        },
                        "tagsAll": {
                            "defang:org": "testuser",
                            "defang:project": "html-css-js",
                            "defang:stack": "beta",
                            "defang:version": "0.6.0-1189-gb86d4117",
                            "scope": "pub"
                        },
                        "vpcId": "vpc-0a5e98797c6a42b87"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                        "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "description": [],
                        "egress": [],
                        "ingress": [],
                        "name": [],
                        "tags": [],
                        "vpcId": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2"
                        ]
                    },
                    "created": "2025-11-22T11:53:47.042258628Z",
                    "modified": "2025-11-22T11:53:47.042258628Z",
                    "ignoreChanges": [
                        "description"
                    ]
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:route53/record:Record::_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app_CNAME",
                    "custom": true,
                    "id": "Z05786792JXLN6MCLB9JS__673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app._CNAME",
                    "type": "aws:route53/record:Record",
                    "inputs": {
                        "__defaults": [],
                        "allowOverwrite": false,
                        "name": "_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app.",
                        "records": [
                            "_f51defb22cb6f7f94a3186bd70cc9304.jkddzztszm.acm-validations.aws."
                        ],
                        "ttl": 60,
                        "type": "CNAME",
                        "zoneId": "Z05786792JXLN6MCLB9JS"
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"2\"}",
                        "aliases": [],
                        "allowOverwrite": false,
                        "cidrRoutingPolicy": null,
                        "failoverRoutingPolicies": [],
                        "fqdn": "_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app",
                        "geolocationRoutingPolicies": [],
                        "geoproximityRoutingPolicy": null,
                        "healthCheckId": "",
                        "id": "Z05786792JXLN6MCLB9JS__673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app._CNAME",
                        "latencyRoutingPolicies": [],
                        "multivalueAnswerRoutingPolicy": false,
                        "name": "_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app",
                        "records": [
                            "_f51defb22cb6f7f94a3186bd70cc9304.jkddzztszm.acm-validations.aws."
                        ],
                        "setIdentifier": "",
                        "ttl": 60,
                        "type": "CNAME",
                        "weightedRoutingPolicies": [],
                        "zoneId": "Z05786792JXLN6MCLB9JS"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:route53/zone:Zone::html-css-js.testuser.defang.app"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "allowOverwrite": [],
                        "name": [],
                        "records": [],
                        "ttl": [],
                        "type": [],
                        "zoneId": [
                            "urn:pulumi:beta::html-css-js::aws:route53/zone:Zone::html-css-js.testuser.defang.app"
                        ]
                    },
                    "created": "2025-11-22T11:54:06.586328531Z",
                    "modified": "2025-11-22T11:54:06.586328531Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:acm/certificateValidation:CertificateValidation::*.html-css-js.testuser.defang.appValidation",
                    "custom": true,
                    "id": "2025-11-22 11:53:58.669 +0000 UTC",
                    "type": "aws:acm/certificateValidation:CertificateValidation",
                    "inputs": {
                        "__defaults": [],
                        "certificateArn": "arn:aws:acm:us-west-2:123456789012:certificate/e894c1a2-c7e1-4560-9b24-6a8928a622d5",
                        "validationRecordFqdns": [
                            "_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app"
                        ]
                    },
                    "outputs": {
                        "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":4500000000000}}",
                        "certificateArn": "arn:aws:acm:us-west-2:123456789012:certificate/e894c1a2-c7e1-4560-9b24-6a8928a622d5",
                        "id": "2025-11-22 11:53:58.669 +0000 UTC",
                        "validationRecordFqdns": [
                            "_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app"
                        ]
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:acm/certificate:Certificate::*.html-css-js.testuser.defang.app",
                        "urn:pulumi:beta::html-css-js::aws:route53/record:Record::_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app_CNAME"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "certificateArn": [
                            "urn:pulumi:beta::html-css-js::aws:acm/certificate:Certificate::*.html-css-js.testuser.defang.app"
                        ],
                        "validationRecordFqdns": [
                            "urn:pulumi:beta::html-css-js::aws:acm/certificate:Certificate::*.html-css-js.testuser.defang.app",
                            "urn:pulumi:beta::html-css-js::aws:route53/record:Record::_673cc6e4d150c1ae7792208c21f72a56.html-css-js.testuser.defang.app_CNAME"
                        ]
                    },
                    "created": "2025-11-22T11:54:07.184546331Z",
                    "modified": "2025-11-22T11:54:07.184546331Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::aws:route53/record:Record::html-css-js.testuser.defang.app_SOA",
                    "custom": true,
                    "id": "Z05786792JXLN6MCLB9JS_html-css-js.testuser.defang.app_SOA",
                    "type": "aws:route53/record:Record",
                    "inputs": {
                        "__defaults": [],
                        "allowOverwrite": true,
                        "name": "html-css-js.testuser.defang.app",
                        "records": [
                            "ns-649.awsdns-17.net awsdns-hostmaster.amazon.com. 2025092601 7200 900 1209600 15"
                        ],
                        "ttl": 3600,
                        "type": "SOA",
                        "zoneId": "Z05786792JXLN6MCLB9JS"
                    },
                    "outputs": {
                        "__meta": "{\"schema_version\":\"2\"}",
                        "aliases": [],
                        "allowOverwrite": true,
                        "cidrRoutingPolicy": null,
                        "failoverRoutingPolicies": [],
                        "fqdn": "html-css-js.testuser.defang.app",
                        "geolocationRoutingPolicies": [],
                        "geoproximityRoutingPolicy": null,
                        "healthCheckId": "",
                        "id": "Z05786792JXLN6MCLB9JS_html-css-js.testuser.defang.app_SOA",
                        "latencyRoutingPolicies": [],
                        "multivalueAnswerRoutingPolicy": false,
                        "name": "html-css-js.testuser.defang.app",
                        "records": [
                            "ns-649.awsdns-17.net awsdns-hostmaster.amazon.com. 2025092601 7200 900 1209600 15"
                        ],
                        "setIdentifier": "",
                        "ttl": 3600,
                        "type": "SOA",
                        "weightedRoutingPolicies": [],
                        "zoneId": "Z05786792JXLN6MCLB9JS"
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:route53/zone:Zone::html-css-js.testuser.defang.app"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                    "propertyDependencies": {
                        "allowOverwrite": [],
                        "name": [],
                        "records": [
                            "urn:pulumi:beta::html-css-js::aws:route53/zone:Zone::html-css-js.testuser.defang.app"
                        ],
                        "ttl": [],
                        "type": [],
                        "zoneId": [
                            "urn:pulumi:beta::html-css-js::aws:route53/zone:Zone::html-css-js.testuser.defang.app"
                        ]
                    },
                    "retainOnDelete": true,
                    "created": "2025-11-22T11:54:07.271879016Z",
                    "modified": "2025-11-22T11:54:07.271879016Z"
                },
                {
                    "urn": "urn:pulumi:beta::html-css-js::pulumi-nodejs:dynamic:Resource::app-image",
                    "custom": true,
                    "id": "app-image-10c2c96",
                    "type": "pulumi-nodejs:dynamic:Resource",
                    "inputs": {
                        "__provider": "exports.handler = __f0;\n\nvar __provider_proto = {};\nObject.defineProperty(__f1, \"prototype\", { value: __provider_proto });\nObject.defineProperty(__provider_proto, \"constructor\", { configurable: true, writable: true, value: __f1 });\nvar __waitForBuildDone_1 = {waitUntilBuildDone: __waitUntilBuildDone};\nvar __IMAGE_REGEX = new RegExp(\"^((?:((?:[0-9a-z](?:[0-9a-z-]{0,61}[0-9a-z])?\\\\.)+[a-z]{2,63})\\\\/)?(.{1,127}?))(?::(\\\\w[\\\\w.-]{0,127}))?(?:@(sha256:[0-9a-f]{64}))?$\", \"\");\nvar __utils_1 = {parseImage: __parseImage, parseCIDR: __parseCIDR, dedup: __dedup, groupBy: __groupBy, parseBasicAuth: __parseBasicAuth};\nvar __aws_1 = {};\nvar __ecrRepoRegex = new RegExp(\"^(\\\\d+)\\\\.dkr\\\\.ecr\\\\.([^.]+)\\\\.amazonaws\\\\.com\\\\/([^:@]+)\", \"\");\nvar __m = {};\nObject.defineProperty(__m, \"__esModule\", { value: true });\n__m.callerAccountId = \"123456789012\";\nvar __m_callerAccountRootArn_proto = {};\nObject.defineProperty(__f4, \"prototype\", { value: __m_callerAccountRootArn_proto });\nObject.defineProperty(__m_callerAccountRootArn_proto, \"constructor\", { configurable: true, writable: true, value: __f4 });\nObject.defineProperty(__m_callerAccountRootArn_proto, \"apply\", { configurable: true, writable: true, value: __f5 });\nObject.defineProperty(__m_callerAccountRootArn_proto, \"get\", { configurable: true, writable: true, value: __f6 });\nvar __m_callerAccountRootArn = Object.create(__m_callerAccountRootArn_proto);\n__m_callerAccountRootArn.value = \"arn:aws:iam::123456789012:root\";\n__m.callerAccountRootArn = __m_callerAccountRootArn;\n__m.fromArn = __fromArn;\n__m.fromId = __fromId;\n__m.getCallerAccountId = __getCallerAccountId;\nvar __config_2 = {REGION: \"us-west-2\", VPC_CIDR: \"10.0.0.0/16\"};\n__m.createRoleProvider = __createRoleProvider;\nObject.defineProperty(__f7, \"isInstance\", { configurable: true, writable: true, value: __f8 });\nObject.defineProperty(__f10, \"isInstance\", { configurable: true, writable: true, value: __f11 });\nObject.setPrototypeOf(__f10, global.Error);\nvar __f9_prototype = {};\nObject.defineProperty(__f9_prototype, \"constructor\", { configurable: true, writable: true, value: __f9 });\nObject.defineProperty(__f9_prototype, \"get\", { configurable: true, writable: true, value: __f12 });\nObject.defineProperty(__f9_prototype, \"apply\", { configurable: true, writable: true, value: __f13 });\nObject.defineProperty(__f9, \"prototype\", { value: __f9_prototype });\nObject.defineProperty(__f9, \"create\", { configurable: true, writable: true, value: __f14 });\nObject.defineProperty(__f9, \"isInstance\", { configurable: true, writable: true, value: __f15 });\nObject.defineProperty(__f9, \"getPromisedValue\", { configurable: true, writable: true, value: __f16 });\nvar __pulumi = {interpolate: __interpolate, output: __output, mergeOptions: __mergeOptions, log: require(\"@pulumi/pulumi/log/index.js\"), concat: __concat, jsonStringify: __jsonStringify};\n__m.getEcrPrivateRegistry = __getEcrPrivateRegistry;\n__m.getAmiByID = __getAmiByID;\n__m.getAwsComputeDomain = __getAwsComputeDomain;\n__m.getInstanceTypes = __getInstanceTypes;\n__m.abbreviateRegion = __abbreviateRegion;\n__m.createSubnets = __createSubnets;\n__m.createSubnet = __createSubnet;\nvar __PRIVATE_ZONE_REGEX = new RegExp(\"\\\\b(intranet|internal|private|corp|home|home\\\\.arpa|lan|local)\\\\.?$\", \"\");\nvar __safe_namings_1 = {normalizeDns: __normalizeDns, truncate: __truncate};\nvar __time_1 = {HOUR: 3600, MINUTE: 60};\nvar __route53_1 = {createCaaDnsRecord: __createCaaDnsRecord, createRecord: __createRecord};\n__m.createCertificateDNS = __createCertificateDNS;\n__m.getAvailabilityZoneNames = __getAvailabilityZoneNames;\n__m.getRootOU = __getRootOU;\n__m.groupInstanceTypes = __groupInstanceTypes;\n__m.getInstanceTypeArch = __getInstanceTypeArch;\n__m.isGpuInstance = __isGpuInstance;\n__m.getAmiType = __getAmiType;\n__m.makeArn = __makeArn;\n__m.nameFromArn = __nameFromArn;\n__m.logGroupArnToId = __logGroupArnToId;\n__m.logGroupIdToArn = __logGroupIdToArn;\nvar __config_1 = {imageCacheTTL: 604800, IS_DEV: true, stack: __stack, IS_PROD: false, stackDir: __stackDir, retentionInDays: 1};\n__m.createEcrRepository = __createEcrRepository;\nvar __0_safe_namings_1 = {awsNameSafe: __awsNameSafe};\n__m.createPrivateBucket = __createPrivateBucket;\n__m.createLogGroup = __createLogGroup;\n__m.createSecret = __createSecret;\nvar __common_1 = {DefangComment: \"Managed by Defang\"};\n__m.createBucketDistribution = __createBucketDistribution;\n__m.createDistribution = __createDistribution;\n__m.createSecurityGroup = __createSecurityGroup;\n__m.getRegistryInfoForEcrRepo = __getRegistryInfoForEcrRepo;\n__m.parseEcrRepo = __parseEcrRepo;\nvar __error_1 = {getErrorHtml: __getErrorHtml};\n__m.createListener = __createListener;\n__m.getLoadBalancerCIDRs = __getLoadBalancerCIDRs;\n__m.createECSLifeCycleEventRule = __createECSLifeCycleEventRule;\nObject.defineProperty(__aws_1, \"parseEcrRepo\", { enumerable: true, get: __f3 });\nvar __types_1 = {createDigest: __createDigest};\nvar __image_1 = {getImageManifestDigest: __getImageManifestDigest};\nvar __image_digest_1 = {getImageDigestPromise: __getImageDigestPromise};\nObject.defineProperty(__provider_proto, \"create\", { configurable: true, writable: true, value: __f2 });\nObject.defineProperty(__provider_proto, \"update\", { configurable: true, writable: true, value: __f17 });\nvar __provider = Object.create(__provider_proto);\n\nfunction __f1() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/() { };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst awsCodeBuildSdk = require(\"@aws-sdk/client-codebuild/dist-cjs/index.js\");\n\nfunction __startBuild(__0, __1) {\n  return (function() {\n    with({ startBuild: __startBuild, this: undefined, arguments: undefined }) {\n\nreturn async function /*startBuild*/(client, projectName) {\n    var _a;\n    const command = new awsCodeBuildSdk.StartBuildCommand({\n        autoRetryLimitOverride: 0,\n        projectName,\n    });\n    const data = await client.send(command);\n    if (!((_a = data.build) === null || _a === void 0 ? void 0 : _a.id)) {\n        throw new Error(\"Failed to start build\");\n    }\n    return data.build.id;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getBuildPhaseErrorContexts(__0) {\n  return (function() {\n    with({ getBuildPhaseErrorContexts: __getBuildPhaseErrorContexts, this: undefined, arguments: undefined }) {\n\nreturn function /*getBuildPhaseErrorContexts*/(result) {\n    var _a;\n    return (_a = result === null || result === void 0 ? void 0 : result.builds) === null || _a === void 0 ? void 0 : _a.flatMap((build) => { var _a; return (_a = build.phases) !== null && _a !== void 0 ? _a : []; }).flatMap((phase) => phase.phaseStatus !== \"SUCCEEDED\" ? phase.contexts : []).flatMap((context) => (context === null || context === void 0 ? void 0 : context.message) || []).join(\"\\n\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst awsSdk = require(\"@aws-sdk/client-codebuild/dist-cjs/index.js\");\nconst util_waiter_1 = require(\"@smithy/util-waiter/dist-cjs/index.js\");\n\nfunction __checkState(__0, __1) {\n  return (function() {\n    with({ getBuildPhaseErrorContexts: __getBuildPhaseErrorContexts, checkState: __checkState, this: undefined, arguments: undefined }) {\n\nreturn async function /*checkState*/(client, input) {\n    var _a, _b;\n    let reason;\n    try {\n        const result = await client.send(new awsSdk.BatchGetBuildsCommand(input));\n        reason = getBuildPhaseErrorContexts(result);\n        try {\n            const status = (_b = (_a = result.builds) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.buildStatus;\n            if (status === \"SUCCEEDED\") {\n                return { state: util_waiter_1.WaiterState.SUCCESS, reason };\n            }\n            else if (status === \"TIMED_OUT\") {\n                return { state: util_waiter_1.WaiterState.TIMEOUT, reason };\n            }\n            else if (status === \"IN_PROGRESS\") {\n                return { state: util_waiter_1.WaiterState.RETRY, reason };\n            }\n            else {\n                return { state: util_waiter_1.WaiterState.FAILURE, reason };\n            }\n        }\n        catch (e) { }\n    }\n    catch (exception) {\n        reason = exception;\n    }\n    return { state: util_waiter_1.WaiterState.RETRY, reason };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __waitUntilBuildDone(__0, __1) {\n  return (function() {\n    with({ checkState: __checkState, waitUntilBuildDone: __waitUntilBuildDone, this: undefined, arguments: undefined }) {\n\nreturn async function /*waitUntilBuildDone*/(params, input) {\n    const serviceDefaults = { minDelay: 15, maxDelay: 120 };\n    const result = await (0, util_waiter_1.createWaiter)({ ...serviceDefaults, ...params }, input, checkState);\n    return (0, util_waiter_1.checkExceptions)(result);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __waitForBuilds(__0, __1, __2) {\n  return (function() {\n    with({ waitForBuildDone_1: __waitForBuildDone_1, waitForBuilds: __waitForBuilds, this: undefined, arguments: undefined }) {\n\nreturn async function /*waitForBuilds*/(inputs, ids, region) {\n    const client = new awsCodeBuildSdk.CodeBuildClient({ region });\n    const waitResult = await (0, waitForBuildDone_1.waitUntilBuildDone)({\n        abortSignal: inputs.abortSignal,\n        client,\n        maxDelay: 1,\n        maxWaitTime: inputs.maxWaitTime || 1200,\n        minDelay: 1,\n    }, { ids });\n    return waitResult;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getUnsuccessfulPhase(__0, __1) {\n  return (function() {\n    with({ getUnsuccessfulPhase: __getUnsuccessfulPhase, this: undefined, arguments: undefined }) {\n\nreturn async function /*getUnsuccessfulPhase*/(client, buildId) {\n    var _a, _b;\n    const command = new awsCodeBuildSdk.BatchGetBuildsCommand({ ids: [buildId] });\n    const data = await client.send(command);\n    const build = (_a = data.builds) === null || _a === void 0 ? void 0 : _a[0];\n    if (!build) {\n        throw new Error(`Build ${buildId} not found`);\n    }\n    return (_b = build.phases) === null || _b === void 0 ? void 0 : _b.find((phase) => phase.phaseStatus !== \"SUCCEEDED\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst assert = require(\"assert\");\n\nfunction __parseImage(__0) {\n  return (function() {\n    with({ IMAGE_REGEX: __IMAGE_REGEX, parseImage: __parseImage, this: undefined, arguments: undefined }) {\n\nreturn function /*parseImage*/(img) {\n    const match = img.match(IMAGE_REGEX);\n    if (!match) {\n        throw new Error(\"invalid container image name: \" + img);\n    }\n    const [_, image, registry, repo, tag, digest] = match;\n    assert(image && repo);\n    return { registry, image, repo, digest, tag };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __parseCIDR(__0) {\n  return (function() {\n    with({ parseCIDR: __parseCIDR, this: undefined, arguments: undefined }) {\n\nreturn function /*parseCIDR*/(cidr) {\n    const [o0, o1, o2, o3, prefixLen = 32] = cidr\n        .split(/[./]/)\n        .map((o) => parseInt(o));\n    if (prefixLen < 0 || prefixLen > 32) {\n        throw new Error(`invalid CIDR prefix length: ${prefixLen}`);\n    }\n    return { ip: [o0, o1, o2, o3], prefixLen };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __dedup(__0, __1) {\n  return (function() {\n    with({ dedup: __dedup, this: undefined, arguments: undefined }) {\n\nreturn function /*dedup*/(ar, transform) {\n    const seen = new Set();\n    return ar.filter((o) => {\n        const key = transform(o);\n        const before = seen.size;\n        return seen.add(key).size !== before;\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __groupBy(__0, __1) {\n  return (function() {\n    with({ groupBy: __groupBy, this: undefined, arguments: undefined }) {\n\nreturn function /*groupBy*/(array, fn) {\n    const map = new Map();\n    for (const item of array) {\n        const key = fn(item);\n        const ar = map.get(key);\n        if (ar) {\n            ar.push(item);\n        }\n        else {\n            map.set(key, [item]);\n        }\n    }\n    return map;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __parseBasicAuth(__0) {\n  return (function() {\n    with({ parseBasicAuth: __parseBasicAuth, this: undefined, arguments: undefined }) {\n\nreturn function /*parseBasicAuth*/(authToken) {\n    const decoded = Buffer.from(authToken, \"base64\").toString();\n    const colon = decoded.indexOf(\":\");\n    assert(colon >= 0, \"invalid basic auth token: missing colon\");\n    return {\n        username: decoded.slice(0, colon),\n        password: decoded.slice(colon + 1),\n    };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __parseEcrRepo(__0) {\n  return (function() {\n    with({ ecrRepoRegex: __ecrRepoRegex, parseEcrRepo: __parseEcrRepo, this: undefined, arguments: undefined }) {\n\nreturn function /*parseEcrRepo*/(ecrRepo) {\n    var _a;\n    const [_, registryId, region, repositoryName,] = (_a = ecrRepo.match(ecrRepoRegex)) !== null && _a !== void 0 ? _a : [];\n    if (!registryId || !region || !repositoryName) {\n        throw new Error(\"not an ECR repository URL: \" + ecrRepo);\n    }\n    return { registryId, repositoryName, region };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f4(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/(value) {\n        this.value = value;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f5(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*apply*/(func) {\n        throw new Error(\"'apply' is not allowed from inside a cloud-callback. Use 'get' to retrieve the value of this Output directly.\");\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f6() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*get*/() {\n        return this.value;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __fromArn(__0) {\n  return (function() {\n    with({ fromArn: __fromArn, this: undefined, arguments: undefined }) {\n\nreturn function /*fromArn*/(arn) {\n    return arn ? { arn } : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __fromId(__0) {\n  return (function() {\n    with({ fromId: __fromId, this: undefined, arguments: undefined }) {\n\nreturn function /*fromId*/(id) {\n    return id ? { id } : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst aws = require(\"@pulumi/aws/index.js\");\n\nfunction __getCallerAccountId(__0) {\n  return (function() {\n    with({ getCallerAccountId: __getCallerAccountId, this: undefined, arguments: undefined }) {\n\nreturn async function /*getCallerAccountId*/(opts) {\n    const caller = await aws.getCallerIdentity({}, opts);\n    return caller.accountId;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createRoleProvider(__0, __1, __2) {\n  return (function() {\n    with({ config_2: __config_2, createRoleProvider: __createRoleProvider, this: undefined, arguments: undefined }) {\n\nreturn function /*createRoleProvider*/(name, role, opts) {\n    return new aws.Provider(name, {\n        region: config_2.REGION,\n        assumeRole: {\n            roleArn: role.arn,\n        },\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f7() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/() {\n        /**\n         * A private field to help with RTTI that works in SxS scenarios.\n         *\n         * This is internal instead of being truly private, to support mixins and our serialization model.\n         *\n         * @internal\n         */\n        // eslint-disable-next-line @typescript-eslint/naming-convention,no-underscore-dangle,id-blacklist,id-match\n        this.__pulumiUnknown = true;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst utils = require(\"@pulumi/pulumi/utils.js\");\n\nfunction __f8(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*isInstance*/(obj) {\n        return utils.isInstance(obj, \"__pulumiUnknown\");\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isUnknown(__0) {\n  return (function() {\n    with({ Unknown: __f7, isUnknown: __isUnknown, this: undefined, arguments: undefined }) {\n\nreturn function /*isUnknown*/(val) {\n    return Unknown.isInstance(val);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst __pulumi_closure_import_exports = require(\"@pulumi/pulumi/output.js\");\n\nfunction __createSimpleOutput(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, createSimpleOutput: __createSimpleOutput, this: undefined, arguments: undefined }) {\n\nreturn function /*createSimpleOutput*/(val) {\n    return new exports.Output(new Set(), val instanceof Promise ? val : Promise.resolve(val), \n    /*isKnown*/ Promise.resolve(true), \n    /*isSecret */ Promise.resolve(false), Promise.resolve(new Set()));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAllResources(__0) {\n  return (function() {\n    with({ getAllResources: __getAllResources, this: undefined, arguments: undefined }) {\n\nreturn function /*getAllResources*/(op) {\n    return op.allResources instanceof Function ? op.allResources() : Promise.resolve(op.resources());\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __copyResources(__0) {\n  return (function() {\n    with({ copyResources: __copyResources, this: undefined, arguments: undefined }) {\n\nreturn function /*copyResources*/(resources) {\n    const copy = Array.isArray(resources)\n        ? new Set(resources)\n        : resources instanceof Set\n            ? new Set(resources)\n            : new Set([resources]);\n    return copy;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __containsUnknowns(__0) {\n  return (function() {\n    with({ isUnknown: __isUnknown, containsUnknowns: __containsUnknowns, this: undefined, arguments: undefined }) {\n\nreturn function /*containsUnknowns*/(value) {\n    return impl(value, new Set());\n    function impl(val, seen) {\n        if (val === null || typeof val !== \"object\") {\n            return false;\n        }\n        else if (isUnknown(val)) {\n            return true;\n        }\n        else if (seen.has(val)) {\n            return false;\n        }\n        seen.add(val);\n        if (val instanceof Array) {\n            return val.some((e) => impl(e, seen));\n        }\n        else {\n            return Object.keys(val).some((k) => impl(val[k], seen));\n        }\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __liftInnerOutput(__0, __1, __2, __3) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, getAllResources: __getAllResources, liftInnerOutput: __liftInnerOutput, this: undefined, arguments: undefined }) {\n\nreturn async function /*liftInnerOutput*/(allResources, value, isKnown, isSecret) {\n    if (!exports.Output.isInstance(value)) {\n        // 'value' itself wasn't an output, no need to transform any of the data we got.\n        return { allResources, value, isKnown, isSecret };\n    }\n    // 'value' was an Output.  So we unwrap that to get the inner value/isKnown/isSecret/resources\n    // returned by that Output and merge with the state passed in to get the state of the final Output.\n    // Note: we intentionally await all the promises of the inner output. This way we properly\n    // propagate any rejections of any of these promises through the outer output as well.\n    const innerValue = await value.promise(/*withUnknowns*/ true);\n    const innerIsKnown = await value.isKnown;\n    const innerIsSecret = await (value.isSecret || Promise.resolve(false));\n    // If we're working with a new-style output, grab all its resources and merge into ours.\n    // Otherwise, if this is an old-style output, just grab the resources it was known to have\n    // at construction time.\n    const innerResources = await getAllResources(value);\n    const totalResources = utils.union(allResources, innerResources);\n    return {\n        allResources: totalResources,\n        value: innerValue,\n        isKnown: innerIsKnown,\n        isSecret: isSecret || innerIsSecret,\n    };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f10() {\n  return (function() {\n    with({ __super: global.Error, this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/() {\n    __super.call(this, `Calling [toString] on an [Output<T>] is not supported.\n\nTo get the value of an Output<T> as an Output<string> consider either:\n1: o.apply(v => \\`prefix\\${v}suffix\\`)\n2: pulumi.interpolate \\`prefix\\${v}suffix\\`\n\nSee https://www.pulumi.com/docs/concepts/inputs-outputs for more details.\n\nOr use ESLint with https://github.com/pulumi/eslint-plugin-pulumi to warn or\nerror lint on using Output<T> in template literals.`);\n    /**\n     * A private field to help with RTTI that works in SxS scenarios.\n     *\n     * This is internal instead of being truly private, to support mixins and our serialization model.\n     *\n     * @internal\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention,no-underscore-dangle,id-blacklist,id-match\n    this.__pulumiOutputToStringError = true;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f11(__0) {\n  return (function() {\n    with({ __super: global.Error, this: undefined, arguments: undefined }) {\n\nreturn function /*isInstance*/(obj) {\n    return utils.isInstance(obj, \"__pulumiOutputToStringError\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f9(__0, __1, __2, __3, __4) {\n  return (function() {\n    with({ copyResources: __copyResources, containsUnknowns: __containsUnknowns, liftInnerOutput: __liftInnerOutput, OutputImpl: __f9, OutputToStringError: __f10, isUnknown: __isUnknown, exports: __pulumi_closure_import_exports, this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/(resources, promise, isKnown, isSecret, allResources) {\n        /**\n         * A private field to help with RTTI that works in SxS scenarios.\n         *\n         * This is internal instead of being truly private, to support mixins and our serialization model.\n         *\n         * @internal\n         */\n        // eslint-disable-next-line @typescript-eslint/naming-convention,no-underscore-dangle,id-blacklist,id-match\n        this.__pulumiOutput = true;\n        // Always create a copy so that no one accidentally modifies our Resource list.\n        const resourcesCopy = copyResources(resources);\n        // Create a copy of the async resources.  Populate this with the sync-resources if that's\n        // all we have.  That way this is always ensured to be a superset of the list of sync resources.\n        allResources = allResources || Promise.resolve([]);\n        const allResourcesCopy = allResources.then((r) => utils.union(copyResources(r), resourcesCopy));\n        // We are only known if we are not explicitly unknown and the resolved value of the output\n        // contains no distinguished unknown values.\n        isKnown = Promise.all([isKnown, promise]).then(([known, val]) => known && !containsUnknowns(val));\n        const lifted = Promise.all([allResourcesCopy, promise, isKnown, isSecret]).then(([liftedResources, value, liftedIsKnown, liftedIsSecret]) => liftInnerOutput(liftedResources, value, liftedIsKnown, liftedIsSecret));\n        this.resources = () => resourcesCopy;\n        this.allResources = () => lifted.then((l) => l.allResources);\n        this.isKnown = lifted.then((l) => l.isKnown);\n        this.isSecret = lifted.then((l) => l.isSecret);\n        this.promise = (withUnknowns) => OutputImpl.getPromisedValue(lifted.then((l) => l.value), withUnknowns);\n        this.toString = () => {\n            const error = new OutputToStringError();\n            if (utils.errorOutputString) {\n                throw error;\n            }\n            let message = error.message;\n            message += `\\nThis function may throw in a future version of @pulumi/pulumi.`;\n            return message;\n        };\n        this.toJSON = () => {\n            let message = `Calling [toJSON] on an [Output<T>] is not supported.\n\nTo get the value of an Output as a JSON value or JSON string consider either:\n    1: o.apply(v => v.toJSON())\n    2: o.apply(v => JSON.stringify(v))\n\nSee https://www.pulumi.com/docs/concepts/inputs-outputs for more details.`;\n            if (utils.errorOutputString) {\n                throw new Error(message);\n            }\n            message += `\\nThis function may throw in a future version of @pulumi/pulumi.`;\n            return message;\n        };\n        return new Proxy(this, {\n            get: (obj, prop) => {\n                // Recreate the prototype walk to ensure we find any actual members defined directly\n                // on `Output<T>`.\n                for (let o = obj; o; o = Object.getPrototypeOf(o)) {\n                    if (o.hasOwnProperty(prop)) {\n                        return o[prop];\n                    }\n                }\n                // Always explicitly fail on a member called 'then'.  It is used by other systems to\n                // determine if this is a Promise, and we do not want to indicate that that's what\n                // we are.\n                if (prop === \"then\") {\n                    return undefined;\n                }\n                // Do not lift members that start with __.  Technically, if all libraries were\n                // using this version of pulumi/pulumi we would not need this.  However, this is\n                // so that downstream consumers can use this version of pulumi/pulumi while also\n                // passing these new Outputs to older versions of pulumi/pulumi.  The reason this\n                // can be a problem is that older versions do an RTTI check that simply asks questions\n                // like:\n                //\n                //      Is there a member on this object called '__pulumiResource'\n                //\n                // If we automatically lift such a member (even if it eventually points to 'undefined'),\n                // then those RTTI checks will succeed.\n                //\n                // Note: this should be safe to not lift as, in general, properties with this prefix\n                // are not at all common (and in general are used to represent private things anyway\n                // that likely should not be exposed).\n                //\n                // Similarly, do not respond to the 'doNotCapture' member name.  It serves a similar\n                // RTTI purpose.\n                if (typeof prop === \"string\") {\n                    if (prop.startsWith(\"__\") || prop === \"doNotCapture\" || prop === \"deploymentOnlyModule\") {\n                        return undefined;\n                    }\n                }\n                // Fail out if we are being accessed using a symbol.  Many APIs will access with a\n                // well known symbol (like 'Symbol.toPrimitive') to check for the presence of something.\n                // They will only check for the existence of that member, and we don't want to make it\n                // appear that have those.\n                //\n                // Another way of putting this is that we only forward 'string/number' members to our\n                // underlying value.\n                if (typeof prop === \"symbol\") {\n                    return undefined;\n                }\n                // Else for *any other* property lookup, succeed the lookup and return a lifted\n                // `apply` on the underlying `Output`.\n                return obj.apply((ob) => {\n                    if (ob === undefined || ob === null) {\n                        return undefined;\n                    }\n                    else if (isUnknown(ob)) {\n                        // If the value of this output is unknown, the result of the access should also be unknown.\n                        // This is conceptually consistent, and also prevents us from returning a \"known undefined\"\n                        // value from the `ob[prop]` expression below.\n                        return exports.unknown;\n                    }\n                    return ob[prop];\n                }, /*runWithUnknowns:*/ true);\n            },\n        });\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f12() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*get*/() {\n        throw new Error(`Cannot call '.get' during update or preview.\nTo manipulate the value of this Output, use '.apply' instead.`);\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __applyHelperAsync(__0, __1, __2, __3, __4, __5) {\n  return (function() {\n    with({ containsUnknowns: __containsUnknowns, exports: __pulumi_closure_import_exports, liftInnerOutput: __liftInnerOutput, applyHelperAsync: __applyHelperAsync, this: undefined, arguments: undefined }) {\n\nreturn async function /*applyHelperAsync*/(allResources, value, isKnown, isSecret, func, runWithUnknowns) {\n    // Only perform the apply if the engine was able to give us an actual value\n    // for this Output.\n    const doApply = isKnown || runWithUnknowns;\n    if (!doApply) {\n        // We didn't actually run the function, our new Output is definitely **not** known.\n        return {\n            allResources,\n            value: undefined,\n            isKnown: false,\n            isSecret,\n        };\n    }\n    // If we are running with unknown values and the value is explicitly unknown but does not actually\n    // contain any unknown values, collapse its value to the unknown value. This ensures that callbacks\n    // that expect to see unknowns during preview in outputs that are not known will always do so.\n    if (!isKnown && runWithUnknowns && !containsUnknowns(value)) {\n        value = exports.unknown;\n    }\n    const transformed = await func(value);\n    // We successfully ran the inner function. Our new Output should be considered known.  We\n    // preserve secretness from our original Output to the new one we're creating.\n    return liftInnerOutput(allResources, transformed, /*isKnown*/ true, isSecret);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f13(__0, __1) {\n  return (function() {\n    with({ applyHelperAsync: __applyHelperAsync, OutputImpl: __f9, this: undefined, arguments: undefined }) {\n\nreturn function /*apply*/(func, runWithUnknowns) {\n        // we're inside the modern `output` code, so it's safe to call `.allResources!` here.\n        const applied = Promise.all([\n            this.allResources(),\n            this.promise(/*withUnknowns*/ true),\n            this.isKnown,\n            this.isSecret,\n        ]).then(([allResources, value, isKnown, isSecret]) => applyHelperAsync(allResources, value, isKnown, isSecret, func, !!runWithUnknowns));\n        const result = new OutputImpl(this.resources(), applied.then((a) => a.value), applied.then((a) => a.isKnown), applied.then((a) => a.isSecret), applied.then((a) => a.allResources));\n        return result;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f14(__0) {\n  return (function() {\n    with({ output: __output, this: undefined, arguments: undefined }) {\n\nreturn function /*create*/(val) {\n        return output(val);\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f15(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*isInstance*/(obj) {\n        return utils.isInstance(obj, \"__pulumiOutput\");\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f16(__0, __1) {\n  return (function() {\n    with({ containsUnknowns: __containsUnknowns, this: undefined, arguments: undefined }) {\n\nreturn async function /*getPromisedValue*/(promise, withUnknowns) {\n        // If the caller did not explicitly ask to see unknown values and val contains unknowns, return undefined. This\n        // preserves compatibility with earlier versions of the Pulumi SDK.\n        const val = await promise;\n        if (!withUnknowns && containsUnknowns(val)) {\n            return undefined;\n        }\n        return val;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAwaitableValue(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, getAwaitableValue: __getAwaitableValue, this: undefined, arguments: undefined }) {\n\nreturn function /*getAwaitableValue*/(v) {\n    if (exports.Output.isInstance(v)) {\n        return v.promise(/* withUnknowns */ true);\n    }\n    else {\n        return v;\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isSecret(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, isSecret: __isSecret, this: undefined, arguments: undefined }) {\n\nreturn function /*isSecret*/(val) {\n    return exports.Output.isInstance(val.isSecret) ? Promise.resolve(false) : val.isSecret;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isSecretOutput(__0) {\n  return (function() {\n    with({ isSecret: __isSecret, isSecretOutput: __isSecretOutput, this: undefined, arguments: undefined }) {\n\nreturn function /*isSecretOutput*/(o) {\n    return isSecret(o);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getResourcesAndDetails(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, isSecretOutput: __isSecretOutput, getResourcesAndDetails: __getResourcesAndDetails, this: undefined, arguments: undefined }) {\n\nreturn function /*getResourcesAndDetails*/(allValues) {\n    const syncResources = new Set();\n    const allOutputs = [];\n    for (const v of allValues) {\n        if (exports.Output.isInstance(v)) {\n            allOutputs.push(v);\n            for (const res of v.resources()) {\n                syncResources.add(res);\n            }\n        }\n    }\n    // All the outputs were generated in `function all` using `output(v)`.  So it's safe\n    // to call `.allResources!` here.\n    const allResources = Promise.all(allOutputs.map((o) => o.allResources())).then((arr) => {\n        const result = new Set();\n        for (const set of arr) {\n            for (const res of set) {\n                result.add(res);\n            }\n        }\n        return result;\n    });\n    // A merged output is known if all of its inputs are known.\n    const isKnown = Promise.all(allOutputs.map((o) => o.isKnown)).then((ps) => ps.every((b) => b));\n    // A merged output is secret if any of its inputs are secret.\n    const isSecret = Promise.all(allOutputs.map((o) => isSecretOutput(o))).then((ps) => ps.some((b) => b));\n    return [syncResources, isKnown, isSecret, allResources];\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getPromisedObject(__0) {\n  return (function() {\n    with({ getAwaitableValue: __getAwaitableValue, getPromisedObject: __getPromisedObject, this: undefined, arguments: undefined }) {\n\nreturn async function /*getPromisedObject*/(keysAndOutputs) {\n    const result = {};\n    for (const kvp of keysAndOutputs) {\n        result[kvp.key] = await getAwaitableValue(kvp.value);\n    }\n    return result;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst resource_1 = require(\"@pulumi/pulumi/resource.js\");\n\nfunction __outputRec(__0, __1, __2) {\n  return (function() {\n    with({ isUnknown: __isUnknown, createSimpleOutput: __createSimpleOutput, exports: __pulumi_closure_import_exports, getAllResources: __getAllResources, OutputImpl: __f9, getAwaitableValue: __getAwaitableValue, getResourcesAndDetails: __getResourcesAndDetails, getPromisedObject: __getPromisedObject, outputRec: __outputRec, this: undefined, arguments: undefined }) {\n\nreturn function /*outputRec*/(val, seen, preallocatedError) {\n    if (val === null || typeof val !== \"object\") {\n        // strings, numbers, booleans, functions, symbols, undefineds, nulls are all returned as\n        // themselves.  They are always 'known' (i.e. we can safely 'apply' off of them even during\n        // preview).\n        return val;\n    }\n    if (resource_1.Resource.isInstance(val)) {\n        // Don't unwrap Resources, there are existing codepaths that return Resources through\n        // Outputs and we want to preserve them as is when flattening.\n        return val;\n    }\n    if (isUnknown(val)) {\n        return val;\n    }\n    if (val instanceof Promise) {\n        // Recurse into the value the Promise points to.  This may end up producing a\n        // Promise<Output>. Wrap this in another Output as the final result.  This Output's\n        // construction will be able to merge the inner Output's data with its own.  See\n        // liftInnerOutput for more details.\n        return createSimpleOutput(val.then((v) => outputRec(v, seen, preallocatedError)));\n    }\n    if (exports.Output.isInstance(val)) {\n        // We create a new output here from the raw pieces of the original output in order to\n        // accommodate outputs from downlevel SxS SDKs.  This ensures that within this package it is\n        // safe to assume the implementation of any Output returned by the `output` function.\n        //\n        // This includes:\n        // 1. that first-class unknowns are properly represented in the system: if this was a\n        //    downlevel output where val.isKnown resolves to false, this guarantees that the\n        //    returned output's promise resolves to unknown.\n        // 2. That the `isSecret` property is available.\n        // 3. That the `.allResources` is available.\n        const allResources = getAllResources(val);\n        const newOutput = new OutputImpl(val.resources(), val.promise(/*withUnknowns*/ true), val.isKnown, val.isSecret, allResources);\n        return newOutput.apply((v) => outputRec(v, seen, preallocatedError), /*runWithUnknowns*/ true);\n    }\n    // Used to track whether we've seen this object before, so we can throw an error about circular\n    // structures. The Set is allocated when the first \"container\" object is encountered, either an array\n    // or object. Any subsequent recursive calls get a new Set based on the passed-in one.\n    seen = new Set(seen);\n    // In order to present a useful stack trace if an error occurs, we preallocate an error here.\n    // V8 captures a stack trace at the moment an Error is created and this stack trace will lead\n    // directly to user code.\n    preallocatedError = preallocatedError ?? new Error(\"Cannot create an Output from a circular structure\");\n    // Throw an error if we've seen this object before.\n    if (seen.has(val)) {\n        throw preallocatedError;\n    }\n    // Track that we've seen this object.\n    seen.add(val);\n    if (val instanceof Array) {\n        const allValues = [];\n        let hasOutputs = false;\n        for (const v of val) {\n            const ev = outputRec(v, seen, preallocatedError);\n            allValues.push(ev);\n            if (exports.Output.isInstance(ev)) {\n                hasOutputs = true;\n            }\n        }\n        // If we didn't encounter any nested Outputs, we don't need to do anything.  We can just\n        // return this value as is.\n        if (!hasOutputs) {\n            // Note: we intentionally return 'allValues' here and not 'val'.  This ensures we get a\n            // copy.  This has been behavior we've had since the beginning and there may be subtle\n            // logic out there that depends on this that we would not want ot break.\n            return allValues;\n        }\n        // Otherwise, combine the data from all the outputs/non-outputs to one final output.\n        const promisedArray = Promise.all(allValues.map((v) => getAwaitableValue(v)));\n        const [syncResources, isKnown, isSecret, allResources] = getResourcesAndDetails(allValues);\n        return new exports.Output(syncResources, promisedArray, isKnown, isSecret, allResources);\n    }\n    const promisedValues = [];\n    let hasOutputs = false;\n    for (const k of Object.keys(val)) {\n        const ev = outputRec(val[k], seen, preallocatedError);\n        promisedValues.push({ key: k, value: ev });\n        if (exports.Output.isInstance(ev)) {\n            hasOutputs = true;\n        }\n    }\n    if (!hasOutputs) {\n        // Note: we intentionally return a new value here and not 'val'.  This ensures we get a\n        // copy.  This has been behavior we've had since the beginning and there may be subtle\n        // logic out there that depends on this that we would not want ot break.\n        return promisedValues.reduce((o, kvp) => {\n            o[kvp.key] = kvp.value;\n            return o;\n        }, {});\n    }\n    const promisedObject = getPromisedObject(promisedValues);\n    const [syncResources, isKnown, isSecret, allResources] = getResourcesAndDetails(promisedValues.map((kvp) => kvp.value));\n    return new exports.Output(syncResources, promisedObject, isKnown, isSecret, allResources);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __output(__0) {\n  return (function() {\n    with({ outputRec: __outputRec, exports: __pulumi_closure_import_exports, createSimpleOutput: __createSimpleOutput, output: __output, this: undefined, arguments: undefined }) {\n\nreturn function /*output*/(val) {\n    const ov = outputRec(val);\n    return exports.Output.isInstance(ov) ? ov : createSimpleOutput(ov);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __interpolate(__0) {\n  return (function() {\n    with({ output: __output, interpolate: __interpolate, this: undefined, arguments: undefined }) {\n\nreturn function /*interpolate*/(literals, ...placeholders) {\n    return output(placeholders).apply((unwrapped) => {\n        let result = \"\";\n        // interleave the literals with the placeholders\n        for (let i = 0; i < unwrapped.length; i++) {\n            result += literals[i];\n            result += unwrapped[i];\n        }\n        // add the last literal\n        result += literals[literals.length - 1];\n        return result;\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst log = require(\"@pulumi/pulumi/log/index.js\");\n\nfunction __expandProviders(__0) {\n  return (function() {\n    with({ expandProviders: __expandProviders, this: undefined, arguments: undefined }) {\n\nreturn function /*expandProviders*/(options) {\n    // Convert 'providers' map to array form.\n    if (options.providers && !Array.isArray(options.providers)) {\n        for (const k in options.providers) {\n            if (Object.prototype.hasOwnProperty.call(options.providers, k)) {\n                const v = options.providers[k];\n                if (k !== v.getPackage()) {\n                    const message = `provider resource map where key ${k} doesn't match provider ${v.getPackage()}`;\n                    log.warn(message);\n                }\n            }\n        }\n        options.providers = utils.values(options.providers);\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst output_1 = require(\"@pulumi/pulumi/output.js\");\n\nfunction __isPromiseOrOutput(__0) {\n  return (function() {\n    with({ isPromiseOrOutput: __isPromiseOrOutput, this: undefined, arguments: undefined }) {\n\nreturn function /*isPromiseOrOutput*/(val) {\n    return val instanceof Promise || output_1.Output.isInstance(val);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __addToArray(__0, __1) {\n  return (function() {\n    with({ addToArray: __addToArray, this: undefined, arguments: undefined }) {\n\nreturn function /*addToArray*/(resultArray, value) {\n    if (Array.isArray(value)) {\n        resultArray.push(...value);\n    }\n    else if (value !== undefined && value !== null) {\n        resultArray.push(value);\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __merge(__0, __1, __2) {\n  return (function() {\n    with({ isPromiseOrOutput: __isPromiseOrOutput, addToArray: __addToArray, merge: __merge, this: undefined, arguments: undefined }) {\n\nreturn function /*merge*/(dest, source, alwaysCreateArray) {\n    // unwind any top level promise/outputs.\n    if (isPromiseOrOutput(dest)) {\n        return output_1.output(dest).apply((d) => merge(d, source, alwaysCreateArray));\n    }\n    if (isPromiseOrOutput(source)) {\n        return output_1.output(source).apply((s) => merge(dest, s, alwaysCreateArray));\n    }\n    // If either are an array, make a new array and merge the values into it.\n    // Otherwise, just overwrite the destination with the source value.\n    if (alwaysCreateArray || Array.isArray(dest) || Array.isArray(source)) {\n        const result = [];\n        addToArray(result, dest);\n        addToArray(result, source);\n        return result;\n    }\n    return source;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __normalizeProviders(__0) {\n  return (function() {\n    with({ normalizeProviders: __normalizeProviders, this: undefined, arguments: undefined }) {\n\nreturn function /*normalizeProviders*/(opts) {\n    // If we have 0 providers, delete providers. Otherwise, convert providers into a map.\n    const providers = opts.providers;\n    if (providers) {\n        if (providers.length === 0) {\n            opts.providers = undefined;\n        }\n        else {\n            opts.providers = {};\n            for (const res of providers) {\n                opts.providers[res.getPackage()] = res;\n            }\n        }\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __mergeOptions(__0, __1) {\n  return (function() {\n    with({ expandProviders: __expandProviders, merge: __merge, normalizeProviders: __normalizeProviders, mergeOptions: __mergeOptions, this: undefined, arguments: undefined }) {\n\nreturn function /*mergeOptions*/(opts1, opts2) {\n    const dest = { ...opts1 };\n    const source = { ...opts2 };\n    // Ensure provider/providers are all expanded into the `ProviderResource[]` form.\n    // This makes merging simple.\n    expandProviders(dest);\n    expandProviders(source);\n    // iterate specifically over the supplied properties in [source].  Note: there may not be an\n    // corresponding value in [dest].\n    for (const key of Object.keys(source)) {\n        const destVal = dest[key];\n        const sourceVal = source[key];\n        // For 'dependsOn' we might have singleton resources in both options bags. We\n        // want to make sure we combine them into a collection.\n        if (key === \"dependsOn\") {\n            dest[key] = merge(destVal, sourceVal, /*alwaysCreateArray:*/ true);\n            continue;\n        }\n        if (key === \"hooks\") {\n            continue;\n        }\n        dest[key] = merge(destVal, sourceVal, /*alwaysCreateArray:*/ false);\n    }\n    if (dest.hooks || source.hooks) {\n        const hookTypes = [\n            \"beforeCreate\",\n            \"afterCreate\",\n            \"beforeUpdate\",\n            \"afterUpdate\",\n            \"beforeDelete\",\n            \"afterDelete\",\n        ];\n        for (const hookType of hookTypes) {\n            const destHooks = dest?.hooks?.[hookType];\n            const sourceHooks = source?.hooks?.[hookType];\n            if (destHooks || sourceHooks) {\n                if (!dest.hooks) {\n                    dest.hooks = {};\n                }\n                dest.hooks[hookType] = merge(destHooks, sourceHooks, /*alwaysCreateArray:*/ false);\n            }\n        }\n    }\n    // Now, if we are left with a .providers that is just a single key/value pair, then\n    // collapse that down into .provider form.\n    normalizeProviders(dest);\n    return dest;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __concat() {\n  return (function() {\n    with({ output: __output, concat: __concat, this: undefined, arguments: undefined }) {\n\nreturn function /*concat*/(...params) {\n    return output(params).apply((array) => array.join(\"\"));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __jsonStringify(__0, __1, __2) {\n  return (function() {\n    with({ output: __output, jsonStringify: __jsonStringify, this: undefined, arguments: undefined }) {\n\nreturn function /*jsonStringify*/(obj, replacer, space) {\n    return output(obj).apply((o) => {\n        return JSON.stringify(o, replacer, space);\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getEcrPrivateRegistry() {\n  return (function() {\n    with({ config_2: __config_2, pulumi: __pulumi, exports: __m, getEcrPrivateRegistry: __getEcrPrivateRegistry, this: undefined, arguments: undefined }) {\n\nreturn function /*getEcrPrivateRegistry*/(region = config_2.REGION) {\n    return pulumi.interpolate `${exports.callerAccountId}.dkr.ecr.${region}.amazonaws.com`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAmiByID(__0) {\n  return (function() {\n    with({ getAmiByID: __getAmiByID, this: undefined, arguments: undefined }) {\n\nreturn function /*getAmiByID*/(amiId) {\n    return aws.ec2.getAmiOutput({\n        filters: [{ name: \"image-id\", values: [amiId] }],\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAwsComputeDomain() {\n  return (function() {\n    with({ config_2: __config_2, getAwsComputeDomain: __getAwsComputeDomain, this: undefined, arguments: undefined }) {\n\nreturn function /*getAwsComputeDomain*/(region = config_2.REGION) {\n    return region === \"us-east-1\" ? \"ec2.internal\" : `${region}.compute.internal`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getInstanceTypes(__0, __1) {\n  return (function() {\n    with({ getInstanceTypes: __getInstanceTypes, this: undefined, arguments: undefined }) {\n\nreturn async function /*getInstanceTypes*/(filters, opts) {\n    var _a;\n    const burstType = (_a = filters.burstType) !== null && _a !== void 0 ? _a : \"included\";\n    const instanceTypes = await aws.ec2.getInstanceTypes({\n        filters: [\n            {\n                name: \"processor-info.supported-architecture\",\n                values: [filters.arch],\n            },\n            ...(burstType !== \"included\"\n                ? [\n                    {\n                        name: \"burstable-performance-supported\",\n                        values: [burstType === \"required\" ? \"true\" : \"false\"],\n                    },\n                ]\n                : []),\n            ...(filters.exactCpuCount\n                ? [\n                    {\n                        name: \"vcpu-info.default-vcpus\",\n                        values: [String(filters.exactCpuCount)],\n                    },\n                ]\n                : []),\n            ...(filters.exactMemoryMib\n                ? [\n                    {\n                        name: \"memory-info.size-in-mib\",\n                        values: [String(filters.exactMemoryMib)],\n                    },\n                ]\n                : []),\n        ],\n    }, opts);\n    return instanceTypes.instanceTypes;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __abbreviateRegion(__0) {\n  return (function() {\n    with({ abbreviateRegion: __abbreviateRegion, this: undefined, arguments: undefined }) {\n\nreturn function /*abbreviateRegion*/(region) {\n    return region.replace(/gov|west|east|central|north|south|-/g, (match) => (match === \"-\" ? \"\" : match[0]));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getSubnetCIDR(__0) {\n  return (function() {\n    with({ config_2: __config_2, utils_1: __utils_1, getSubnetCIDR: __getSubnetCIDR, this: undefined, arguments: undefined }) {\n\nreturn function /*getSubnetCIDR*/(index, prefixLen = 20, vpc = config_2.VPC_CIDR) {\n    const cidr = (0, utils_1.parseCIDR)(vpc);\n    assert.strictEqual(cidr.prefixLen, 16);\n    const subnetLen = prefixLen - cidr.prefixLen;\n    assert(0 === index >> subnetLen && Number.isInteger(index));\n    assert(prefixLen >= 20 && prefixLen <= 28 && Number.isInteger(prefixLen));\n    const ip = (index << 12) >> (prefixLen - 20);\n    return `${cidr.ip[0]}.${cidr.ip[1]}.${ip >> 8}.${ip & 0xff}/${prefixLen}`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSubnet(__0, __1, __2, __3) {\n  return (function() {\n    with({ pulumi: __pulumi, abbreviateRegion: __abbreviateRegion, getSubnetCIDR: __getSubnetCIDR, createSubnet: __createSubnet, this: undefined, arguments: undefined }) {\n\nreturn function /*createSubnet*/(scope, availabilityZone, routeTable, index, prefixLen = 20, opts) {\n    const oldName = pulumi\n        .output(availabilityZone)\n        .apply((az) => `${scope}-${abbreviateRegion(az)}`);\n    const ip = index << (32 - prefixLen);\n    const name = `subnet-${scope}-${ip >> 8}.${ip & 0xff}/${prefixLen}`;\n    const cidrBlock = aws.ec2\n        .getVpcOutput({ id: routeTable.vpcId }, opts)\n        .cidrBlock.apply((cidr) => getSubnetCIDR(index, prefixLen, cidr));\n    const subnet = new aws.ec2.Subnet(name, {\n        availabilityZone,\n        cidrBlock,\n        mapPublicIpOnLaunch: scope === \"pub\",\n        tags: {\n            az: availabilityZone,\n            scope: scope,\n            Name: name,\n        },\n        vpcId: routeTable.vpcId,\n    }, pulumi.mergeOptions(opts, { aliases: [{ name: oldName }] }));\n    new aws.ec2.RouteTableAssociation(`${name}-assoc`, {\n        subnetId: subnet.id,\n        routeTableId: routeTable.id,\n    }, pulumi.mergeOptions(opts, {\n        aliases: [{ name: pulumi.interpolate `${oldName}-assoc` }],\n    }));\n    return subnet;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSubnets(__0, __1, __2, __3) {\n  return (function() {\n    with({ createSubnet: __createSubnet, createSubnets: __createSubnets, this: undefined, arguments: undefined }) {\n\nreturn function /*createSubnets*/(scope, azNames, routeTable, offset, prefixLen = 20, opts) {\n    return azNames.map((azName, index) => createSubnet(scope, azName, routeTable, offset + index, prefixLen, opts));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getZoneName(__0) {\n  return (function() {\n    with({ getZoneName: __getZoneName, this: undefined, arguments: undefined }) {\n\nreturn function /*getZoneName*/(hostname) {\n    const dot = hostname.indexOf(\".\");\n    const nextDot = hostname.indexOf(\".\", dot + 1);\n    return nextDot === -1 || nextDot === hostname.length - 1\n        ? hostname\n        : hostname.slice(dot + 1);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isPrivateZone(__0) {\n  return (function() {\n    with({ PRIVATE_ZONE_REGEX: __PRIVATE_ZONE_REGEX, isPrivateZone: __isPrivateZone, this: undefined, arguments: undefined }) {\n\nreturn function /*isPrivateZone*/(domain) {\n    return PRIVATE_ZONE_REGEX.test(domain);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getZone(__0, __1) {\n  return (function() {\n    with({ isPrivateZone: __isPrivateZone, getZone: __getZone, this: undefined, arguments: undefined }) {\n\nreturn function /*getZone*/(name, opts) {\n    return aws.route53.getZone({ name, privateZone: isPrivateZone(name) }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getHostedZoneForHost(__0, __1) {\n  return (function() {\n    with({ pulumi: __pulumi, getZoneName: __getZoneName, getZone: __getZone, getHostedZoneForHost: __getHostedZoneForHost, this: undefined, arguments: undefined }) {\n\nreturn function /*getHostedZoneForHost*/(host, opts) {\n    pulumi.log.debug(\"getHostedZoneForHost: \" + host);\n    const zoneName = getZoneName(host);\n    return pulumi.output(getZone(zoneName, opts).catch((err) => {\n        const parentZoneName = getZoneName(zoneName);\n        if (parentZoneName === zoneName) {\n            pulumi.log.error(`Route53 zone not found: ${zoneName}`);\n            throw err;\n        }\n        return getZone(parentZoneName, opts);\n    }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __dnsSafe(__0) {\n  return (function() {\n    with({ dnsSafe: __dnsSafe, this: undefined, arguments: undefined }) {\n\nreturn function /*dnsSafe*/(name) {\n    return name === null || name === void 0 ? void 0 : name.toLowerCase();\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __normalizeDns(__0) {\n  return (function() {\n    with({ dnsSafe: __dnsSafe, normalizeDns: __normalizeDns, this: undefined, arguments: undefined }) {\n\nreturn function /*normalizeDns*/(name) {\n    return dnsSafe(name.endsWith(\".\") ? name.slice(0, -1) : name);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst crypto_1 = require(\"crypto\");\n\nfunction __truncate(__0, __1) {\n  return (function() {\n    with({ truncate: __truncate, this: undefined, arguments: undefined }) {\n\nreturn function /*truncate*/(name, maxLen) {\n    if (name.length <= maxLen) {\n        return name;\n    }\n    const hashLength = 6;\n    assert(maxLen > hashLength, \"maxLen must be greater than hashLength\");\n    const prefix = name.substring(0, maxLen - hashLength);\n    const hash = (0, crypto_1.createHash)(\"sha256\").update(name).digest(\"hex\");\n    return prefix + hash.substring(0, hashLength);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createRecord(__0, __1, __2) {\n  return (function() {\n    with({ getHostedZoneForHost: __getHostedZoneForHost, safe_namings_1: __safe_namings_1, allowOverwrite: false, pulumi: __pulumi, retainOnDelete: false, createRecord: __createRecord, this: undefined, arguments: undefined }) {\n\nreturn function /*createRecord*/(name, args, opts) {\n    var _a;\n    assert(!args.records || args.ttl, \"You must set ttl when using records\");\n    const zone = (_a = args.zone) !== null && _a !== void 0 ? _a : getHostedZoneForHost(name, opts);\n    const normalized = (0, safe_namings_1.normalizeDns)(name);\n    return new aws.route53.Record(`${normalized}_${args.type}`, {\n        allowOverwrite,\n        name,\n        ...args,\n        zoneId: zone.id,\n    }, pulumi.mergeOptions({\n        aliases: [\n            { name },\n            { name: `${name}${args.type}` },\n            { name: `${name.replace(/\\.$/, \"\")}_${args.type}` },\n        ],\n        deleteBeforeReplace: true,\n        retainOnDelete,\n    }, opts));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __quoted(__0) {\n  return (function() {\n    with({ quoted: __quoted, this: undefined, arguments: undefined }) {\n\nreturn function /*quoted*/(value) {\n    const escaped = value.replace(/[\"\\\\]/g, \"\\\\$&\");\n    return `\"${escaped}\"`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createCaaDnsRecord(__0, __1, __2, __3) {\n  return (function() {\n    with({ createRecord: __createRecord, quoted: __quoted, time_1: __time_1, pulumi: __pulumi, createCaaDnsRecord: __createCaaDnsRecord, this: undefined, arguments: undefined }) {\n\nreturn function /*createCaaDnsRecord*/(hostname, zone, issueValue, opts) {\n    return createRecord(hostname, {\n        records: [`0 issue ${quoted(issueValue || \";\")}`],\n        ttl: time_1.HOUR,\n        type: \"CAA\",\n        zone,\n    }, pulumi.mergeOptions(opts, { aliases: [{ name: `caa-${hostname}` }] }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getOrCreate(__0, __1, __2) {\n  return (function() {\n    with({ getOrCreate: __getOrCreate, this: undefined, arguments: undefined }) {\n\nreturn function /*getOrCreate*/(map, key, create) {\n    const existing = map === null || map === void 0 ? void 0 : map.get(key);\n    if (existing !== undefined) {\n        return existing;\n    }\n    const value = create();\n    map === null || map === void 0 ? void 0 : map.set(key, value);\n    return value;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createValidationDnsRecord(__0, __1, __2) {\n  return (function() {\n    with({ route53_1: __route53_1, time_1: __time_1, pulumi: __pulumi, createValidationDnsRecord: __createValidationDnsRecord, this: undefined, arguments: undefined }) {\n\nreturn function /*createValidationDnsRecord*/(cdvo, zone, opts) {\n    return (0, route53_1.createRecord)(cdvo.resourceRecordName, {\n        records: [cdvo.resourceRecordValue],\n        ttl: 1 * time_1.MINUTE,\n        type: cdvo.resourceRecordType,\n        zone,\n    }, pulumi.mergeOptions(opts, {\n        deleteBeforeReplace: true,\n        retainOnDelete: false,\n    }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createCertificateDNS(__0, __1, __2) {\n  return (function() {\n    with({ pulumi: __pulumi, route53_1: __route53_1, utils_1: __utils_1, getOrCreate: __getOrCreate, createValidationDnsRecord: __createValidationDnsRecord, createCertificateDNS: __createCertificateDNS, this: undefined, arguments: undefined }) {\n\nreturn function /*createCertificateDNS*/(hostnames, args, opts) {\n    const domainName = hostnames[0];\n    assert(domainName, \"hostnames must not be empty\");\n    const certificate = new aws.acm.Certificate(domainName, {\n        domainName,\n        subjectAlternativeNames: hostnames.slice(1),\n        validationMethod: \"DNS\",\n    }, opts);\n    const { retainOnDelete: _, ...resourceOptions } = opts !== null && opts !== void 0 ? opts : {};\n    const route53Opts = (args === null || args === void 0 ? void 0 : args.route53Provider)\n        ? pulumi.mergeOptions(resourceOptions, { provider: args.route53Provider })\n        : resourceOptions;\n    const caaRecords = (args === null || args === void 0 ? void 0 : args.caa)\n        ? hostnames.map((hostname) => (0, route53_1.createCaaDnsRecord)(hostname, args.zone, \"amazon.com\", route53Opts))\n        : undefined;\n    const validationRecordFqdns = certificate.domainValidationOptions.apply((dvos) => {\n        const deduped = (0, utils_1.dedup)(dvos, (dvo) => dvo.resourceRecordName);\n        deduped.sort((a, b) => a.domainName.localeCompare(b.domainName));\n        return deduped.flatMap((dvo) => getOrCreate(args === null || args === void 0 ? void 0 : args.validationRecords, dvo.resourceRecordName, () => createValidationDnsRecord(dvo, args === null || args === void 0 ? void 0 : args.zone, route53Opts).fqdn));\n    });\n    const certificateValidation = new aws.acm.CertificateValidation(`${domainName}Validation`, {\n        certificateArn: certificate.arn,\n        validationRecordFqdns,\n    }, pulumi.mergeOptions(resourceOptions, { dependsOn: caaRecords }));\n    return { arn: certificateValidation.certificateArn };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAvailabilityZoneNames(__0) {\n  return (function() {\n    with({ config_2: __config_2, getAvailabilityZoneNames: __getAvailabilityZoneNames, this: undefined, arguments: undefined }) {\n\nreturn async function /*getAvailabilityZoneNames*/(opts) {\n    const azr = await aws.getAvailabilityZones({}, opts);\n    if (!azr.names.length) {\n        throw new Error(\"No availability zones in region \" + config_2.REGION);\n    }\n    return azr.names.sort();\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getRootOU(__0) {\n  return (function() {\n    with({ getRootOU: __getRootOU, this: undefined, arguments: undefined }) {\n\nreturn async function /*getRootOU*/(opts) {\n    const org = await aws.organizations.getOrganization(opts);\n    return org.roots[0].id;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __instanceTypeGroupKey(__0) {\n  return (function() {\n    with({ instanceTypeGroupKey: __instanceTypeGroupKey, this: undefined, arguments: undefined }) {\n\nreturn function /*instanceTypeGroupKey*/(instanceType) {\n    return instanceType.replace(/\\d+(g?)[inad]*\\./, \"$1-\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __groupInstanceTypes(__0) {\n  return (function() {\n    with({ utils_1: __utils_1, instanceTypeGroupKey: __instanceTypeGroupKey, groupInstanceTypes: __groupInstanceTypes, this: undefined, arguments: undefined }) {\n\nreturn function /*groupInstanceTypes*/(instanceTypes) {\n    return (0, utils_1.groupBy)(instanceTypes, instanceTypeGroupKey);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getInstanceTypeArch(__0) {\n  return (function() {\n    with({ getInstanceTypeArch: __getInstanceTypeArch, this: undefined, arguments: undefined }) {\n\nreturn function /*getInstanceTypeArch*/(instanceType) {\n    return /^a|\\dg/.test(instanceType) ? \"arm64\" : \"x86_64\";\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isGpuInstance(__0) {\n  return (function() {\n    with({ isGpuInstance: __isGpuInstance, this: undefined, arguments: undefined }) {\n\nreturn function /*isGpuInstance*/(instanceType) {\n    return /^(p|dl|trn|inf|g|f|vt)\\d/.test(instanceType);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAmiType(__0) {\n  return (function() {\n    with({ getInstanceTypeArch: __getInstanceTypeArch, isGpuInstance: __isGpuInstance, getAmiType: __getAmiType, this: undefined, arguments: undefined }) {\n\nreturn function /*getAmiType*/(instanceType) {\n    if (getInstanceTypeArch(instanceType) === \"arm64\") {\n        return \"AL2_ARM_64\";\n    }\n    else if (isGpuInstance(instanceType)) {\n        return \"AL2_x86_64_GPU\";\n    }\n    else {\n        return \"AL2_x86_64\";\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __makeArn(__0) {\n  return (function() {\n    with({ pulumi: __pulumi, config_2: __config_2, exports: __m, makeArn: __makeArn, this: undefined, arguments: undefined }) {\n\nreturn function /*makeArn*/(args) {\n    var _a, _b, _c;\n    return pulumi.concat(\"arn:\", args.partition || \"aws\", \":\", args.service, \":\", (_a = args.region) !== null && _a !== void 0 ? _a : config_2.REGION, \":\", (_b = args.accountId) !== null && _b !== void 0 ? _b : exports.callerAccountId, \":\", args.resource, args.resourceId === undefined ? \"\" : \"/\", (_c = args.resourceId) !== null && _c !== void 0 ? _c : \"\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __nameFromArn(__0) {\n  return (function() {\n    with({ nameFromArn: __nameFromArn, this: undefined, arguments: undefined }) {\n\nreturn function /*nameFromArn*/(arn) {\n    const slashIndex = arn.indexOf(\"/\");\n    return slashIndex !== -1 ? arn.substring(slashIndex + 1) : \"\";\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __logGroupArnToId(__0) {\n  return (function() {\n    with({ pulumi: __pulumi, logGroupArnToId: __logGroupArnToId, this: undefined, arguments: undefined }) {\n\nreturn function /*logGroupArnToId*/(logGroup) {\n    return logGroup\n        ? { id: pulumi.output(logGroup.arn).apply((lg) => lg.split(\":\")[6]) }\n        : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __logGroupIdToArn(__0) {\n  return (function() {\n    with({ config_2: __config_2, pulumi: __pulumi, exports: __m, logGroupIdToArn: __logGroupIdToArn, this: undefined, arguments: undefined }) {\n\nreturn function /*logGroupIdToArn*/(logGroup, region = config_2.REGION) {\n    return logGroup\n        ? {\n            arn: pulumi.interpolate `arn:aws:logs:${region}:${exports.callerAccountId}:log-group:${logGroup.id}`,\n        }\n        : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __stack() {\n  return (function() {\n    with({ stackPrefix: \"Defang-html-css-js-beta\", stackDirPrefix: \"/Defang/html-css-js/beta/\", stack: __stack, this: undefined, arguments: undefined }) {\n\nreturn function /*stack*/(name = \"\") {\n    assert(!name.startsWith(stackPrefix) && !name.startsWith(stackDirPrefix));\n    return name ? stackPrefix + \"-\" + name : stackPrefix;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __stackDir(__0) {\n  return (function() {\n    with({ stackPrefix: \"Defang-html-css-js-beta\", stackDirPrefix: \"/Defang/html-css-js/beta/\", stackDir: __stackDir, this: undefined, arguments: undefined }) {\n\nreturn function /*stackDir*/(name) {\n    assert(!name.startsWith(stackPrefix) && !name.startsWith(stackDirPrefix));\n    return stackDirPrefix + name;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst awsx = require(\"@pulumi/awsx/index.js\");\n\nfunction __createEcrRepository(__0, __1) {\n  return (function() {\n    with({ config_1: __config_1, time_1: __time_1, createEcrRepository: __createEcrRepository, this: undefined, arguments: undefined }) {\n\nreturn function /*createEcrRepository*/(name, opts) {\n    const isCache = name.endsWith(\"cache\");\n    const maximumAgeLimit = isCache ? Math.floor(config_1.imageCacheTTL / time_1.HOUR / 24) : 0;\n    return new awsx.ecr.Repository(name, {\n        encryptionConfigurations: [{ encryptionType: \"AES256\" }],\n        forceDelete: config_1.IS_DEV || isCache,\n        lifecyclePolicy: maximumAgeLimit\n            ? {\n                rules: [\n                    {\n                        description: `delete images after ${maximumAgeLimit} days`,\n                        maximumAgeLimit,\n                        tagStatus: \"any\",\n                    },\n                ],\n            }\n            : undefined,\n        imageScanningConfiguration: { scanOnPush: true },\n        name,\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __awsNameSafe(__0, __1) {\n  return (function() {\n    with({ safe_namings_1: __safe_namings_1, awsNameSafe: __awsNameSafe, this: undefined, arguments: undefined }) {\n\nreturn function /*awsNameSafe*/(name, length) {\n    return (0, safe_namings_1.truncate)(name.toLowerCase().replace(/[^a-z0-9-]/g, \"-\"), length);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createPrivateBucket(__0, __1, __2) {\n  return (function() {\n    with({ safe_namings_1: __0_safe_namings_1, config_1: __config_1, pulumi: __pulumi, createPrivateBucket: __createPrivateBucket, this: undefined, arguments: undefined }) {\n\nreturn function /*createPrivateBucket*/(name, args, opts) {\n    const bucketPrefix = (args === null || args === void 0 ? void 0 : args.bucket) ? undefined : (0, safe_namings_1.awsNameSafe)((0, config_1.stack)(name), 37);\n    const bucket = new aws.s3.Bucket(name, {\n        bucketPrefix,\n        serverSideEncryptionConfiguration: {\n            rule: {\n                applyServerSideEncryptionByDefault: {\n                    sseAlgorithm: \"AES256\",\n                },\n                bucketKeyEnabled: !config_1.IS_PROD,\n            },\n        },\n        forceDestroy: !config_1.IS_PROD,\n        ...args,\n    }, pulumi.mergeOptions({ retainOnDelete: config_1.IS_PROD }, opts));\n    new aws.s3.BucketPublicAccessBlock(`${name}-block`, {\n        bucket: bucket.id,\n        blockPublicAcls: true,\n        blockPublicPolicy: true,\n        ignorePublicAcls: true,\n        restrictPublicBuckets: true,\n    }, opts);\n    return bucket;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createLogGroup(__0, __1) {\n  return (function() {\n    with({ config_1: __config_1, createLogGroup: __createLogGroup, this: undefined, arguments: undefined }) {\n\nreturn function /*createLogGroup*/(name, opts) {\n    return new aws.cloudwatch.LogGroup(name, {\n        name: (0, config_1.stackDir)(name),\n        retentionInDays: config_1.retentionInDays,\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSecret(__0, __1, __2) {\n  return (function() {\n    with({ config_1: __config_1, createSecret: __createSecret, this: undefined, arguments: undefined }) {\n\nreturn function /*createSecret*/(name, args, opts) {\n    const secret = new aws.secretsmanager.Secret(name, {\n        namePrefix: (0, config_1.stackDir)(name),\n        recoveryWindowInDays: config_1.IS_DEV ? 0 : config_1.IS_PROD ? undefined : 7,\n        ...args,\n    }, opts);\n    return new aws.secretsmanager.SecretVersion(`${name}-version`, {\n        secretId: secret.id,\n        ...args,\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createDistribution(__0, __1, __2, __3) {\n  return (function() {\n    with({ common_1: __common_1, createDistribution: __createDistribution, this: undefined, arguments: undefined }) {\n\nreturn function /*createDistribution*/(name, args, certificate, opts) {\n    const dist = new aws.cloudfront.Distribution(name, {\n        comment: common_1.DefangComment,\n        enabled: true,\n        priceClass: \"PriceClass_100\",\n        restrictions: {\n            geoRestriction: {\n                restrictionType: \"none\",\n            },\n        },\n        viewerCertificate: {\n            cloudfrontDefaultCertificate: !certificate,\n            acmCertificateArn: certificate === null || certificate === void 0 ? void 0 : certificate.arn,\n            sslSupportMethod: certificate ? \"sni-only\" : undefined,\n        },\n        ...args,\n    }, opts);\n    return dist;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createBucketDistribution(__0, __1, __2, __3, __4) {\n  return (function() {\n    with({ createDistribution: __createDistribution, createBucketDistribution: __createBucketDistribution, this: undefined, arguments: undefined }) {\n\nreturn function /*createBucketDistribution*/(name, originBucket, args, certificate, opts) {\n    return createDistribution(name, {\n        aliases: [originBucket.bucket],\n        origins: [\n            {\n                customOriginConfig: {\n                    httpPort: 80,\n                    httpsPort: 443,\n                    originProtocolPolicy: \"http-only\",\n                    originSslProtocols: [\"TLSv1.2\"],\n                },\n                domainName: originBucket.websiteEndpoint,\n                originId: originBucket.arn,\n            },\n        ],\n        ...args,\n    }, certificate, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSecurityGroup(__0, __1, __2) {\n  return (function() {\n    with({ config_1: __config_1, common_1: __common_1, pulumi: __pulumi, createSecurityGroup: __createSecurityGroup, this: undefined, arguments: undefined }) {\n\nreturn function /*createSecurityGroup*/(name, args, opts) {\n    return new aws.ec2.SecurityGroup(name, {\n        name: (0, config_1.stack)(name),\n        description: common_1.DefangComment,\n        egress: [\n            {\n                cidrBlocks: [\"0.0.0.0/0\"],\n                description: \"Allow all outbound traffic\",\n                fromPort: 0,\n                protocol: \"-1\",\n                toPort: 0,\n            },\n        ],\n        ingress: [],\n        ...args,\n        vpcId: args.vpc.id,\n    }, pulumi.mergeOptions(opts, { ignoreChanges: [\"description\"] }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getRegistryInfoForEcrRepo(__0) {\n  return (function() {\n    with({ parseEcrRepo: __parseEcrRepo, pulumi: __pulumi, utils_1: __utils_1, getRegistryInfoForEcrRepo: __getRegistryInfoForEcrRepo, this: undefined, arguments: undefined }) {\n\nreturn function /*getRegistryInfoForEcrRepo*/(ecrRepo) {\n    const { registryId } = parseEcrRepo(ecrRepo);\n    const credentials = aws.ecr.getCredentialsOutput({ registryId });\n    return credentials.authorizationToken.apply((token) => pulumi.output({\n        server: credentials.proxyEndpoint,\n        ...(0, utils_1.parseBasicAuth)(token),\n    }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getErrorHtml(__0, __1, __2) {\n  return (function() {\n    with({ getErrorHtml: __getErrorHtml, this: undefined, arguments: undefined }) {\n\nreturn function /*getErrorHtml*/(title, h1, message) {\n    return `<!DOCTYPE html>\n<html>\n<head>\n    <title>Defang | ${title}</title>\n    <style>\n    body {\n        font-family: 'Exo', sans-serif;\n        background-color: #1d1d1d;\n        background-image: radial-gradient(circle at 50% 0, rgba(239, 152, 207, .2), rgba(0, 0, 0, 0) 57%), radial-gradient(circle at 0 20%, rgba(122, 167, 255, .25), rgba(0, 0, 0, 0) 42%);\n        color: #f1f3fa;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 100vh;\n        margin: 0;\n    }\n    .container {\n        text-align: center;\n    }\n    .message {\n        font-size: 1.5em;\n    }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n    <h1>${h1}</h1>\n    <p class=\"message\">${message}</p>\n    </div>\n</body>\n</html>`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createListener(__0, __1, __2) {\n  return (function() {\n    with({ error_1: __error_1, pulumi: __pulumi, config_1: __config_1, createListener: __createListener, this: undefined, arguments: undefined }) {\n\nreturn function /*createListener*/(name, args, opts) {\n    var _a;\n    return new aws.lb.Listener(name, {\n        certificateArn: (_a = args.certificate) === null || _a === void 0 ? void 0 : _a.arn,\n        defaultActions: [\n            {\n                type: \"fixed-response\",\n                fixedResponse: {\n                    contentType: \"text/html\",\n                    messageBody: (0, error_1.getErrorHtml)(\"404 Not Found\", \"Resource Not Found\", \"The service you are looking for doesn't exist or is pending deployment. Check its status or domain name.\"),\n                    statusCode: \"404\",\n                },\n            },\n        ],\n        loadBalancerArn: args.loadBalancer.arn,\n        port: args.certificate ? 443 : 80,\n        protocol: args.certificate ? \"HTTPS\" : \"HTTP\",\n        ...args,\n    }, pulumi.mergeOptions({\n        deleteBeforeReplace: true,\n        replaceOnChanges: config_1.IS_DEV && args.certificate ? [\"certificateArn\"] : [],\n    }, opts));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getLoadBalancerCIDRs(__0) {\n  return (function() {\n    with({ pulumi: __pulumi, getLoadBalancerCIDRs: __getLoadBalancerCIDRs, this: undefined, arguments: undefined }) {\n\nreturn function /*getLoadBalancerCIDRs*/(lb) {\n    return lb.subnetMappings.apply((sm) => sm.map((m) => pulumi.output(m.privateIpv4Address\n        ? m.privateIpv4Address + \"/32\"\n        : aws.ec2.getSubnetOutput({ id: m.subnetId }).cidrBlock)));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __clusterArnToServicePrefix(__0) {\n  return (function() {\n    with({ clusterArnToServicePrefix: __clusterArnToServicePrefix, this: undefined, arguments: undefined }) {\n\nreturn function /*clusterArnToServicePrefix*/(clusterArn) {\n    return clusterArn.replace(/:cluster(\\/.+)cluster$/, \":service$1\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createECSLifeCycleEventRule(__0, __1, __2) {\n  return (function() {\n    with({ pulumi: __pulumi, clusterArnToServicePrefix: __clusterArnToServicePrefix, createECSLifeCycleEventRule: __createECSLifeCycleEventRule, this: undefined, arguments: undefined }) {\n\nreturn function /*createECSLifeCycleEventRule*/(ruleName, cluster, opts) {\n    return new aws.cloudwatch.EventRule(ruleName, {\n        description: pulumi.interpolate `Capture ECS task lifecycle events of cluster ${cluster.arn}`,\n        eventPattern: pulumi.jsonStringify({\n            source: [\"aws.ecs\"],\n            \"detail-type\": [\n                \"ECS Task State Change\",\n                \"ECS Service Action\",\n                \"ECS Deployment State Change\",\n            ],\n            $or: [\n                {\n                    resources: [\n                        {\n                            prefix: pulumi\n                                .output(cluster.arn)\n                                .apply(clusterArnToServicePrefix),\n                        },\n                    ],\n                },\n                {\n                    detail: {\n                        clusterArn: [cluster.arn],\n                    },\n                },\n            ],\n        }),\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f3() {\n  return (function() {\n    with({ m: __m, k: \"parseEcrRepo\", this: undefined, arguments: undefined }) {\n\nreturn function () { return m[k]; };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst oci_registry_client_1 = require(\"oci-registry-client/build/index.js\");\n\nfunction __getImageManifest(__0, __1, __2) {\n  return (function() {\n    with({ getImageManifest: __getImageManifest, this: undefined, arguments: undefined }) {\n\nreturn async function /*getImageManifest*/(repo, tag, auth) {\n    const registryClient = new oci_registry_client_1.RegistryClientV2({\n        name: repo,\n        ...auth,\n    });\n    const resp = await registryClient.getManifest({\n        ref: tag || \"latest\",\n    });\n    return resp;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSha256(__0) {\n  return (function() {\n    with({ createSha256: __createSha256, this: undefined, arguments: undefined }) {\n\nreturn function /*createSha256*/(data) {\n    return (0, crypto_1.createHash)(\"sha256\").update(data).digest(\"hex\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createDigest(__0) {\n  return (function() {\n    with({ createSha256: __createSha256, createDigest: __createDigest, this: undefined, arguments: undefined }) {\n\nreturn function /*createDigest*/(data) {\n    return `sha256:${createSha256(data)}`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getImageManifestDigest(__0, __1, __2) {\n  return (function() {\n    with({ getImageManifest: __getImageManifest, types_1: __types_1, getImageManifestDigest: __getImageManifestDigest, this: undefined, arguments: undefined }) {\n\nreturn async function /*getImageManifestDigest*/(repo, tag, auth) {\n    var _a;\n    const { resp } = await getImageManifest(repo, tag, auth);\n    return ((_a = resp.headers.get(\"docker-content-digest\")) !== null && _a !== void 0 ? _a : (0, types_1.createDigest)(await resp.dockerBody()));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst client_ecr_1 = require(\"@aws-sdk/client-ecr/dist-cjs/index.js\");\n\nfunction __getImageDigestPromise(__0) {\n  return (function() {\n    with({ aws_1: __aws_1, pulumi: __pulumi, image_1: __image_1, getImageDigestPromise: __getImageDigestPromise, this: undefined, arguments: undefined }) {\n\nreturn async function /*getImageDigestPromise*/(repositoryUrl, imageTag = \"latest\") {\n    try {\n        const { registryId, region, repositoryName } = (0, aws_1.parseEcrRepo)(repositoryUrl);\n        const client = new client_ecr_1.ECRClient({ region });\n        const resp = await client.send(new client_ecr_1.BatchGetImageCommand({\n            registryId,\n            repositoryName,\n            imageIds: [{ imageTag }],\n        }));\n        if (resp.failures && resp.failures.length > 0) {\n            throw new Error(`Failed to get image from ECR: ${resp.failures\n                .map((f) => f.failureReason)\n                .join(\", \")}`);\n        }\n        if (!resp.images || resp.images.length === 0) {\n            throw new Error(`No images found in ECR for ${repositoryUrl}:${imageTag}`);\n        }\n        return resp.images[0].imageId.imageDigest;\n    }\n    catch (error) {\n        if (error instanceof Error) {\n            pulumi.log.info(`${error.message}; trying OCI ${repositoryUrl} with imageTag ${imageTag}`);\n        }\n        return (0, image_1.getImageManifestDigest)(repositoryUrl, imageTag);\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst promises_1 = require(\"timers/promises\");\n\nfunction __getFullBuiltImageUrl(__0) {\n  return (function() {\n    with({ utils_1: __utils_1, image_digest_1: __image_digest_1, getFullBuiltImageUrl: __getFullBuiltImageUrl, this: undefined, arguments: undefined }) {\n\nreturn async function /*getFullBuiltImageUrl*/(imageUrl) {\n    imageUrl = imageUrl.replace(/^(index|registry)\\.docker\\.io/, \"docker.io\");\n    const imageInfo = (0, utils_1.parseImage)(imageUrl);\n    const errors = [];\n    for (let attempt = 0; attempt < 3; attempt++) {\n        try {\n            if (attempt > 0)\n                await (0, promises_1.setTimeout)(2000 * attempt);\n            const imageDigest = await (0, image_digest_1.getImageDigestPromise)(imageInfo.image, imageInfo.tag);\n            const url = imageInfo.image + \":\" + imageInfo.tag + \"@\" + imageDigest;\n            return url;\n        }\n        catch (e) {\n            const message = e instanceof Error ? e.message : String(e);\n            errors.push(`Attempt ${attempt + 1} : ${message}`);\n        }\n    }\n    throw new Error(`Failed to get image digest for ${imageUrl} after 3 attempts: ${errors.join(\"; \")}`);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f2(__0) {\n  return (function() {\n    with({ startBuild: __startBuild, waitForBuilds: __waitForBuilds, getUnsuccessfulPhase: __getUnsuccessfulPhase, getFullBuiltImageUrl: __getFullBuiltImageUrl, this: undefined, arguments: undefined }) {\n\nreturn async function /*create*/(inputs) {\n        const client = new awsCodeBuildSdk.CodeBuildClient({\n            region: inputs.region,\n        });\n        const maxWaitTime = inputs.maxWaitTime;\n        const attempts = 2;\n        let buildId = \"\";\n        const errors = [];\n        for (let attempt = 0; attempt < attempts; attempt++) {\n            try {\n                await (0, promises_1.setTimeout)(attempt == 0 ? 3000 : 5000 * attempt);\n                buildId = await startBuild(client, inputs.projectName);\n                await waitForBuilds({ maxWaitTime }, [buildId], inputs.region);\n                break;\n            }\n            catch (e) {\n                const message = e instanceof Error ? e.message : String(e);\n                if (buildId) {\n                    const phase = await getUnsuccessfulPhase(client, buildId);\n                    if ((phase === null || phase === void 0 ? void 0 : phase.phaseType) === \"BUILD\") {\n                        throw new Error(`Build failed: ${message}`);\n                    }\n                }\n                errors.push(`Attempt ${attempt + 1}: ${message}`);\n            }\n        }\n        if (errors.length === attempts) {\n            throw new Error(`Failed to run CodeBuild build after 2 attempts: ${errors.join(\"; \")}`);\n        }\n        const image = await getFullBuiltImageUrl(inputs.destination);\n        return {\n            id: inputs.projectName,\n            outs: { ...inputs, buildId, image },\n        };\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f17(__0, __1, __2) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn async function /*update*/(_id, olds, inputs) {\n        return { outs: { ...inputs, buildId: olds.buildId, image: olds.image } };\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f0() {\n  return (function() {\n    with({ provider: __provider, this: undefined, arguments: undefined }) {\n\nreturn () => provider;\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n",
                        "baseImage": "aws/codebuild/amazonlinux-x86_64-standard:5.0",
                        "context": "s3://defang-cd-bucket-cybpbzz8hzm7/uploads/sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                        "destination": "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:app-image-ca933ed5-x86_64",
                        "dockerfile": "Dockerfile",
                        "logGroup": "/Defang/html-css-js/beta/builds",
                        "logStreamPrefix": "app-image/app_y59beapk17nz",
                        "platforms": [
                            "linux/amd64"
                        ],
                        "preBuildSteps": [
                            "tar -xzf sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz -C $CODEBUILD_SRC_DIR",
                            "rm sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                            "mkdir -p /root/.docker",
                            "echo '{\"credHelpers\":{\"public.ecr.aws\":\"ecr-login\",\"123456789012.dkr.ecr.us-west-2.amazonaws.com\":\"ecr-login\"}}' > /root/.docker/config.json"
                        ],
                        "projectName": "app-image-10c2c96",
                        "region": "us-west-2",
                        "repositoryUrl": "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build",
                        "taskRole": "Defang-html-css-js-beta-code-build-roleus-west-2",
                        "triggers": [
                            "app-image-10c2c96",
                            "s3://defang-cd-bucket-cybpbzz8hzm7/uploads/sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                            "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:app-image-ca933ed5-x86_64",
                            "aws/codebuild/amazonlinux-x86_64-standard:5.0",
                            "ca933ed5"
                        ]
                    },
                    "outputs": {
                        "__provider": "exports.handler = __f0;\n\nvar __provider_proto = {};\nObject.defineProperty(__f1, \"prototype\", { value: __provider_proto });\nObject.defineProperty(__provider_proto, \"constructor\", { configurable: true, writable: true, value: __f1 });\nvar __waitForBuildDone_1 = {waitUntilBuildDone: __waitUntilBuildDone};\nvar __IMAGE_REGEX = new RegExp(\"^((?:((?:[0-9a-z](?:[0-9a-z-]{0,61}[0-9a-z])?\\\\.)+[a-z]{2,63})\\\\/)?(.{1,127}?))(?::(\\\\w[\\\\w.-]{0,127}))?(?:@(sha256:[0-9a-f]{64}))?$\", \"\");\nvar __utils_1 = {parseImage: __parseImage, parseCIDR: __parseCIDR, dedup: __dedup, groupBy: __groupBy, parseBasicAuth: __parseBasicAuth};\nvar __aws_1 = {};\nvar __ecrRepoRegex = new RegExp(\"^(\\\\d+)\\\\.dkr\\\\.ecr\\\\.([^.]+)\\\\.amazonaws\\\\.com\\\\/([^:@]+)\", \"\");\nvar __m = {};\nObject.defineProperty(__m, \"__esModule\", { value: true });\n__m.callerAccountId = \"123456789012\";\nvar __m_callerAccountRootArn_proto = {};\nObject.defineProperty(__f4, \"prototype\", { value: __m_callerAccountRootArn_proto });\nObject.defineProperty(__m_callerAccountRootArn_proto, \"constructor\", { configurable: true, writable: true, value: __f4 });\nObject.defineProperty(__m_callerAccountRootArn_proto, \"apply\", { configurable: true, writable: true, value: __f5 });\nObject.defineProperty(__m_callerAccountRootArn_proto, \"get\", { configurable: true, writable: true, value: __f6 });\nvar __m_callerAccountRootArn = Object.create(__m_callerAccountRootArn_proto);\n__m_callerAccountRootArn.value = \"arn:aws:iam::123456789012:root\";\n__m.callerAccountRootArn = __m_callerAccountRootArn;\n__m.fromArn = __fromArn;\n__m.fromId = __fromId;\n__m.getCallerAccountId = __getCallerAccountId;\nvar __config_2 = {REGION: \"us-west-2\", VPC_CIDR: \"10.0.0.0/16\"};\n__m.createRoleProvider = __createRoleProvider;\nObject.defineProperty(__f7, \"isInstance\", { configurable: true, writable: true, value: __f8 });\nObject.defineProperty(__f10, \"isInstance\", { configurable: true, writable: true, value: __f11 });\nObject.setPrototypeOf(__f10, global.Error);\nvar __f9_prototype = {};\nObject.defineProperty(__f9_prototype, \"constructor\", { configurable: true, writable: true, value: __f9 });\nObject.defineProperty(__f9_prototype, \"get\", { configurable: true, writable: true, value: __f12 });\nObject.defineProperty(__f9_prototype, \"apply\", { configurable: true, writable: true, value: __f13 });\nObject.defineProperty(__f9, \"prototype\", { value: __f9_prototype });\nObject.defineProperty(__f9, \"create\", { configurable: true, writable: true, value: __f14 });\nObject.defineProperty(__f9, \"isInstance\", { configurable: true, writable: true, value: __f15 });\nObject.defineProperty(__f9, \"getPromisedValue\", { configurable: true, writable: true, value: __f16 });\nvar __pulumi = {interpolate: __interpolate, output: __output, mergeOptions: __mergeOptions, log: require(\"@pulumi/pulumi/log/index.js\"), concat: __concat, jsonStringify: __jsonStringify};\n__m.getEcrPrivateRegistry = __getEcrPrivateRegistry;\n__m.getAmiByID = __getAmiByID;\n__m.getAwsComputeDomain = __getAwsComputeDomain;\n__m.getInstanceTypes = __getInstanceTypes;\n__m.abbreviateRegion = __abbreviateRegion;\n__m.createSubnets = __createSubnets;\n__m.createSubnet = __createSubnet;\nvar __PRIVATE_ZONE_REGEX = new RegExp(\"\\\\b(intranet|internal|private|corp|home|home\\\\.arpa|lan|local)\\\\.?$\", \"\");\nvar __safe_namings_1 = {normalizeDns: __normalizeDns, truncate: __truncate};\nvar __time_1 = {HOUR: 3600, MINUTE: 60};\nvar __route53_1 = {createCaaDnsRecord: __createCaaDnsRecord, createRecord: __createRecord};\n__m.createCertificateDNS = __createCertificateDNS;\n__m.getAvailabilityZoneNames = __getAvailabilityZoneNames;\n__m.getRootOU = __getRootOU;\n__m.groupInstanceTypes = __groupInstanceTypes;\n__m.getInstanceTypeArch = __getInstanceTypeArch;\n__m.isGpuInstance = __isGpuInstance;\n__m.getAmiType = __getAmiType;\n__m.makeArn = __makeArn;\n__m.nameFromArn = __nameFromArn;\n__m.logGroupArnToId = __logGroupArnToId;\n__m.logGroupIdToArn = __logGroupIdToArn;\nvar __config_1 = {imageCacheTTL: 604800, IS_DEV: true, stack: __stack, IS_PROD: false, stackDir: __stackDir, retentionInDays: 1};\n__m.createEcrRepository = __createEcrRepository;\nvar __0_safe_namings_1 = {awsNameSafe: __awsNameSafe};\n__m.createPrivateBucket = __createPrivateBucket;\n__m.createLogGroup = __createLogGroup;\n__m.createSecret = __createSecret;\nvar __common_1 = {DefangComment: \"Managed by Defang\"};\n__m.createBucketDistribution = __createBucketDistribution;\n__m.createDistribution = __createDistribution;\n__m.createSecurityGroup = __createSecurityGroup;\n__m.getRegistryInfoForEcrRepo = __getRegistryInfoForEcrRepo;\n__m.parseEcrRepo = __parseEcrRepo;\nvar __error_1 = {getErrorHtml: __getErrorHtml};\n__m.createListener = __createListener;\n__m.getLoadBalancerCIDRs = __getLoadBalancerCIDRs;\n__m.createECSLifeCycleEventRule = __createECSLifeCycleEventRule;\nObject.defineProperty(__aws_1, \"parseEcrRepo\", { enumerable: true, get: __f3 });\nvar __types_1 = {createDigest: __createDigest};\nvar __image_1 = {getImageManifestDigest: __getImageManifestDigest};\nvar __image_digest_1 = {getImageDigestPromise: __getImageDigestPromise};\nObject.defineProperty(__provider_proto, \"create\", { configurable: true, writable: true, value: __f2 });\nObject.defineProperty(__provider_proto, \"update\", { configurable: true, writable: true, value: __f17 });\nvar __provider = Object.create(__provider_proto);\n\nfunction __f1() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/() { };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst awsCodeBuildSdk = require(\"@aws-sdk/client-codebuild/dist-cjs/index.js\");\n\nfunction __startBuild(__0, __1) {\n  return (function() {\n    with({ startBuild: __startBuild, this: undefined, arguments: undefined }) {\n\nreturn async function /*startBuild*/(client, projectName) {\n    var _a;\n    const command = new awsCodeBuildSdk.StartBuildCommand({\n        autoRetryLimitOverride: 0,\n        projectName,\n    });\n    const data = await client.send(command);\n    if (!((_a = data.build) === null || _a === void 0 ? void 0 : _a.id)) {\n        throw new Error(\"Failed to start build\");\n    }\n    return data.build.id;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getBuildPhaseErrorContexts(__0) {\n  return (function() {\n    with({ getBuildPhaseErrorContexts: __getBuildPhaseErrorContexts, this: undefined, arguments: undefined }) {\n\nreturn function /*getBuildPhaseErrorContexts*/(result) {\n    var _a;\n    return (_a = result === null || result === void 0 ? void 0 : result.builds) === null || _a === void 0 ? void 0 : _a.flatMap((build) => { var _a; return (_a = build.phases) !== null && _a !== void 0 ? _a : []; }).flatMap((phase) => phase.phaseStatus !== \"SUCCEEDED\" ? phase.contexts : []).flatMap((context) => (context === null || context === void 0 ? void 0 : context.message) || []).join(\"\\n\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst awsSdk = require(\"@aws-sdk/client-codebuild/dist-cjs/index.js\");\nconst util_waiter_1 = require(\"@smithy/util-waiter/dist-cjs/index.js\");\n\nfunction __checkState(__0, __1) {\n  return (function() {\n    with({ getBuildPhaseErrorContexts: __getBuildPhaseErrorContexts, checkState: __checkState, this: undefined, arguments: undefined }) {\n\nreturn async function /*checkState*/(client, input) {\n    var _a, _b;\n    let reason;\n    try {\n        const result = await client.send(new awsSdk.BatchGetBuildsCommand(input));\n        reason = getBuildPhaseErrorContexts(result);\n        try {\n            const status = (_b = (_a = result.builds) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.buildStatus;\n            if (status === \"SUCCEEDED\") {\n                return { state: util_waiter_1.WaiterState.SUCCESS, reason };\n            }\n            else if (status === \"TIMED_OUT\") {\n                return { state: util_waiter_1.WaiterState.TIMEOUT, reason };\n            }\n            else if (status === \"IN_PROGRESS\") {\n                return { state: util_waiter_1.WaiterState.RETRY, reason };\n            }\n            else {\n                return { state: util_waiter_1.WaiterState.FAILURE, reason };\n            }\n        }\n        catch (e) { }\n    }\n    catch (exception) {\n        reason = exception;\n    }\n    return { state: util_waiter_1.WaiterState.RETRY, reason };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __waitUntilBuildDone(__0, __1) {\n  return (function() {\n    with({ checkState: __checkState, waitUntilBuildDone: __waitUntilBuildDone, this: undefined, arguments: undefined }) {\n\nreturn async function /*waitUntilBuildDone*/(params, input) {\n    const serviceDefaults = { minDelay: 15, maxDelay: 120 };\n    const result = await (0, util_waiter_1.createWaiter)({ ...serviceDefaults, ...params }, input, checkState);\n    return (0, util_waiter_1.checkExceptions)(result);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __waitForBuilds(__0, __1, __2) {\n  return (function() {\n    with({ waitForBuildDone_1: __waitForBuildDone_1, waitForBuilds: __waitForBuilds, this: undefined, arguments: undefined }) {\n\nreturn async function /*waitForBuilds*/(inputs, ids, region) {\n    const client = new awsCodeBuildSdk.CodeBuildClient({ region });\n    const waitResult = await (0, waitForBuildDone_1.waitUntilBuildDone)({\n        abortSignal: inputs.abortSignal,\n        client,\n        maxDelay: 1,\n        maxWaitTime: inputs.maxWaitTime || 1200,\n        minDelay: 1,\n    }, { ids });\n    return waitResult;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getUnsuccessfulPhase(__0, __1) {\n  return (function() {\n    with({ getUnsuccessfulPhase: __getUnsuccessfulPhase, this: undefined, arguments: undefined }) {\n\nreturn async function /*getUnsuccessfulPhase*/(client, buildId) {\n    var _a, _b;\n    const command = new awsCodeBuildSdk.BatchGetBuildsCommand({ ids: [buildId] });\n    const data = await client.send(command);\n    const build = (_a = data.builds) === null || _a === void 0 ? void 0 : _a[0];\n    if (!build) {\n        throw new Error(`Build ${buildId} not found`);\n    }\n    return (_b = build.phases) === null || _b === void 0 ? void 0 : _b.find((phase) => phase.phaseStatus !== \"SUCCEEDED\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst assert = require(\"assert\");\n\nfunction __parseImage(__0) {\n  return (function() {\n    with({ IMAGE_REGEX: __IMAGE_REGEX, parseImage: __parseImage, this: undefined, arguments: undefined }) {\n\nreturn function /*parseImage*/(img) {\n    const match = img.match(IMAGE_REGEX);\n    if (!match) {\n        throw new Error(\"invalid container image name: \" + img);\n    }\n    const [_, image, registry, repo, tag, digest] = match;\n    assert(image && repo);\n    return { registry, image, repo, digest, tag };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __parseCIDR(__0) {\n  return (function() {\n    with({ parseCIDR: __parseCIDR, this: undefined, arguments: undefined }) {\n\nreturn function /*parseCIDR*/(cidr) {\n    const [o0, o1, o2, o3, prefixLen = 32] = cidr\n        .split(/[./]/)\n        .map((o) => parseInt(o));\n    if (prefixLen < 0 || prefixLen > 32) {\n        throw new Error(`invalid CIDR prefix length: ${prefixLen}`);\n    }\n    return { ip: [o0, o1, o2, o3], prefixLen };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __dedup(__0, __1) {\n  return (function() {\n    with({ dedup: __dedup, this: undefined, arguments: undefined }) {\n\nreturn function /*dedup*/(ar, transform) {\n    const seen = new Set();\n    return ar.filter((o) => {\n        const key = transform(o);\n        const before = seen.size;\n        return seen.add(key).size !== before;\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __groupBy(__0, __1) {\n  return (function() {\n    with({ groupBy: __groupBy, this: undefined, arguments: undefined }) {\n\nreturn function /*groupBy*/(array, fn) {\n    const map = new Map();\n    for (const item of array) {\n        const key = fn(item);\n        const ar = map.get(key);\n        if (ar) {\n            ar.push(item);\n        }\n        else {\n            map.set(key, [item]);\n        }\n    }\n    return map;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __parseBasicAuth(__0) {\n  return (function() {\n    with({ parseBasicAuth: __parseBasicAuth, this: undefined, arguments: undefined }) {\n\nreturn function /*parseBasicAuth*/(authToken) {\n    const decoded = Buffer.from(authToken, \"base64\").toString();\n    const colon = decoded.indexOf(\":\");\n    assert(colon >= 0, \"invalid basic auth token: missing colon\");\n    return {\n        username: decoded.slice(0, colon),\n        password: decoded.slice(colon + 1),\n    };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __parseEcrRepo(__0) {\n  return (function() {\n    with({ ecrRepoRegex: __ecrRepoRegex, parseEcrRepo: __parseEcrRepo, this: undefined, arguments: undefined }) {\n\nreturn function /*parseEcrRepo*/(ecrRepo) {\n    var _a;\n    const [_, registryId, region, repositoryName,] = (_a = ecrRepo.match(ecrRepoRegex)) !== null && _a !== void 0 ? _a : [];\n    if (!registryId || !region || !repositoryName) {\n        throw new Error(\"not an ECR repository URL: \" + ecrRepo);\n    }\n    return { registryId, repositoryName, region };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f4(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/(value) {\n        this.value = value;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f5(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*apply*/(func) {\n        throw new Error(\"'apply' is not allowed from inside a cloud-callback. Use 'get' to retrieve the value of this Output directly.\");\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f6() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*get*/() {\n        return this.value;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __fromArn(__0) {\n  return (function() {\n    with({ fromArn: __fromArn, this: undefined, arguments: undefined }) {\n\nreturn function /*fromArn*/(arn) {\n    return arn ? { arn } : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __fromId(__0) {\n  return (function() {\n    with({ fromId: __fromId, this: undefined, arguments: undefined }) {\n\nreturn function /*fromId*/(id) {\n    return id ? { id } : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst aws = require(\"@pulumi/aws/index.js\");\n\nfunction __getCallerAccountId(__0) {\n  return (function() {\n    with({ getCallerAccountId: __getCallerAccountId, this: undefined, arguments: undefined }) {\n\nreturn async function /*getCallerAccountId*/(opts) {\n    const caller = await aws.getCallerIdentity({}, opts);\n    return caller.accountId;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createRoleProvider(__0, __1, __2) {\n  return (function() {\n    with({ config_2: __config_2, createRoleProvider: __createRoleProvider, this: undefined, arguments: undefined }) {\n\nreturn function /*createRoleProvider*/(name, role, opts) {\n    return new aws.Provider(name, {\n        region: config_2.REGION,\n        assumeRole: {\n            roleArn: role.arn,\n        },\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f7() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/() {\n        /**\n         * A private field to help with RTTI that works in SxS scenarios.\n         *\n         * This is internal instead of being truly private, to support mixins and our serialization model.\n         *\n         * @internal\n         */\n        // eslint-disable-next-line @typescript-eslint/naming-convention,no-underscore-dangle,id-blacklist,id-match\n        this.__pulumiUnknown = true;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst utils = require(\"@pulumi/pulumi/utils.js\");\n\nfunction __f8(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*isInstance*/(obj) {\n        return utils.isInstance(obj, \"__pulumiUnknown\");\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isUnknown(__0) {\n  return (function() {\n    with({ Unknown: __f7, isUnknown: __isUnknown, this: undefined, arguments: undefined }) {\n\nreturn function /*isUnknown*/(val) {\n    return Unknown.isInstance(val);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst __pulumi_closure_import_exports = require(\"@pulumi/pulumi/output.js\");\n\nfunction __createSimpleOutput(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, createSimpleOutput: __createSimpleOutput, this: undefined, arguments: undefined }) {\n\nreturn function /*createSimpleOutput*/(val) {\n    return new exports.Output(new Set(), val instanceof Promise ? val : Promise.resolve(val), \n    /*isKnown*/ Promise.resolve(true), \n    /*isSecret */ Promise.resolve(false), Promise.resolve(new Set()));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAllResources(__0) {\n  return (function() {\n    with({ getAllResources: __getAllResources, this: undefined, arguments: undefined }) {\n\nreturn function /*getAllResources*/(op) {\n    return op.allResources instanceof Function ? op.allResources() : Promise.resolve(op.resources());\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __copyResources(__0) {\n  return (function() {\n    with({ copyResources: __copyResources, this: undefined, arguments: undefined }) {\n\nreturn function /*copyResources*/(resources) {\n    const copy = Array.isArray(resources)\n        ? new Set(resources)\n        : resources instanceof Set\n            ? new Set(resources)\n            : new Set([resources]);\n    return copy;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __containsUnknowns(__0) {\n  return (function() {\n    with({ isUnknown: __isUnknown, containsUnknowns: __containsUnknowns, this: undefined, arguments: undefined }) {\n\nreturn function /*containsUnknowns*/(value) {\n    return impl(value, new Set());\n    function impl(val, seen) {\n        if (val === null || typeof val !== \"object\") {\n            return false;\n        }\n        else if (isUnknown(val)) {\n            return true;\n        }\n        else if (seen.has(val)) {\n            return false;\n        }\n        seen.add(val);\n        if (val instanceof Array) {\n            return val.some((e) => impl(e, seen));\n        }\n        else {\n            return Object.keys(val).some((k) => impl(val[k], seen));\n        }\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __liftInnerOutput(__0, __1, __2, __3) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, getAllResources: __getAllResources, liftInnerOutput: __liftInnerOutput, this: undefined, arguments: undefined }) {\n\nreturn async function /*liftInnerOutput*/(allResources, value, isKnown, isSecret) {\n    if (!exports.Output.isInstance(value)) {\n        // 'value' itself wasn't an output, no need to transform any of the data we got.\n        return { allResources, value, isKnown, isSecret };\n    }\n    // 'value' was an Output.  So we unwrap that to get the inner value/isKnown/isSecret/resources\n    // returned by that Output and merge with the state passed in to get the state of the final Output.\n    // Note: we intentionally await all the promises of the inner output. This way we properly\n    // propagate any rejections of any of these promises through the outer output as well.\n    const innerValue = await value.promise(/*withUnknowns*/ true);\n    const innerIsKnown = await value.isKnown;\n    const innerIsSecret = await (value.isSecret || Promise.resolve(false));\n    // If we're working with a new-style output, grab all its resources and merge into ours.\n    // Otherwise, if this is an old-style output, just grab the resources it was known to have\n    // at construction time.\n    const innerResources = await getAllResources(value);\n    const totalResources = utils.union(allResources, innerResources);\n    return {\n        allResources: totalResources,\n        value: innerValue,\n        isKnown: innerIsKnown,\n        isSecret: isSecret || innerIsSecret,\n    };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f10() {\n  return (function() {\n    with({ __super: global.Error, this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/() {\n    __super.call(this, `Calling [toString] on an [Output<T>] is not supported.\n\nTo get the value of an Output<T> as an Output<string> consider either:\n1: o.apply(v => \\`prefix\\${v}suffix\\`)\n2: pulumi.interpolate \\`prefix\\${v}suffix\\`\n\nSee https://www.pulumi.com/docs/concepts/inputs-outputs for more details.\n\nOr use ESLint with https://github.com/pulumi/eslint-plugin-pulumi to warn or\nerror lint on using Output<T> in template literals.`);\n    /**\n     * A private field to help with RTTI that works in SxS scenarios.\n     *\n     * This is internal instead of being truly private, to support mixins and our serialization model.\n     *\n     * @internal\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention,no-underscore-dangle,id-blacklist,id-match\n    this.__pulumiOutputToStringError = true;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f11(__0) {\n  return (function() {\n    with({ __super: global.Error, this: undefined, arguments: undefined }) {\n\nreturn function /*isInstance*/(obj) {\n    return utils.isInstance(obj, \"__pulumiOutputToStringError\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f9(__0, __1, __2, __3, __4) {\n  return (function() {\n    with({ copyResources: __copyResources, containsUnknowns: __containsUnknowns, liftInnerOutput: __liftInnerOutput, OutputImpl: __f9, OutputToStringError: __f10, isUnknown: __isUnknown, exports: __pulumi_closure_import_exports, this: undefined, arguments: undefined }) {\n\nreturn function /*constructor*/(resources, promise, isKnown, isSecret, allResources) {\n        /**\n         * A private field to help with RTTI that works in SxS scenarios.\n         *\n         * This is internal instead of being truly private, to support mixins and our serialization model.\n         *\n         * @internal\n         */\n        // eslint-disable-next-line @typescript-eslint/naming-convention,no-underscore-dangle,id-blacklist,id-match\n        this.__pulumiOutput = true;\n        // Always create a copy so that no one accidentally modifies our Resource list.\n        const resourcesCopy = copyResources(resources);\n        // Create a copy of the async resources.  Populate this with the sync-resources if that's\n        // all we have.  That way this is always ensured to be a superset of the list of sync resources.\n        allResources = allResources || Promise.resolve([]);\n        const allResourcesCopy = allResources.then((r) => utils.union(copyResources(r), resourcesCopy));\n        // We are only known if we are not explicitly unknown and the resolved value of the output\n        // contains no distinguished unknown values.\n        isKnown = Promise.all([isKnown, promise]).then(([known, val]) => known && !containsUnknowns(val));\n        const lifted = Promise.all([allResourcesCopy, promise, isKnown, isSecret]).then(([liftedResources, value, liftedIsKnown, liftedIsSecret]) => liftInnerOutput(liftedResources, value, liftedIsKnown, liftedIsSecret));\n        this.resources = () => resourcesCopy;\n        this.allResources = () => lifted.then((l) => l.allResources);\n        this.isKnown = lifted.then((l) => l.isKnown);\n        this.isSecret = lifted.then((l) => l.isSecret);\n        this.promise = (withUnknowns) => OutputImpl.getPromisedValue(lifted.then((l) => l.value), withUnknowns);\n        this.toString = () => {\n            const error = new OutputToStringError();\n            if (utils.errorOutputString) {\n                throw error;\n            }\n            let message = error.message;\n            message += `\\nThis function may throw in a future version of @pulumi/pulumi.`;\n            return message;\n        };\n        this.toJSON = () => {\n            let message = `Calling [toJSON] on an [Output<T>] is not supported.\n\nTo get the value of an Output as a JSON value or JSON string consider either:\n    1: o.apply(v => v.toJSON())\n    2: o.apply(v => JSON.stringify(v))\n\nSee https://www.pulumi.com/docs/concepts/inputs-outputs for more details.`;\n            if (utils.errorOutputString) {\n                throw new Error(message);\n            }\n            message += `\\nThis function may throw in a future version of @pulumi/pulumi.`;\n            return message;\n        };\n        return new Proxy(this, {\n            get: (obj, prop) => {\n                // Recreate the prototype walk to ensure we find any actual members defined directly\n                // on `Output<T>`.\n                for (let o = obj; o; o = Object.getPrototypeOf(o)) {\n                    if (o.hasOwnProperty(prop)) {\n                        return o[prop];\n                    }\n                }\n                // Always explicitly fail on a member called 'then'.  It is used by other systems to\n                // determine if this is a Promise, and we do not want to indicate that that's what\n                // we are.\n                if (prop === \"then\") {\n                    return undefined;\n                }\n                // Do not lift members that start with __.  Technically, if all libraries were\n                // using this version of pulumi/pulumi we would not need this.  However, this is\n                // so that downstream consumers can use this version of pulumi/pulumi while also\n                // passing these new Outputs to older versions of pulumi/pulumi.  The reason this\n                // can be a problem is that older versions do an RTTI check that simply asks questions\n                // like:\n                //\n                //      Is there a member on this object called '__pulumiResource'\n                //\n                // If we automatically lift such a member (even if it eventually points to 'undefined'),\n                // then those RTTI checks will succeed.\n                //\n                // Note: this should be safe to not lift as, in general, properties with this prefix\n                // are not at all common (and in general are used to represent private things anyway\n                // that likely should not be exposed).\n                //\n                // Similarly, do not respond to the 'doNotCapture' member name.  It serves a similar\n                // RTTI purpose.\n                if (typeof prop === \"string\") {\n                    if (prop.startsWith(\"__\") || prop === \"doNotCapture\" || prop === \"deploymentOnlyModule\") {\n                        return undefined;\n                    }\n                }\n                // Fail out if we are being accessed using a symbol.  Many APIs will access with a\n                // well known symbol (like 'Symbol.toPrimitive') to check for the presence of something.\n                // They will only check for the existence of that member, and we don't want to make it\n                // appear that have those.\n                //\n                // Another way of putting this is that we only forward 'string/number' members to our\n                // underlying value.\n                if (typeof prop === \"symbol\") {\n                    return undefined;\n                }\n                // Else for *any other* property lookup, succeed the lookup and return a lifted\n                // `apply` on the underlying `Output`.\n                return obj.apply((ob) => {\n                    if (ob === undefined || ob === null) {\n                        return undefined;\n                    }\n                    else if (isUnknown(ob)) {\n                        // If the value of this output is unknown, the result of the access should also be unknown.\n                        // This is conceptually consistent, and also prevents us from returning a \"known undefined\"\n                        // value from the `ob[prop]` expression below.\n                        return exports.unknown;\n                    }\n                    return ob[prop];\n                }, /*runWithUnknowns:*/ true);\n            },\n        });\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f12() {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*get*/() {\n        throw new Error(`Cannot call '.get' during update or preview.\nTo manipulate the value of this Output, use '.apply' instead.`);\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __applyHelperAsync(__0, __1, __2, __3, __4, __5) {\n  return (function() {\n    with({ containsUnknowns: __containsUnknowns, exports: __pulumi_closure_import_exports, liftInnerOutput: __liftInnerOutput, applyHelperAsync: __applyHelperAsync, this: undefined, arguments: undefined }) {\n\nreturn async function /*applyHelperAsync*/(allResources, value, isKnown, isSecret, func, runWithUnknowns) {\n    // Only perform the apply if the engine was able to give us an actual value\n    // for this Output.\n    const doApply = isKnown || runWithUnknowns;\n    if (!doApply) {\n        // We didn't actually run the function, our new Output is definitely **not** known.\n        return {\n            allResources,\n            value: undefined,\n            isKnown: false,\n            isSecret,\n        };\n    }\n    // If we are running with unknown values and the value is explicitly unknown but does not actually\n    // contain any unknown values, collapse its value to the unknown value. This ensures that callbacks\n    // that expect to see unknowns during preview in outputs that are not known will always do so.\n    if (!isKnown && runWithUnknowns && !containsUnknowns(value)) {\n        value = exports.unknown;\n    }\n    const transformed = await func(value);\n    // We successfully ran the inner function. Our new Output should be considered known.  We\n    // preserve secretness from our original Output to the new one we're creating.\n    return liftInnerOutput(allResources, transformed, /*isKnown*/ true, isSecret);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f13(__0, __1) {\n  return (function() {\n    with({ applyHelperAsync: __applyHelperAsync, OutputImpl: __f9, this: undefined, arguments: undefined }) {\n\nreturn function /*apply*/(func, runWithUnknowns) {\n        // we're inside the modern `output` code, so it's safe to call `.allResources!` here.\n        const applied = Promise.all([\n            this.allResources(),\n            this.promise(/*withUnknowns*/ true),\n            this.isKnown,\n            this.isSecret,\n        ]).then(([allResources, value, isKnown, isSecret]) => applyHelperAsync(allResources, value, isKnown, isSecret, func, !!runWithUnknowns));\n        const result = new OutputImpl(this.resources(), applied.then((a) => a.value), applied.then((a) => a.isKnown), applied.then((a) => a.isSecret), applied.then((a) => a.allResources));\n        return result;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f14(__0) {\n  return (function() {\n    with({ output: __output, this: undefined, arguments: undefined }) {\n\nreturn function /*create*/(val) {\n        return output(val);\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f15(__0) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn function /*isInstance*/(obj) {\n        return utils.isInstance(obj, \"__pulumiOutput\");\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f16(__0, __1) {\n  return (function() {\n    with({ containsUnknowns: __containsUnknowns, this: undefined, arguments: undefined }) {\n\nreturn async function /*getPromisedValue*/(promise, withUnknowns) {\n        // If the caller did not explicitly ask to see unknown values and val contains unknowns, return undefined. This\n        // preserves compatibility with earlier versions of the Pulumi SDK.\n        const val = await promise;\n        if (!withUnknowns && containsUnknowns(val)) {\n            return undefined;\n        }\n        return val;\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAwaitableValue(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, getAwaitableValue: __getAwaitableValue, this: undefined, arguments: undefined }) {\n\nreturn function /*getAwaitableValue*/(v) {\n    if (exports.Output.isInstance(v)) {\n        return v.promise(/* withUnknowns */ true);\n    }\n    else {\n        return v;\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isSecret(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, isSecret: __isSecret, this: undefined, arguments: undefined }) {\n\nreturn function /*isSecret*/(val) {\n    return exports.Output.isInstance(val.isSecret) ? Promise.resolve(false) : val.isSecret;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isSecretOutput(__0) {\n  return (function() {\n    with({ isSecret: __isSecret, isSecretOutput: __isSecretOutput, this: undefined, arguments: undefined }) {\n\nreturn function /*isSecretOutput*/(o) {\n    return isSecret(o);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getResourcesAndDetails(__0) {\n  return (function() {\n    with({ exports: __pulumi_closure_import_exports, isSecretOutput: __isSecretOutput, getResourcesAndDetails: __getResourcesAndDetails, this: undefined, arguments: undefined }) {\n\nreturn function /*getResourcesAndDetails*/(allValues) {\n    const syncResources = new Set();\n    const allOutputs = [];\n    for (const v of allValues) {\n        if (exports.Output.isInstance(v)) {\n            allOutputs.push(v);\n            for (const res of v.resources()) {\n                syncResources.add(res);\n            }\n        }\n    }\n    // All the outputs were generated in `function all` using `output(v)`.  So it's safe\n    // to call `.allResources!` here.\n    const allResources = Promise.all(allOutputs.map((o) => o.allResources())).then((arr) => {\n        const result = new Set();\n        for (const set of arr) {\n            for (const res of set) {\n                result.add(res);\n            }\n        }\n        return result;\n    });\n    // A merged output is known if all of its inputs are known.\n    const isKnown = Promise.all(allOutputs.map((o) => o.isKnown)).then((ps) => ps.every((b) => b));\n    // A merged output is secret if any of its inputs are secret.\n    const isSecret = Promise.all(allOutputs.map((o) => isSecretOutput(o))).then((ps) => ps.some((b) => b));\n    return [syncResources, isKnown, isSecret, allResources];\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getPromisedObject(__0) {\n  return (function() {\n    with({ getAwaitableValue: __getAwaitableValue, getPromisedObject: __getPromisedObject, this: undefined, arguments: undefined }) {\n\nreturn async function /*getPromisedObject*/(keysAndOutputs) {\n    const result = {};\n    for (const kvp of keysAndOutputs) {\n        result[kvp.key] = await getAwaitableValue(kvp.value);\n    }\n    return result;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst resource_1 = require(\"@pulumi/pulumi/resource.js\");\n\nfunction __outputRec(__0, __1, __2) {\n  return (function() {\n    with({ isUnknown: __isUnknown, createSimpleOutput: __createSimpleOutput, exports: __pulumi_closure_import_exports, getAllResources: __getAllResources, OutputImpl: __f9, getAwaitableValue: __getAwaitableValue, getResourcesAndDetails: __getResourcesAndDetails, getPromisedObject: __getPromisedObject, outputRec: __outputRec, this: undefined, arguments: undefined }) {\n\nreturn function /*outputRec*/(val, seen, preallocatedError) {\n    if (val === null || typeof val !== \"object\") {\n        // strings, numbers, booleans, functions, symbols, undefineds, nulls are all returned as\n        // themselves.  They are always 'known' (i.e. we can safely 'apply' off of them even during\n        // preview).\n        return val;\n    }\n    if (resource_1.Resource.isInstance(val)) {\n        // Don't unwrap Resources, there are existing codepaths that return Resources through\n        // Outputs and we want to preserve them as is when flattening.\n        return val;\n    }\n    if (isUnknown(val)) {\n        return val;\n    }\n    if (val instanceof Promise) {\n        // Recurse into the value the Promise points to.  This may end up producing a\n        // Promise<Output>. Wrap this in another Output as the final result.  This Output's\n        // construction will be able to merge the inner Output's data with its own.  See\n        // liftInnerOutput for more details.\n        return createSimpleOutput(val.then((v) => outputRec(v, seen, preallocatedError)));\n    }\n    if (exports.Output.isInstance(val)) {\n        // We create a new output here from the raw pieces of the original output in order to\n        // accommodate outputs from downlevel SxS SDKs.  This ensures that within this package it is\n        // safe to assume the implementation of any Output returned by the `output` function.\n        //\n        // This includes:\n        // 1. that first-class unknowns are properly represented in the system: if this was a\n        //    downlevel output where val.isKnown resolves to false, this guarantees that the\n        //    returned output's promise resolves to unknown.\n        // 2. That the `isSecret` property is available.\n        // 3. That the `.allResources` is available.\n        const allResources = getAllResources(val);\n        const newOutput = new OutputImpl(val.resources(), val.promise(/*withUnknowns*/ true), val.isKnown, val.isSecret, allResources);\n        return newOutput.apply((v) => outputRec(v, seen, preallocatedError), /*runWithUnknowns*/ true);\n    }\n    // Used to track whether we've seen this object before, so we can throw an error about circular\n    // structures. The Set is allocated when the first \"container\" object is encountered, either an array\n    // or object. Any subsequent recursive calls get a new Set based on the passed-in one.\n    seen = new Set(seen);\n    // In order to present a useful stack trace if an error occurs, we preallocate an error here.\n    // V8 captures a stack trace at the moment an Error is created and this stack trace will lead\n    // directly to user code.\n    preallocatedError = preallocatedError ?? new Error(\"Cannot create an Output from a circular structure\");\n    // Throw an error if we've seen this object before.\n    if (seen.has(val)) {\n        throw preallocatedError;\n    }\n    // Track that we've seen this object.\n    seen.add(val);\n    if (val instanceof Array) {\n        const allValues = [];\n        let hasOutputs = false;\n        for (const v of val) {\n            const ev = outputRec(v, seen, preallocatedError);\n            allValues.push(ev);\n            if (exports.Output.isInstance(ev)) {\n                hasOutputs = true;\n            }\n        }\n        // If we didn't encounter any nested Outputs, we don't need to do anything.  We can just\n        // return this value as is.\n        if (!hasOutputs) {\n            // Note: we intentionally return 'allValues' here and not 'val'.  This ensures we get a\n            // copy.  This has been behavior we've had since the beginning and there may be subtle\n            // logic out there that depends on this that we would not want ot break.\n            return allValues;\n        }\n        // Otherwise, combine the data from all the outputs/non-outputs to one final output.\n        const promisedArray = Promise.all(allValues.map((v) => getAwaitableValue(v)));\n        const [syncResources, isKnown, isSecret, allResources] = getResourcesAndDetails(allValues);\n        return new exports.Output(syncResources, promisedArray, isKnown, isSecret, allResources);\n    }\n    const promisedValues = [];\n    let hasOutputs = false;\n    for (const k of Object.keys(val)) {\n        const ev = outputRec(val[k], seen, preallocatedError);\n        promisedValues.push({ key: k, value: ev });\n        if (exports.Output.isInstance(ev)) {\n            hasOutputs = true;\n        }\n    }\n    if (!hasOutputs) {\n        // Note: we intentionally return a new value here and not 'val'.  This ensures we get a\n        // copy.  This has been behavior we've had since the beginning and there may be subtle\n        // logic out there that depends on this that we would not want ot break.\n        return promisedValues.reduce((o, kvp) => {\n            o[kvp.key] = kvp.value;\n            return o;\n        }, {});\n    }\n    const promisedObject = getPromisedObject(promisedValues);\n    const [syncResources, isKnown, isSecret, allResources] = getResourcesAndDetails(promisedValues.map((kvp) => kvp.value));\n    return new exports.Output(syncResources, promisedObject, isKnown, isSecret, allResources);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __output(__0) {\n  return (function() {\n    with({ outputRec: __outputRec, exports: __pulumi_closure_import_exports, createSimpleOutput: __createSimpleOutput, output: __output, this: undefined, arguments: undefined }) {\n\nreturn function /*output*/(val) {\n    const ov = outputRec(val);\n    return exports.Output.isInstance(ov) ? ov : createSimpleOutput(ov);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __interpolate(__0) {\n  return (function() {\n    with({ output: __output, interpolate: __interpolate, this: undefined, arguments: undefined }) {\n\nreturn function /*interpolate*/(literals, ...placeholders) {\n    return output(placeholders).apply((unwrapped) => {\n        let result = \"\";\n        // interleave the literals with the placeholders\n        for (let i = 0; i < unwrapped.length; i++) {\n            result += literals[i];\n            result += unwrapped[i];\n        }\n        // add the last literal\n        result += literals[literals.length - 1];\n        return result;\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst log = require(\"@pulumi/pulumi/log/index.js\");\n\nfunction __expandProviders(__0) {\n  return (function() {\n    with({ expandProviders: __expandProviders, this: undefined, arguments: undefined }) {\n\nreturn function /*expandProviders*/(options) {\n    // Convert 'providers' map to array form.\n    if (options.providers && !Array.isArray(options.providers)) {\n        for (const k in options.providers) {\n            if (Object.prototype.hasOwnProperty.call(options.providers, k)) {\n                const v = options.providers[k];\n                if (k !== v.getPackage()) {\n                    const message = `provider resource map where key ${k} doesn't match provider ${v.getPackage()}`;\n                    log.warn(message);\n                }\n            }\n        }\n        options.providers = utils.values(options.providers);\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst output_1 = require(\"@pulumi/pulumi/output.js\");\n\nfunction __isPromiseOrOutput(__0) {\n  return (function() {\n    with({ isPromiseOrOutput: __isPromiseOrOutput, this: undefined, arguments: undefined }) {\n\nreturn function /*isPromiseOrOutput*/(val) {\n    return val instanceof Promise || output_1.Output.isInstance(val);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __addToArray(__0, __1) {\n  return (function() {\n    with({ addToArray: __addToArray, this: undefined, arguments: undefined }) {\n\nreturn function /*addToArray*/(resultArray, value) {\n    if (Array.isArray(value)) {\n        resultArray.push(...value);\n    }\n    else if (value !== undefined && value !== null) {\n        resultArray.push(value);\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __merge(__0, __1, __2) {\n  return (function() {\n    with({ isPromiseOrOutput: __isPromiseOrOutput, addToArray: __addToArray, merge: __merge, this: undefined, arguments: undefined }) {\n\nreturn function /*merge*/(dest, source, alwaysCreateArray) {\n    // unwind any top level promise/outputs.\n    if (isPromiseOrOutput(dest)) {\n        return output_1.output(dest).apply((d) => merge(d, source, alwaysCreateArray));\n    }\n    if (isPromiseOrOutput(source)) {\n        return output_1.output(source).apply((s) => merge(dest, s, alwaysCreateArray));\n    }\n    // If either are an array, make a new array and merge the values into it.\n    // Otherwise, just overwrite the destination with the source value.\n    if (alwaysCreateArray || Array.isArray(dest) || Array.isArray(source)) {\n        const result = [];\n        addToArray(result, dest);\n        addToArray(result, source);\n        return result;\n    }\n    return source;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __normalizeProviders(__0) {\n  return (function() {\n    with({ normalizeProviders: __normalizeProviders, this: undefined, arguments: undefined }) {\n\nreturn function /*normalizeProviders*/(opts) {\n    // If we have 0 providers, delete providers. Otherwise, convert providers into a map.\n    const providers = opts.providers;\n    if (providers) {\n        if (providers.length === 0) {\n            opts.providers = undefined;\n        }\n        else {\n            opts.providers = {};\n            for (const res of providers) {\n                opts.providers[res.getPackage()] = res;\n            }\n        }\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __mergeOptions(__0, __1) {\n  return (function() {\n    with({ expandProviders: __expandProviders, merge: __merge, normalizeProviders: __normalizeProviders, mergeOptions: __mergeOptions, this: undefined, arguments: undefined }) {\n\nreturn function /*mergeOptions*/(opts1, opts2) {\n    const dest = { ...opts1 };\n    const source = { ...opts2 };\n    // Ensure provider/providers are all expanded into the `ProviderResource[]` form.\n    // This makes merging simple.\n    expandProviders(dest);\n    expandProviders(source);\n    // iterate specifically over the supplied properties in [source].  Note: there may not be an\n    // corresponding value in [dest].\n    for (const key of Object.keys(source)) {\n        const destVal = dest[key];\n        const sourceVal = source[key];\n        // For 'dependsOn' we might have singleton resources in both options bags. We\n        // want to make sure we combine them into a collection.\n        if (key === \"dependsOn\") {\n            dest[key] = merge(destVal, sourceVal, /*alwaysCreateArray:*/ true);\n            continue;\n        }\n        if (key === \"hooks\") {\n            continue;\n        }\n        dest[key] = merge(destVal, sourceVal, /*alwaysCreateArray:*/ false);\n    }\n    if (dest.hooks || source.hooks) {\n        const hookTypes = [\n            \"beforeCreate\",\n            \"afterCreate\",\n            \"beforeUpdate\",\n            \"afterUpdate\",\n            \"beforeDelete\",\n            \"afterDelete\",\n        ];\n        for (const hookType of hookTypes) {\n            const destHooks = dest?.hooks?.[hookType];\n            const sourceHooks = source?.hooks?.[hookType];\n            if (destHooks || sourceHooks) {\n                if (!dest.hooks) {\n                    dest.hooks = {};\n                }\n                dest.hooks[hookType] = merge(destHooks, sourceHooks, /*alwaysCreateArray:*/ false);\n            }\n        }\n    }\n    // Now, if we are left with a .providers that is just a single key/value pair, then\n    // collapse that down into .provider form.\n    normalizeProviders(dest);\n    return dest;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __concat() {\n  return (function() {\n    with({ output: __output, concat: __concat, this: undefined, arguments: undefined }) {\n\nreturn function /*concat*/(...params) {\n    return output(params).apply((array) => array.join(\"\"));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __jsonStringify(__0, __1, __2) {\n  return (function() {\n    with({ output: __output, jsonStringify: __jsonStringify, this: undefined, arguments: undefined }) {\n\nreturn function /*jsonStringify*/(obj, replacer, space) {\n    return output(obj).apply((o) => {\n        return JSON.stringify(o, replacer, space);\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getEcrPrivateRegistry() {\n  return (function() {\n    with({ config_2: __config_2, pulumi: __pulumi, exports: __m, getEcrPrivateRegistry: __getEcrPrivateRegistry, this: undefined, arguments: undefined }) {\n\nreturn function /*getEcrPrivateRegistry*/(region = config_2.REGION) {\n    return pulumi.interpolate `${exports.callerAccountId}.dkr.ecr.${region}.amazonaws.com`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAmiByID(__0) {\n  return (function() {\n    with({ getAmiByID: __getAmiByID, this: undefined, arguments: undefined }) {\n\nreturn function /*getAmiByID*/(amiId) {\n    return aws.ec2.getAmiOutput({\n        filters: [{ name: \"image-id\", values: [amiId] }],\n    });\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAwsComputeDomain() {\n  return (function() {\n    with({ config_2: __config_2, getAwsComputeDomain: __getAwsComputeDomain, this: undefined, arguments: undefined }) {\n\nreturn function /*getAwsComputeDomain*/(region = config_2.REGION) {\n    return region === \"us-east-1\" ? \"ec2.internal\" : `${region}.compute.internal`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getInstanceTypes(__0, __1) {\n  return (function() {\n    with({ getInstanceTypes: __getInstanceTypes, this: undefined, arguments: undefined }) {\n\nreturn async function /*getInstanceTypes*/(filters, opts) {\n    var _a;\n    const burstType = (_a = filters.burstType) !== null && _a !== void 0 ? _a : \"included\";\n    const instanceTypes = await aws.ec2.getInstanceTypes({\n        filters: [\n            {\n                name: \"processor-info.supported-architecture\",\n                values: [filters.arch],\n            },\n            ...(burstType !== \"included\"\n                ? [\n                    {\n                        name: \"burstable-performance-supported\",\n                        values: [burstType === \"required\" ? \"true\" : \"false\"],\n                    },\n                ]\n                : []),\n            ...(filters.exactCpuCount\n                ? [\n                    {\n                        name: \"vcpu-info.default-vcpus\",\n                        values: [String(filters.exactCpuCount)],\n                    },\n                ]\n                : []),\n            ...(filters.exactMemoryMib\n                ? [\n                    {\n                        name: \"memory-info.size-in-mib\",\n                        values: [String(filters.exactMemoryMib)],\n                    },\n                ]\n                : []),\n        ],\n    }, opts);\n    return instanceTypes.instanceTypes;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __abbreviateRegion(__0) {\n  return (function() {\n    with({ abbreviateRegion: __abbreviateRegion, this: undefined, arguments: undefined }) {\n\nreturn function /*abbreviateRegion*/(region) {\n    return region.replace(/gov|west|east|central|north|south|-/g, (match) => (match === \"-\" ? \"\" : match[0]));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getSubnetCIDR(__0) {\n  return (function() {\n    with({ config_2: __config_2, utils_1: __utils_1, getSubnetCIDR: __getSubnetCIDR, this: undefined, arguments: undefined }) {\n\nreturn function /*getSubnetCIDR*/(index, prefixLen = 20, vpc = config_2.VPC_CIDR) {\n    const cidr = (0, utils_1.parseCIDR)(vpc);\n    assert.strictEqual(cidr.prefixLen, 16);\n    const subnetLen = prefixLen - cidr.prefixLen;\n    assert(0 === index >> subnetLen && Number.isInteger(index));\n    assert(prefixLen >= 20 && prefixLen <= 28 && Number.isInteger(prefixLen));\n    const ip = (index << 12) >> (prefixLen - 20);\n    return `${cidr.ip[0]}.${cidr.ip[1]}.${ip >> 8}.${ip & 0xff}/${prefixLen}`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSubnet(__0, __1, __2, __3) {\n  return (function() {\n    with({ pulumi: __pulumi, abbreviateRegion: __abbreviateRegion, getSubnetCIDR: __getSubnetCIDR, createSubnet: __createSubnet, this: undefined, arguments: undefined }) {\n\nreturn function /*createSubnet*/(scope, availabilityZone, routeTable, index, prefixLen = 20, opts) {\n    const oldName = pulumi\n        .output(availabilityZone)\n        .apply((az) => `${scope}-${abbreviateRegion(az)}`);\n    const ip = index << (32 - prefixLen);\n    const name = `subnet-${scope}-${ip >> 8}.${ip & 0xff}/${prefixLen}`;\n    const cidrBlock = aws.ec2\n        .getVpcOutput({ id: routeTable.vpcId }, opts)\n        .cidrBlock.apply((cidr) => getSubnetCIDR(index, prefixLen, cidr));\n    const subnet = new aws.ec2.Subnet(name, {\n        availabilityZone,\n        cidrBlock,\n        mapPublicIpOnLaunch: scope === \"pub\",\n        tags: {\n            az: availabilityZone,\n            scope: scope,\n            Name: name,\n        },\n        vpcId: routeTable.vpcId,\n    }, pulumi.mergeOptions(opts, { aliases: [{ name: oldName }] }));\n    new aws.ec2.RouteTableAssociation(`${name}-assoc`, {\n        subnetId: subnet.id,\n        routeTableId: routeTable.id,\n    }, pulumi.mergeOptions(opts, {\n        aliases: [{ name: pulumi.interpolate `${oldName}-assoc` }],\n    }));\n    return subnet;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSubnets(__0, __1, __2, __3) {\n  return (function() {\n    with({ createSubnet: __createSubnet, createSubnets: __createSubnets, this: undefined, arguments: undefined }) {\n\nreturn function /*createSubnets*/(scope, azNames, routeTable, offset, prefixLen = 20, opts) {\n    return azNames.map((azName, index) => createSubnet(scope, azName, routeTable, offset + index, prefixLen, opts));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getZoneName(__0) {\n  return (function() {\n    with({ getZoneName: __getZoneName, this: undefined, arguments: undefined }) {\n\nreturn function /*getZoneName*/(hostname) {\n    const dot = hostname.indexOf(\".\");\n    const nextDot = hostname.indexOf(\".\", dot + 1);\n    return nextDot === -1 || nextDot === hostname.length - 1\n        ? hostname\n        : hostname.slice(dot + 1);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isPrivateZone(__0) {\n  return (function() {\n    with({ PRIVATE_ZONE_REGEX: __PRIVATE_ZONE_REGEX, isPrivateZone: __isPrivateZone, this: undefined, arguments: undefined }) {\n\nreturn function /*isPrivateZone*/(domain) {\n    return PRIVATE_ZONE_REGEX.test(domain);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getZone(__0, __1) {\n  return (function() {\n    with({ isPrivateZone: __isPrivateZone, getZone: __getZone, this: undefined, arguments: undefined }) {\n\nreturn function /*getZone*/(name, opts) {\n    return aws.route53.getZone({ name, privateZone: isPrivateZone(name) }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getHostedZoneForHost(__0, __1) {\n  return (function() {\n    with({ pulumi: __pulumi, getZoneName: __getZoneName, getZone: __getZone, getHostedZoneForHost: __getHostedZoneForHost, this: undefined, arguments: undefined }) {\n\nreturn function /*getHostedZoneForHost*/(host, opts) {\n    pulumi.log.debug(\"getHostedZoneForHost: \" + host);\n    const zoneName = getZoneName(host);\n    return pulumi.output(getZone(zoneName, opts).catch((err) => {\n        const parentZoneName = getZoneName(zoneName);\n        if (parentZoneName === zoneName) {\n            pulumi.log.error(`Route53 zone not found: ${zoneName}`);\n            throw err;\n        }\n        return getZone(parentZoneName, opts);\n    }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __dnsSafe(__0) {\n  return (function() {\n    with({ dnsSafe: __dnsSafe, this: undefined, arguments: undefined }) {\n\nreturn function /*dnsSafe*/(name) {\n    return name === null || name === void 0 ? void 0 : name.toLowerCase();\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __normalizeDns(__0) {\n  return (function() {\n    with({ dnsSafe: __dnsSafe, normalizeDns: __normalizeDns, this: undefined, arguments: undefined }) {\n\nreturn function /*normalizeDns*/(name) {\n    return dnsSafe(name.endsWith(\".\") ? name.slice(0, -1) : name);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst crypto_1 = require(\"crypto\");\n\nfunction __truncate(__0, __1) {\n  return (function() {\n    with({ truncate: __truncate, this: undefined, arguments: undefined }) {\n\nreturn function /*truncate*/(name, maxLen) {\n    if (name.length <= maxLen) {\n        return name;\n    }\n    const hashLength = 6;\n    assert(maxLen > hashLength, \"maxLen must be greater than hashLength\");\n    const prefix = name.substring(0, maxLen - hashLength);\n    const hash = (0, crypto_1.createHash)(\"sha256\").update(name).digest(\"hex\");\n    return prefix + hash.substring(0, hashLength);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createRecord(__0, __1, __2) {\n  return (function() {\n    with({ getHostedZoneForHost: __getHostedZoneForHost, safe_namings_1: __safe_namings_1, allowOverwrite: false, pulumi: __pulumi, retainOnDelete: false, createRecord: __createRecord, this: undefined, arguments: undefined }) {\n\nreturn function /*createRecord*/(name, args, opts) {\n    var _a;\n    assert(!args.records || args.ttl, \"You must set ttl when using records\");\n    const zone = (_a = args.zone) !== null && _a !== void 0 ? _a : getHostedZoneForHost(name, opts);\n    const normalized = (0, safe_namings_1.normalizeDns)(name);\n    return new aws.route53.Record(`${normalized}_${args.type}`, {\n        allowOverwrite,\n        name,\n        ...args,\n        zoneId: zone.id,\n    }, pulumi.mergeOptions({\n        aliases: [\n            { name },\n            { name: `${name}${args.type}` },\n            { name: `${name.replace(/\\.$/, \"\")}_${args.type}` },\n        ],\n        deleteBeforeReplace: true,\n        retainOnDelete,\n    }, opts));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __quoted(__0) {\n  return (function() {\n    with({ quoted: __quoted, this: undefined, arguments: undefined }) {\n\nreturn function /*quoted*/(value) {\n    const escaped = value.replace(/[\"\\\\]/g, \"\\\\$&\");\n    return `\"${escaped}\"`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createCaaDnsRecord(__0, __1, __2, __3) {\n  return (function() {\n    with({ createRecord: __createRecord, quoted: __quoted, time_1: __time_1, pulumi: __pulumi, createCaaDnsRecord: __createCaaDnsRecord, this: undefined, arguments: undefined }) {\n\nreturn function /*createCaaDnsRecord*/(hostname, zone, issueValue, opts) {\n    return createRecord(hostname, {\n        records: [`0 issue ${quoted(issueValue || \";\")}`],\n        ttl: time_1.HOUR,\n        type: \"CAA\",\n        zone,\n    }, pulumi.mergeOptions(opts, { aliases: [{ name: `caa-${hostname}` }] }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getOrCreate(__0, __1, __2) {\n  return (function() {\n    with({ getOrCreate: __getOrCreate, this: undefined, arguments: undefined }) {\n\nreturn function /*getOrCreate*/(map, key, create) {\n    const existing = map === null || map === void 0 ? void 0 : map.get(key);\n    if (existing !== undefined) {\n        return existing;\n    }\n    const value = create();\n    map === null || map === void 0 ? void 0 : map.set(key, value);\n    return value;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createValidationDnsRecord(__0, __1, __2) {\n  return (function() {\n    with({ route53_1: __route53_1, time_1: __time_1, pulumi: __pulumi, createValidationDnsRecord: __createValidationDnsRecord, this: undefined, arguments: undefined }) {\n\nreturn function /*createValidationDnsRecord*/(cdvo, zone, opts) {\n    return (0, route53_1.createRecord)(cdvo.resourceRecordName, {\n        records: [cdvo.resourceRecordValue],\n        ttl: 1 * time_1.MINUTE,\n        type: cdvo.resourceRecordType,\n        zone,\n    }, pulumi.mergeOptions(opts, {\n        deleteBeforeReplace: true,\n        retainOnDelete: false,\n    }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createCertificateDNS(__0, __1, __2) {\n  return (function() {\n    with({ pulumi: __pulumi, route53_1: __route53_1, utils_1: __utils_1, getOrCreate: __getOrCreate, createValidationDnsRecord: __createValidationDnsRecord, createCertificateDNS: __createCertificateDNS, this: undefined, arguments: undefined }) {\n\nreturn function /*createCertificateDNS*/(hostnames, args, opts) {\n    const domainName = hostnames[0];\n    assert(domainName, \"hostnames must not be empty\");\n    const certificate = new aws.acm.Certificate(domainName, {\n        domainName,\n        subjectAlternativeNames: hostnames.slice(1),\n        validationMethod: \"DNS\",\n    }, opts);\n    const { retainOnDelete: _, ...resourceOptions } = opts !== null && opts !== void 0 ? opts : {};\n    const route53Opts = (args === null || args === void 0 ? void 0 : args.route53Provider)\n        ? pulumi.mergeOptions(resourceOptions, { provider: args.route53Provider })\n        : resourceOptions;\n    const caaRecords = (args === null || args === void 0 ? void 0 : args.caa)\n        ? hostnames.map((hostname) => (0, route53_1.createCaaDnsRecord)(hostname, args.zone, \"amazon.com\", route53Opts))\n        : undefined;\n    const validationRecordFqdns = certificate.domainValidationOptions.apply((dvos) => {\n        const deduped = (0, utils_1.dedup)(dvos, (dvo) => dvo.resourceRecordName);\n        deduped.sort((a, b) => a.domainName.localeCompare(b.domainName));\n        return deduped.flatMap((dvo) => getOrCreate(args === null || args === void 0 ? void 0 : args.validationRecords, dvo.resourceRecordName, () => createValidationDnsRecord(dvo, args === null || args === void 0 ? void 0 : args.zone, route53Opts).fqdn));\n    });\n    const certificateValidation = new aws.acm.CertificateValidation(`${domainName}Validation`, {\n        certificateArn: certificate.arn,\n        validationRecordFqdns,\n    }, pulumi.mergeOptions(resourceOptions, { dependsOn: caaRecords }));\n    return { arn: certificateValidation.certificateArn };\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAvailabilityZoneNames(__0) {\n  return (function() {\n    with({ config_2: __config_2, getAvailabilityZoneNames: __getAvailabilityZoneNames, this: undefined, arguments: undefined }) {\n\nreturn async function /*getAvailabilityZoneNames*/(opts) {\n    const azr = await aws.getAvailabilityZones({}, opts);\n    if (!azr.names.length) {\n        throw new Error(\"No availability zones in region \" + config_2.REGION);\n    }\n    return azr.names.sort();\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getRootOU(__0) {\n  return (function() {\n    with({ getRootOU: __getRootOU, this: undefined, arguments: undefined }) {\n\nreturn async function /*getRootOU*/(opts) {\n    const org = await aws.organizations.getOrganization(opts);\n    return org.roots[0].id;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __instanceTypeGroupKey(__0) {\n  return (function() {\n    with({ instanceTypeGroupKey: __instanceTypeGroupKey, this: undefined, arguments: undefined }) {\n\nreturn function /*instanceTypeGroupKey*/(instanceType) {\n    return instanceType.replace(/\\d+(g?)[inad]*\\./, \"$1-\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __groupInstanceTypes(__0) {\n  return (function() {\n    with({ utils_1: __utils_1, instanceTypeGroupKey: __instanceTypeGroupKey, groupInstanceTypes: __groupInstanceTypes, this: undefined, arguments: undefined }) {\n\nreturn function /*groupInstanceTypes*/(instanceTypes) {\n    return (0, utils_1.groupBy)(instanceTypes, instanceTypeGroupKey);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getInstanceTypeArch(__0) {\n  return (function() {\n    with({ getInstanceTypeArch: __getInstanceTypeArch, this: undefined, arguments: undefined }) {\n\nreturn function /*getInstanceTypeArch*/(instanceType) {\n    return /^a|\\dg/.test(instanceType) ? \"arm64\" : \"x86_64\";\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __isGpuInstance(__0) {\n  return (function() {\n    with({ isGpuInstance: __isGpuInstance, this: undefined, arguments: undefined }) {\n\nreturn function /*isGpuInstance*/(instanceType) {\n    return /^(p|dl|trn|inf|g|f|vt)\\d/.test(instanceType);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getAmiType(__0) {\n  return (function() {\n    with({ getInstanceTypeArch: __getInstanceTypeArch, isGpuInstance: __isGpuInstance, getAmiType: __getAmiType, this: undefined, arguments: undefined }) {\n\nreturn function /*getAmiType*/(instanceType) {\n    if (getInstanceTypeArch(instanceType) === \"arm64\") {\n        return \"AL2_ARM_64\";\n    }\n    else if (isGpuInstance(instanceType)) {\n        return \"AL2_x86_64_GPU\";\n    }\n    else {\n        return \"AL2_x86_64\";\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __makeArn(__0) {\n  return (function() {\n    with({ pulumi: __pulumi, config_2: __config_2, exports: __m, makeArn: __makeArn, this: undefined, arguments: undefined }) {\n\nreturn function /*makeArn*/(args) {\n    var _a, _b, _c;\n    return pulumi.concat(\"arn:\", args.partition || \"aws\", \":\", args.service, \":\", (_a = args.region) !== null && _a !== void 0 ? _a : config_2.REGION, \":\", (_b = args.accountId) !== null && _b !== void 0 ? _b : exports.callerAccountId, \":\", args.resource, args.resourceId === undefined ? \"\" : \"/\", (_c = args.resourceId) !== null && _c !== void 0 ? _c : \"\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __nameFromArn(__0) {\n  return (function() {\n    with({ nameFromArn: __nameFromArn, this: undefined, arguments: undefined }) {\n\nreturn function /*nameFromArn*/(arn) {\n    const slashIndex = arn.indexOf(\"/\");\n    return slashIndex !== -1 ? arn.substring(slashIndex + 1) : \"\";\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __logGroupArnToId(__0) {\n  return (function() {\n    with({ pulumi: __pulumi, logGroupArnToId: __logGroupArnToId, this: undefined, arguments: undefined }) {\n\nreturn function /*logGroupArnToId*/(logGroup) {\n    return logGroup\n        ? { id: pulumi.output(logGroup.arn).apply((lg) => lg.split(\":\")[6]) }\n        : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __logGroupIdToArn(__0) {\n  return (function() {\n    with({ config_2: __config_2, pulumi: __pulumi, exports: __m, logGroupIdToArn: __logGroupIdToArn, this: undefined, arguments: undefined }) {\n\nreturn function /*logGroupIdToArn*/(logGroup, region = config_2.REGION) {\n    return logGroup\n        ? {\n            arn: pulumi.interpolate `arn:aws:logs:${region}:${exports.callerAccountId}:log-group:${logGroup.id}`,\n        }\n        : undefined;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __stack() {\n  return (function() {\n    with({ stackPrefix: \"Defang-html-css-js-beta\", stackDirPrefix: \"/Defang/html-css-js/beta/\", stack: __stack, this: undefined, arguments: undefined }) {\n\nreturn function /*stack*/(name = \"\") {\n    assert(!name.startsWith(stackPrefix) && !name.startsWith(stackDirPrefix));\n    return name ? stackPrefix + \"-\" + name : stackPrefix;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __stackDir(__0) {\n  return (function() {\n    with({ stackPrefix: \"Defang-html-css-js-beta\", stackDirPrefix: \"/Defang/html-css-js/beta/\", stackDir: __stackDir, this: undefined, arguments: undefined }) {\n\nreturn function /*stackDir*/(name) {\n    assert(!name.startsWith(stackPrefix) && !name.startsWith(stackDirPrefix));\n    return stackDirPrefix + name;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst awsx = require(\"@pulumi/awsx/index.js\");\n\nfunction __createEcrRepository(__0, __1) {\n  return (function() {\n    with({ config_1: __config_1, time_1: __time_1, createEcrRepository: __createEcrRepository, this: undefined, arguments: undefined }) {\n\nreturn function /*createEcrRepository*/(name, opts) {\n    const isCache = name.endsWith(\"cache\");\n    const maximumAgeLimit = isCache ? Math.floor(config_1.imageCacheTTL / time_1.HOUR / 24) : 0;\n    return new awsx.ecr.Repository(name, {\n        encryptionConfigurations: [{ encryptionType: \"AES256\" }],\n        forceDelete: config_1.IS_DEV || isCache,\n        lifecyclePolicy: maximumAgeLimit\n            ? {\n                rules: [\n                    {\n                        description: `delete images after ${maximumAgeLimit} days`,\n                        maximumAgeLimit,\n                        tagStatus: \"any\",\n                    },\n                ],\n            }\n            : undefined,\n        imageScanningConfiguration: { scanOnPush: true },\n        name,\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __awsNameSafe(__0, __1) {\n  return (function() {\n    with({ safe_namings_1: __safe_namings_1, awsNameSafe: __awsNameSafe, this: undefined, arguments: undefined }) {\n\nreturn function /*awsNameSafe*/(name, length) {\n    return (0, safe_namings_1.truncate)(name.toLowerCase().replace(/[^a-z0-9-]/g, \"-\"), length);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createPrivateBucket(__0, __1, __2) {\n  return (function() {\n    with({ safe_namings_1: __0_safe_namings_1, config_1: __config_1, pulumi: __pulumi, createPrivateBucket: __createPrivateBucket, this: undefined, arguments: undefined }) {\n\nreturn function /*createPrivateBucket*/(name, args, opts) {\n    const bucketPrefix = (args === null || args === void 0 ? void 0 : args.bucket) ? undefined : (0, safe_namings_1.awsNameSafe)((0, config_1.stack)(name), 37);\n    const bucket = new aws.s3.Bucket(name, {\n        bucketPrefix,\n        serverSideEncryptionConfiguration: {\n            rule: {\n                applyServerSideEncryptionByDefault: {\n                    sseAlgorithm: \"AES256\",\n                },\n                bucketKeyEnabled: !config_1.IS_PROD,\n            },\n        },\n        forceDestroy: !config_1.IS_PROD,\n        ...args,\n    }, pulumi.mergeOptions({ retainOnDelete: config_1.IS_PROD }, opts));\n    new aws.s3.BucketPublicAccessBlock(`${name}-block`, {\n        bucket: bucket.id,\n        blockPublicAcls: true,\n        blockPublicPolicy: true,\n        ignorePublicAcls: true,\n        restrictPublicBuckets: true,\n    }, opts);\n    return bucket;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createLogGroup(__0, __1) {\n  return (function() {\n    with({ config_1: __config_1, createLogGroup: __createLogGroup, this: undefined, arguments: undefined }) {\n\nreturn function /*createLogGroup*/(name, opts) {\n    return new aws.cloudwatch.LogGroup(name, {\n        name: (0, config_1.stackDir)(name),\n        retentionInDays: config_1.retentionInDays,\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSecret(__0, __1, __2) {\n  return (function() {\n    with({ config_1: __config_1, createSecret: __createSecret, this: undefined, arguments: undefined }) {\n\nreturn function /*createSecret*/(name, args, opts) {\n    const secret = new aws.secretsmanager.Secret(name, {\n        namePrefix: (0, config_1.stackDir)(name),\n        recoveryWindowInDays: config_1.IS_DEV ? 0 : config_1.IS_PROD ? undefined : 7,\n        ...args,\n    }, opts);\n    return new aws.secretsmanager.SecretVersion(`${name}-version`, {\n        secretId: secret.id,\n        ...args,\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createDistribution(__0, __1, __2, __3) {\n  return (function() {\n    with({ common_1: __common_1, createDistribution: __createDistribution, this: undefined, arguments: undefined }) {\n\nreturn function /*createDistribution*/(name, args, certificate, opts) {\n    const dist = new aws.cloudfront.Distribution(name, {\n        comment: common_1.DefangComment,\n        enabled: true,\n        priceClass: \"PriceClass_100\",\n        restrictions: {\n            geoRestriction: {\n                restrictionType: \"none\",\n            },\n        },\n        viewerCertificate: {\n            cloudfrontDefaultCertificate: !certificate,\n            acmCertificateArn: certificate === null || certificate === void 0 ? void 0 : certificate.arn,\n            sslSupportMethod: certificate ? \"sni-only\" : undefined,\n        },\n        ...args,\n    }, opts);\n    return dist;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createBucketDistribution(__0, __1, __2, __3, __4) {\n  return (function() {\n    with({ createDistribution: __createDistribution, createBucketDistribution: __createBucketDistribution, this: undefined, arguments: undefined }) {\n\nreturn function /*createBucketDistribution*/(name, originBucket, args, certificate, opts) {\n    return createDistribution(name, {\n        aliases: [originBucket.bucket],\n        origins: [\n            {\n                customOriginConfig: {\n                    httpPort: 80,\n                    httpsPort: 443,\n                    originProtocolPolicy: \"http-only\",\n                    originSslProtocols: [\"TLSv1.2\"],\n                },\n                domainName: originBucket.websiteEndpoint,\n                originId: originBucket.arn,\n            },\n        ],\n        ...args,\n    }, certificate, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSecurityGroup(__0, __1, __2) {\n  return (function() {\n    with({ config_1: __config_1, common_1: __common_1, pulumi: __pulumi, createSecurityGroup: __createSecurityGroup, this: undefined, arguments: undefined }) {\n\nreturn function /*createSecurityGroup*/(name, args, opts) {\n    return new aws.ec2.SecurityGroup(name, {\n        name: (0, config_1.stack)(name),\n        description: common_1.DefangComment,\n        egress: [\n            {\n                cidrBlocks: [\"0.0.0.0/0\"],\n                description: \"Allow all outbound traffic\",\n                fromPort: 0,\n                protocol: \"-1\",\n                toPort: 0,\n            },\n        ],\n        ingress: [],\n        ...args,\n        vpcId: args.vpc.id,\n    }, pulumi.mergeOptions(opts, { ignoreChanges: [\"description\"] }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getRegistryInfoForEcrRepo(__0) {\n  return (function() {\n    with({ parseEcrRepo: __parseEcrRepo, pulumi: __pulumi, utils_1: __utils_1, getRegistryInfoForEcrRepo: __getRegistryInfoForEcrRepo, this: undefined, arguments: undefined }) {\n\nreturn function /*getRegistryInfoForEcrRepo*/(ecrRepo) {\n    const { registryId } = parseEcrRepo(ecrRepo);\n    const credentials = aws.ecr.getCredentialsOutput({ registryId });\n    return credentials.authorizationToken.apply((token) => pulumi.output({\n        server: credentials.proxyEndpoint,\n        ...(0, utils_1.parseBasicAuth)(token),\n    }));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getErrorHtml(__0, __1, __2) {\n  return (function() {\n    with({ getErrorHtml: __getErrorHtml, this: undefined, arguments: undefined }) {\n\nreturn function /*getErrorHtml*/(title, h1, message) {\n    return `<!DOCTYPE html>\n<html>\n<head>\n    <title>Defang | ${title}</title>\n    <style>\n    body {\n        font-family: 'Exo', sans-serif;\n        background-color: #1d1d1d;\n        background-image: radial-gradient(circle at 50% 0, rgba(239, 152, 207, .2), rgba(0, 0, 0, 0) 57%), radial-gradient(circle at 0 20%, rgba(122, 167, 255, .25), rgba(0, 0, 0, 0) 42%);\n        color: #f1f3fa;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 100vh;\n        margin: 0;\n    }\n    .container {\n        text-align: center;\n    }\n    .message {\n        font-size: 1.5em;\n    }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n    <h1>${h1}</h1>\n    <p class=\"message\">${message}</p>\n    </div>\n</body>\n</html>`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createListener(__0, __1, __2) {\n  return (function() {\n    with({ error_1: __error_1, pulumi: __pulumi, config_1: __config_1, createListener: __createListener, this: undefined, arguments: undefined }) {\n\nreturn function /*createListener*/(name, args, opts) {\n    var _a;\n    return new aws.lb.Listener(name, {\n        certificateArn: (_a = args.certificate) === null || _a === void 0 ? void 0 : _a.arn,\n        defaultActions: [\n            {\n                type: \"fixed-response\",\n                fixedResponse: {\n                    contentType: \"text/html\",\n                    messageBody: (0, error_1.getErrorHtml)(\"404 Not Found\", \"Resource Not Found\", \"The service you are looking for doesn't exist or is pending deployment. Check its status or domain name.\"),\n                    statusCode: \"404\",\n                },\n            },\n        ],\n        loadBalancerArn: args.loadBalancer.arn,\n        port: args.certificate ? 443 : 80,\n        protocol: args.certificate ? \"HTTPS\" : \"HTTP\",\n        ...args,\n    }, pulumi.mergeOptions({\n        deleteBeforeReplace: true,\n        replaceOnChanges: config_1.IS_DEV && args.certificate ? [\"certificateArn\"] : [],\n    }, opts));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getLoadBalancerCIDRs(__0) {\n  return (function() {\n    with({ pulumi: __pulumi, getLoadBalancerCIDRs: __getLoadBalancerCIDRs, this: undefined, arguments: undefined }) {\n\nreturn function /*getLoadBalancerCIDRs*/(lb) {\n    return lb.subnetMappings.apply((sm) => sm.map((m) => pulumi.output(m.privateIpv4Address\n        ? m.privateIpv4Address + \"/32\"\n        : aws.ec2.getSubnetOutput({ id: m.subnetId }).cidrBlock)));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __clusterArnToServicePrefix(__0) {\n  return (function() {\n    with({ clusterArnToServicePrefix: __clusterArnToServicePrefix, this: undefined, arguments: undefined }) {\n\nreturn function /*clusterArnToServicePrefix*/(clusterArn) {\n    return clusterArn.replace(/:cluster(\\/.+)cluster$/, \":service$1\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createECSLifeCycleEventRule(__0, __1, __2) {\n  return (function() {\n    with({ pulumi: __pulumi, clusterArnToServicePrefix: __clusterArnToServicePrefix, createECSLifeCycleEventRule: __createECSLifeCycleEventRule, this: undefined, arguments: undefined }) {\n\nreturn function /*createECSLifeCycleEventRule*/(ruleName, cluster, opts) {\n    return new aws.cloudwatch.EventRule(ruleName, {\n        description: pulumi.interpolate `Capture ECS task lifecycle events of cluster ${cluster.arn}`,\n        eventPattern: pulumi.jsonStringify({\n            source: [\"aws.ecs\"],\n            \"detail-type\": [\n                \"ECS Task State Change\",\n                \"ECS Service Action\",\n                \"ECS Deployment State Change\",\n            ],\n            $or: [\n                {\n                    resources: [\n                        {\n                            prefix: pulumi\n                                .output(cluster.arn)\n                                .apply(clusterArnToServicePrefix),\n                        },\n                    ],\n                },\n                {\n                    detail: {\n                        clusterArn: [cluster.arn],\n                    },\n                },\n            ],\n        }),\n    }, opts);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f3() {\n  return (function() {\n    with({ m: __m, k: \"parseEcrRepo\", this: undefined, arguments: undefined }) {\n\nreturn function () { return m[k]; };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst oci_registry_client_1 = require(\"oci-registry-client/build/index.js\");\n\nfunction __getImageManifest(__0, __1, __2) {\n  return (function() {\n    with({ getImageManifest: __getImageManifest, this: undefined, arguments: undefined }) {\n\nreturn async function /*getImageManifest*/(repo, tag, auth) {\n    const registryClient = new oci_registry_client_1.RegistryClientV2({\n        name: repo,\n        ...auth,\n    });\n    const resp = await registryClient.getManifest({\n        ref: tag || \"latest\",\n    });\n    return resp;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createSha256(__0) {\n  return (function() {\n    with({ createSha256: __createSha256, this: undefined, arguments: undefined }) {\n\nreturn function /*createSha256*/(data) {\n    return (0, crypto_1.createHash)(\"sha256\").update(data).digest(\"hex\");\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __createDigest(__0) {\n  return (function() {\n    with({ createSha256: __createSha256, createDigest: __createDigest, this: undefined, arguments: undefined }) {\n\nreturn function /*createDigest*/(data) {\n    return `sha256:${createSha256(data)}`;\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __getImageManifestDigest(__0, __1, __2) {\n  return (function() {\n    with({ getImageManifest: __getImageManifest, types_1: __types_1, getImageManifestDigest: __getImageManifestDigest, this: undefined, arguments: undefined }) {\n\nreturn async function /*getImageManifestDigest*/(repo, tag, auth) {\n    var _a;\n    const { resp } = await getImageManifest(repo, tag, auth);\n    return ((_a = resp.headers.get(\"docker-content-digest\")) !== null && _a !== void 0 ? _a : (0, types_1.createDigest)(await resp.dockerBody()));\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst client_ecr_1 = require(\"@aws-sdk/client-ecr/dist-cjs/index.js\");\n\nfunction __getImageDigestPromise(__0) {\n  return (function() {\n    with({ aws_1: __aws_1, pulumi: __pulumi, image_1: __image_1, getImageDigestPromise: __getImageDigestPromise, this: undefined, arguments: undefined }) {\n\nreturn async function /*getImageDigestPromise*/(repositoryUrl, imageTag = \"latest\") {\n    try {\n        const { registryId, region, repositoryName } = (0, aws_1.parseEcrRepo)(repositoryUrl);\n        const client = new client_ecr_1.ECRClient({ region });\n        const resp = await client.send(new client_ecr_1.BatchGetImageCommand({\n            registryId,\n            repositoryName,\n            imageIds: [{ imageTag }],\n        }));\n        if (resp.failures && resp.failures.length > 0) {\n            throw new Error(`Failed to get image from ECR: ${resp.failures\n                .map((f) => f.failureReason)\n                .join(\", \")}`);\n        }\n        if (!resp.images || resp.images.length === 0) {\n            throw new Error(`No images found in ECR for ${repositoryUrl}:${imageTag}`);\n        }\n        return resp.images[0].imageId.imageDigest;\n    }\n    catch (error) {\n        if (error instanceof Error) {\n            pulumi.log.info(`${error.message}; trying OCI ${repositoryUrl} with imageTag ${imageTag}`);\n        }\n        return (0, image_1.getImageManifestDigest)(repositoryUrl, imageTag);\n    }\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\nconst promises_1 = require(\"timers/promises\");\n\nfunction __getFullBuiltImageUrl(__0) {\n  return (function() {\n    with({ utils_1: __utils_1, image_digest_1: __image_digest_1, getFullBuiltImageUrl: __getFullBuiltImageUrl, this: undefined, arguments: undefined }) {\n\nreturn async function /*getFullBuiltImageUrl*/(imageUrl) {\n    imageUrl = imageUrl.replace(/^(index|registry)\\.docker\\.io/, \"docker.io\");\n    const imageInfo = (0, utils_1.parseImage)(imageUrl);\n    const errors = [];\n    for (let attempt = 0; attempt < 3; attempt++) {\n        try {\n            if (attempt > 0)\n                await (0, promises_1.setTimeout)(2000 * attempt);\n            const imageDigest = await (0, image_digest_1.getImageDigestPromise)(imageInfo.image, imageInfo.tag);\n            const url = imageInfo.image + \":\" + imageInfo.tag + \"@\" + imageDigest;\n            return url;\n        }\n        catch (e) {\n            const message = e instanceof Error ? e.message : String(e);\n            errors.push(`Attempt ${attempt + 1} : ${message}`);\n        }\n    }\n    throw new Error(`Failed to get image digest for ${imageUrl} after 3 attempts: ${errors.join(\"; \")}`);\n};\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f2(__0) {\n  return (function() {\n    with({ startBuild: __startBuild, waitForBuilds: __waitForBuilds, getUnsuccessfulPhase: __getUnsuccessfulPhase, getFullBuiltImageUrl: __getFullBuiltImageUrl, this: undefined, arguments: undefined }) {\n\nreturn async function /*create*/(inputs) {\n        const client = new awsCodeBuildSdk.CodeBuildClient({\n            region: inputs.region,\n        });\n        const maxWaitTime = inputs.maxWaitTime;\n        const attempts = 2;\n        let buildId = \"\";\n        const errors = [];\n        for (let attempt = 0; attempt < attempts; attempt++) {\n            try {\n                await (0, promises_1.setTimeout)(attempt == 0 ? 3000 : 5000 * attempt);\n                buildId = await startBuild(client, inputs.projectName);\n                await waitForBuilds({ maxWaitTime }, [buildId], inputs.region);\n                break;\n            }\n            catch (e) {\n                const message = e instanceof Error ? e.message : String(e);\n                if (buildId) {\n                    const phase = await getUnsuccessfulPhase(client, buildId);\n                    if ((phase === null || phase === void 0 ? void 0 : phase.phaseType) === \"BUILD\") {\n                        throw new Error(`Build failed: ${message}`);\n                    }\n                }\n                errors.push(`Attempt ${attempt + 1}: ${message}`);\n            }\n        }\n        if (errors.length === attempts) {\n            throw new Error(`Failed to run CodeBuild build after 2 attempts: ${errors.join(\"; \")}`);\n        }\n        const image = await getFullBuiltImageUrl(inputs.destination);\n        return {\n            id: inputs.projectName,\n            outs: { ...inputs, buildId, image },\n        };\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f17(__0, __1, __2) {\n  return (function() {\n    with({ this: undefined, arguments: undefined }) {\n\nreturn async function /*update*/(_id, olds, inputs) {\n        return { outs: { ...inputs, buildId: olds.buildId, image: olds.image } };\n    };\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n\nfunction __f0() {\n  return (function() {\n    with({ provider: __provider, this: undefined, arguments: undefined }) {\n\nreturn () => provider;\n\n    }\n  }).apply(undefined, undefined).apply(this, arguments);\n}\n",
                        "baseImage": "aws/codebuild/amazonlinux-x86_64-standard:5.0",
                        "buildId": "app-image-10c2c96:c7a3142a-2e9d-4fb0-995d-dd8686aa507e",
                        "context": "s3://defang-cd-bucket-cybpbzz8hzm7/uploads/sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                        "destination": "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:app-image-ca933ed5-x86_64",
                        "dockerfile": "Dockerfile",
                        "image": "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:app-image-ca933ed5-x86_64@sha256:5feb515bb65afc4897f068d2e02ce7c481b89bd7875f89e1d9a54e1f41632a00",
                        "logGroup": "/Defang/html-css-js/beta/builds",
                        "logStreamPrefix": "app-image/app_y59beapk17nz",
                        "platforms": [
                            "linux/amd64"
                        ],
                        "preBuildSteps": [
                            "tar -xzf sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz -C $CODEBUILD_SRC_DIR",
                            "rm sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                            "mkdir -p /root/.docker",
                            "echo '{\"credHelpers\":{\"public.ecr.aws\":\"ecr-login\",\"123456789012.dkr.ecr.us-west-2.amazonaws.com\":\"ecr-login\"}}' > /root/.docker/config.json"
                        ],
                        "projectName": "app-image-10c2c96",
                        "region": "us-west-2",
                        "repositoryUrl": "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build",
                        "taskRole": "Defang-html-css-js-beta-code-build-roleus-west-2",
                        "triggers": [
                            "app-image-10c2c96",
                            "s3://defang-cd-bucket-cybpbzz8hzm7/uploads/sha256-f47ju8UqCkYHhfvfditSMy_A_kVGvzV2kq8lhHorTk8_.tar.gz",
                            "123456789012.dkr.ecr.us-west-2.amazonaws.com/html-css-js/kaniko-build:app-image-ca933ed5-x86_64",
                            "aws/codebuild/amazonlinux-x86_64-standard:5.0",
                            "ca933ed5"
                        ]
                    },
                    "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                    "dependencies": [
                        "urn:pulumi:beta::html-css-js::aws:codebuild/project:Project::app-image",
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                        "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build",
                        "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds",
                        "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role"
                    ],
                    "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:pulumi-nodejs::default::eaa7161b-69c4-44e5-bac7-fee22b4ee96c",
                    "propertyDependencies": {
                        "__provider": [],
                        "baseImage": [],
                        "context": [],
                        "destination": [
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build"
                        ],
                        "dockerfile": [],
                        "logGroup": [
                            "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$defang-mvp:shared/ecs/kaniko:Kaniko$aws:cloudwatch/logGroup:LogGroup::builds"
                        ],
                        "logStreamPrefix": [],
                        "platforms": [],
                        "preBuildSteps": [
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build"
                        ],
                        "projectName": [
                            "urn:pulumi:beta::html-css-js::aws:codebuild/project:Project::app-image"
                        ],
                        "region": [],
                        "repositoryUrl": [
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build"
                        ],
                        "taskRole": [
                            "urn:pulumi:beta::html-css-js::aws:iam/role:Role::code-build-role"
                        ],
                        "triggers": [
                            "urn:pulumi:beta::html-css-js::aws:codebuild/project:Project::app-image",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository$aws:ecr/repository:Repository::html-css-js/kaniko-build",
                            "urn:pulumi:beta::html-css-js::awsx:ecr:Repository::html-css-js/kaniko-build"
                        ]
                    },
                    "created": "2025-11-22T11:54:29.56951349Z",
                    "modified": "2025-11-22T11:54:29.56951349Z",
                    "replaceOnChanges": [
                        "triggers[*]"
                    ]
                }
            ],
            "pending_operations": [
                {
                    "resource": {
                        "urn": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang$aws:route53/zone:Zone::html-css-js.internal",
                        "custom": true,
                        "type": "aws:route53/zone:Zone",
                        "inputs": {
                            "__defaults": [],
                            "comment": "Managed by Defang",
                            "forceDestroy": true,
                            "name": "html-css-js.internal",
                            "tags": {
                                "defang:org": "testuser",
                                "defang:project": "html-css-js",
                                "defang:stack": "beta",
                                "defang:version": "0.6.0-1189-gb86d4117"
                            },
                            "tagsAll": {
                                "defang:org": "testuser",
                                "defang:project": "html-css-js",
                                "defang:stack": "beta",
                                "defang:version": "0.6.0-1189-gb86d4117"
                            },
                            "vpcs": [
                                {
                                    "__defaults": [],
                                    "vpcId": "vpc-0a5e98797c6a42b87",
                                    "vpcRegion": "us-west-2"
                                }
                            ]
                        },
                        "parent": "urn:pulumi:beta::html-css-js::defang-mvp:shared/ecs/defang:Defang::defang",
                        "dependencies": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1"
                        ],
                        "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                        "propertyDependencies": {
                            "comment": [],
                            "forceDestroy": [],
                            "name": [],
                            "vpcs": [
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc"
                            ]
                        }
                    },
                    "type": "creating"
                },
                {
                    "resource": {
                        "urn": "urn:pulumi:beta::html-css-js::aws:lb/loadBalancer:LoadBalancer::alb",
                        "custom": true,
                        "type": "aws:lb/loadBalancer:LoadBalancer",
                        "inputs": {
                            "__defaults": [
                                "clientKeepAlive",
                                "desyncMitigationMode",
                                "dnsRecordClientRoutingPolicy",
                                "dropInvalidHeaderFields",
                                "enableHttp2",
                                "enableTlsVersionAndCipherSuiteHeaders",
                                "enableWafFailOpen",
                                "enableXffClientPort",
                                "enableZonalShift",
                                "preserveHostHeader",
                                "xffHeaderProcessingMode"
                            ],
                            "accessLogs": {
                                "__defaults": [],
                                "bucket": "defang-html-css-js-beta-alb-logs20251122115311301900000001",
                                "enabled": true
                            },
                            "clientKeepAlive": 3600,
                            "desyncMitigationMode": "defensive",
                            "dnsRecordClientRoutingPolicy": "any_availability_zone",
                            "dropInvalidHeaderFields": false,
                            "enableCrossZoneLoadBalancing": true,
                            "enableDeletionProtection": false,
                            "enableHttp2": true,
                            "enableTlsVersionAndCipherSuiteHeaders": false,
                            "enableWafFailOpen": false,
                            "enableXffClientPort": false,
                            "enableZonalShift": false,
                            "idleTimeout": 300,
                            "internal": false,
                            "loadBalancerType": "application",
                            "name": "defang-html-css-js-beta-alb",
                            "preserveHostHeader": false,
                            "securityGroups": [
                                "sg-0bfc62d79b83b455e"
                            ],
                            "subnets": [
                                "subnet-007b405cfe3fdb5a3",
                                "subnet-05837a20eb688bf3c",
                                "subnet-0bd5ece4349f2954e"
                            ],
                            "tags": {
                                "defang:org": "testuser",
                                "defang:project": "html-css-js",
                                "defang:stack": "beta",
                                "defang:version": "0.6.0-1189-gb86d4117",
                                "scope": "pub"
                            },
                            "tagsAll": {
                                "defang:org": "testuser",
                                "defang:project": "html-css-js",
                                "defang:stack": "beta",
                                "defang:version": "0.6.0-1189-gb86d4117",
                                "scope": "pub"
                            },
                            "xffHeaderProcessingMode": "append"
                        },
                        "parent": "urn:pulumi:beta::html-css-js::pulumi:pulumi:Stack::html-css-js-beta",
                        "dependencies": [
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                            "urn:pulumi:beta::html-css-js::aws:ec2/securityGroup:SecurityGroup::sg443",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1",
                            "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                            "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc"
                        ],
                        "provider": "urn:pulumi:beta::html-css-js::pulumi:providers:aws::default_6_57_0::f3def38c-662d-4447-9759-16c0334ac0bf",
                        "propertyDependencies": {
                            "accessLogs": [
                                "urn:pulumi:beta::html-css-js::aws:s3/bucket:Bucket::alb-logs"
                            ],
                            "enableCrossZoneLoadBalancing": [],
                            "enableDeletionProtection": [],
                            "idleTimeout": [],
                            "internal": [],
                            "loadBalancerType": [],
                            "name": [],
                            "securityGroups": [
                                "urn:pulumi:beta::html-css-js::aws:ec2/securityGroup:SecurityGroup::sg443"
                            ],
                            "subnets": [
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-2",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc::shared-vpc",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-3",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-1",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-2",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-public-3",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc::shared-vpc",
                                "urn:pulumi:beta::html-css-js::awsx:ec2:Vpc$aws:ec2/vpc:Vpc$aws:ec2/subnet:Subnet::shared-vpc-private-1"
                            ],
                            "tags": []
                        }
                    },
                    "type": "creating"
                }
            ],
            "metadata": {}
        }
    }
}
