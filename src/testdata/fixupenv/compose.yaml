services:
  Mistral:
    image: "mistral:latest"
    ports:
      - mode: host
        target: 8000
  ui:
    image: "ui:latest"
    environment:
      - "API_URL=http://Mistral:8000"
      - "SENSITIVE_DATA"
  ingress-service:
    image: "somedb:latest"
    ports:
      - mode: ingress
        target: 5432
  use-ingress-service:
    image: "service:latest"
    environment:
      - "UI_URL=ingress-service:5432"
  fixup-args:
    build:
      args:
        - "API_URL=http://Mistral:8000"
  refer-self:
    image: "service:latest"
    environment:
      - "CONFIG3=refer-self"
    ports:
      - mode: ingress
        target: 5678
